{"ast":null,"code":"import React,{useState,useRef,useEffect}from'react';// import MultiPhotoIndicator from './MultiPhotoIndicator';\n// Removed unused imports\nimport{useTranslation}from'react-i18next';import{useAuth}from'../contexts/AuthContext';import DogImageSlider from'./DogImageSlider';import{createPortal}from'react-dom';// Geocode location if needed (mirrors DogDetails)\n// (handleShowMap will be defined inside the component, after imports)\n// ...existing imports...\n// Removed unused toHttps function\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const CardSmall=props=>{// Destructure props for easier access\nconst{_id,images,video,thumbnail,name,likes,breed,place,gender,onViewDetails,onEdit,onRemove,canEdit,user:owner,adoptionStatus,adoptionQueue,onDogUpdate,createdAt}=props;const{t}=useTranslation();const{currentUser,isAuthenticated,token,addToWishlist,removeFromWishlist}=useAuth();const[showMap,setShowMap]=useState(false);const[coords,setCoords]=useState(null);const[coordsError,setCoordsError]=useState(null);const[loadingCoords,setLoadingCoords]=useState(false);const isOwner=currentUser&&owner&&currentUser._id===owner._id;const handleShowMap=async()=>{if(!place)return;setLoadingCoords(true);setCoords(null);setCoordsError(null);try{const response=await fetch(\"https://nominatim.openstreetmap.org/search?format=json&q=\".concat(encodeURIComponent(place)),{headers:{'Accept':'application/json','User-Agent':'eky-app/1.0 (your@email.com)'}});const data=await response.json();if(data&&data.length){const result=data[0];setCoords({lat:parseFloat(result.lat),lng:parseFloat(result.lon)});}else{setCoordsError(t('dogDetails.approximateLocation')||'Approximate location');}}catch(e){setCoordsError(t('dogDetails.searchBasedLocation')||'Search-based location');}finally{setLoadingCoords(false);setShowMap(true);}};// Wishlist state\nconst[inWishlist,setInWishlist]=useState(false);React.useEffect(()=>{if(_id&&currentUser&&currentUser.wishlist){const isInList=currentUser.wishlist.includes(_id);setInWishlist(isInList);}else{setInWishlist(false);}},[_id,currentUser]);// Likes state\nconst[likesCount,setLikesCount]=useState((likes===null||likes===void 0?void 0:likes.length)||0);const[isLiked,setIsLiked]=useState((likes===null||likes===void 0?void 0:likes.includes((currentUser===null||currentUser===void 0?void 0:currentUser._id)||''))||false);React.useEffect(()=>{if(likes&&currentUser!==null&&currentUser!==void 0&&currentUser._id){setIsLiked(likes.includes(currentUser._id));setLikesCount(likes.length);}else{setIsLiked(false);setLikesCount((likes===null||likes===void 0?void 0:likes.length)||0);}},[likes,currentUser===null||currentUser===void 0?void 0:currentUser._id]);// Adoption state for list view\nconst[adoptionStatusState,setAdoptionStatus]=useState(adoptionStatus);const[adoptionQueueState,setAdoptionQueue]=useState(adoptionQueue);React.useEffect(()=>{setAdoptionStatus(adoptionStatus);setAdoptionQueue(adoptionQueue);},[adoptionStatus,adoptionQueue,_id]);const[adoptLoading,setAdoptLoading]=useState(false);const[adoptError,setAdoptError]=useState(null);// API base\nconst getApiBase=()=>{if(process.env.REACT_APP_API_URL)return process.env.REACT_APP_API_URL;if(window.location.hostname==='localhost'||window.location.hostname==='127.0.0.1'){return\"http://\".concat(window.location.hostname,\":3001\");}return\"http://\".concat(window.location.hostname,\":3001\");};const apiBase=getApiBase();// Image base\nconst getImageBase=()=>{if(process.env.REACT_APP_API_URL)return process.env.REACT_APP_API_URL;if(window.location.hostname==='localhost'||window.location.hostname==='127.0.0.1'){return\"http://\".concat(window.location.hostname,\":3001\");}return\"http://\".concat(window.location.hostname,\":3001\");};const imageBase=getImageBase();const handleWishlistToggle=async()=>{if(!_id||!isAuthenticated){alert('Please log in to add dogs to your wishlist');return;}// Removed unused latestToken variable\nconst currentlyInWishlist=inWishlist;if(currentlyInWishlist){// Pass latestToken to removeFromWishlist if needed\nconst result=await removeFromWishlist(_id);if(result.success){setInWishlist(false);alert('Removed from wishlist!');}else{alert('Failed to remove from wishlist: '+(result.error||'Unknown error'));}}else{// Pass latestToken to addToWishlist if needed\nconst result=await addToWishlist(_id);if(result.success){setInWishlist(true);alert('Added to wishlist! ‚ù§Ô∏è');}else{alert('Failed to add to wishlist: '+(result.error||'Unknown error'));}}};const handleConfirm=async()=>{if(!_id)return;setAdoptLoading(true);setAdoptError(null);try{const resp=await fetch(\"\".concat(apiBase,\"/api/dogs/\").concat(_id,\"/adopt-confirm\"),{method:'POST',headers:{'Content-Type':'application/json','Authorization':localStorage.getItem('token')?\"Bearer \".concat(localStorage.getItem('token')):''}});const data=await resp.json();if(!resp.ok)throw new Error(data.message||'Error');if(data.adopted===true||data.removed===true){// Dog adopted and removed\nalert('Dog has been successfully adopted!');if(onDogUpdate)onDogUpdate({remove:true,id:_id});// Remove from list\n}else{setAdoptionQueue(data.adoptionQueue);alert('Confirmation saved. Waiting for the other party.');}}catch(e){setAdoptError(e.message||'Error');}finally{setAdoptLoading(false);}};const handleAdopt=async()=>{if(!_id)return;setAdoptLoading(true);setAdoptError(null);try{const resp=await fetch(\"\".concat(apiBase,\"/api/dogs/\").concat(_id,\"/adopt-request\"),{method:'POST',headers:{'Content-Type':'application/json','Authorization':localStorage.getItem('token')?\"Bearer \".concat(localStorage.getItem('token')):''}});const data=await resp.json();if(!resp.ok)throw new Error(data.message||'Error');setAdoptionStatus(data.dog.adoptionStatus);setAdoptionQueue(data.dog.adoptionQueue);if(onDogUpdate&&data.dog)onDogUpdate(data.dog);}catch(e){setAdoptError(e.message||'Error');}finally{setAdoptLoading(false);}};// Helper to get absolute URL for images\nconst toAbsUrl=url=>{if(!url)return url;// If already absolute (http/https), use as is\nif(/^https?:\\/\\//.test(url))return url;// If starts with /uploads/ or /u/dogs/, prepend imageBase\nif(url.startsWith('/uploads/')||url.startsWith('/u/dogs/'))return imageBase+url;// If starts with uploads/ or u/dogs/ (missing leading slash), add it and prepend imageBase\nif(url.startsWith('uploads/')||url.startsWith('u/dogs/'))return imageBase+'/'+url;// Otherwise, treat as relative to imageBase\nreturn imageBase+'/'+url.replace(/^\\/+/,'');};// Only use local or external image URLs\nlet largestImgUrl=undefined;const validImages=(images||[]).filter(img=>img&&img.url&&typeof img.url==='string'&&img.url.trim()!=='');if(validImages.length){// Prefer largest available\nconst sorted=[...validImages].sort((a,b)=>(b.width||0)-(a.width||0));largestImgUrl=toAbsUrl(sorted[0].url);}const posterUrl=video&&video.poster&&video.poster.length?toAbsUrl(video.poster[video.poster.length-1].url):undefined;const hasVideoUrl=video&&typeof video.url==='string'&&video.url.length>0;const videoUrl=hasVideoUrl?toAbsUrl(video.url):undefined;let thumbUrl=undefined;if(thumbnail&&thumbnail.url){thumbUrl=toAbsUrl(thumbnail.url);}const[showSlider,setShowSlider]=useState(false);const sliderContentRef=useRef(null);// Removed unused sliderModalRef\n// Close modal on Escape key\nuseEffect(()=>{if(!showSlider)return;const handleKeyDown=e=>{if(e.key==='Escape')setShowSlider(false);};document.addEventListener('keydown',handleKeyDown);return()=>document.removeEventListener('keydown',handleKeyDown);},[showSlider]);// Prepare unique images for DogImageSlider (one per uploaded photo, pick only 1024px variant)\nlet uniqueImages=[];if(images&&images.length>0){// Prefer 1024px images, fallback to all valid images\nconst preferred=images.filter(img=>img.width===1024&&img.url);const fallback=images.filter(img=>img.url);const source=preferred.length>0?preferred:fallback;uniqueImages=source.map(img=>({url:toAbsUrl(img.url),width:img.width}));}return/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"img\",style:{position:'relative',cursor:images&&images.length>0?'pointer':'default',width:'100%',aspectRatio:'1/1',height:0,paddingBottom:'100%',display:'block',background:'#f8f8f8',boxSizing:'border-box',border:'1px solid #eee',overflow:'hidden',borderRadius:'1rem'},onClick:images&&images.length>0?()=>setShowSlider(true):undefined,children:[hasVideoUrl?/*#__PURE__*/_jsx(\"video\",{controls:true,width:\"100%\",height:\"auto\",poster:posterUrl,children:/*#__PURE__*/_jsx(\"source\",{src:videoUrl})}):largestImgUrl?/*#__PURE__*/_jsxs(\"div\",{style:{position:'relative',width:'100%',aspectRatio:'1/1'},children:[/*#__PURE__*/_jsx(\"img\",{src:largestImgUrl,alt:name,style:{width:'100%',height:'100%',aspectRatio:'1/1',objectFit:'cover',display:'block',borderRadius:'1rem',imageRendering:'auto',position:'relative',zIndex:1},onError:e=>{e.target.src='/img/nany.jpg';}}),adoptionStatusState==='pending'&&/*#__PURE__*/_jsx(\"div\",{style:{position:'absolute',top:0,left:0,width:'100%',height:'100%',background:'rgba(0,0,0,0.45)',color:'#fff',display:'flex',alignItems:'center',justifyContent:'center',fontSize:22,fontWeight:700,letterSpacing:1,borderRadius:'1rem',zIndex:2,textShadow:'0 2px 8px #000',pointerEvents:'none'},children:\"In adoption process\"})]}):typeof thumbUrl!=='undefined'&&thumbUrl?/*#__PURE__*/_jsxs(\"div\",{style:{position:'relative',width:'100%',aspectRatio:'1/1'},children:[/*#__PURE__*/_jsx(\"img\",{src:thumbUrl,alt:name,style:{width:'100%',height:'100%',aspectRatio:'1/1',objectFit:'cover',display:'block',borderRadius:'1rem',imageRendering:'auto',position:'relative',zIndex:1},onError:e=>{e.target.src='/img/nany.jpg';}}),adoptionStatusState==='pending'&&/*#__PURE__*/_jsx(\"div\",{style:{position:'absolute',top:0,left:0,width:'100%',height:'100%',background:'rgba(0,0,0,0.45)',color:'#fff',display:'flex',alignItems:'center',justifyContent:'center',fontSize:22,fontWeight:700,letterSpacing:1,borderRadius:'1rem',zIndex:2,textShadow:'0 2px 8px #000',pointerEvents:'none'},children:\"In adoption process\"})]}):null,uniqueImages.length>0&&showSlider&&/*#__PURE__*/createPortal(/*#__PURE__*/_jsx(\"div\",{style:{position:'fixed',top:0,left:0,width:'100vw',height:'100vh',background:'rgba(0,0,0,0.85)',zIndex:9999,display:'flex',alignItems:'center',justifyContent:'center',flexDirection:'column',padding:'6vw 0',// More vertical padding for overlay\nboxSizing:'border-box'},onClick:e=>{if(e.target===e.currentTarget)setShowSlider(false);},\"aria-modal\":\"true\",role:\"dialog\",tabIndex:-1,children:/*#__PURE__*/_jsxs(\"div\",{style:{position:'relative',maxWidth:600,width:'90vw',height:'auto',maxHeight:'80vh',background:'transparent',borderRadius:16,overflow:'hidden',display:'flex',alignItems:'center',justifyContent:'center',flexDirection:'column',boxSizing:'border-box'},onClick:e=>e.stopPropagation(),tabIndex:-1,ref:sliderContentRef,children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:e=>{e.stopPropagation();setShowSlider(false);},\"aria-label\":\"Close slider\",style:{position:'absolute',top:8,right:8,zIndex:10000,background:'#e74c3c',color:'#fff',border:'none',borderRadius:'50%',width:40,height:40,fontSize:28,fontWeight:900,cursor:'pointer',boxShadow:'0 4px 24px rgba(0,0,0,0.35)',display:'flex',alignItems:'center',justifyContent:'center',transition:'background 0.2s',userSelect:'none',touchAction:'manipulation'},tabIndex:0,autoFocus:true,children:\"\\xD7\"}),/*#__PURE__*/_jsx(DogImageSlider,{images:uniqueImages,alt:name})]})}),document.body)]}),/*#__PURE__*/_jsxs(\"div\",{className:\"description\",children:[/*#__PURE__*/_jsxs(\"h3\",{style:{color:'#751719',marginBottom:4},children:[/*#__PURE__*/_jsx(\"strong\",{children:t('fields.name')}),\" \",name]}),breed&&/*#__PURE__*/_jsxs(\"p\",{className:\"meta\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"eky-icon eky-tag\"}),/*#__PURE__*/_jsx(\"strong\",{children:t('fields.breed')}),\" \",breed]}),gender&&(gender==='male'||gender==='female')&&/*#__PURE__*/_jsxs(\"p\",{className:\"meta\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"eky-icon eky-user\"}),/*#__PURE__*/_jsx(\"strong\",{children:t('fields.gender')}),\" \",t(\"gender.\".concat(gender))]}),place&&/*#__PURE__*/_jsxs(\"p\",{className:\"meta\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"eky-icon eky-map\"}),/*#__PURE__*/_jsx(\"strong\",{children:t('fields.location')}),/*#__PURE__*/_jsx(\"span\",{style:{cursor:place?'pointer':'default',textDecoration:place?'underline':'none'},onClick:place?handleShowMap:undefined,children:place})]}),showMap&&place&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-map\",style:{position:'fixed',top:0,left:0,width:'100vw',height:'100vh',background:'rgba(0,0,0,0.5)',zIndex:9999,display:'flex',alignItems:'center',justifyContent:'center'},children:/*#__PURE__*/_jsxs(\"div\",{style:{background:'#fff',padding:20,borderRadius:12,maxWidth:600,width:'90vw',position:'relative'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowMap(false),style:{position:'absolute',top:10,right:10,width:56,height:56,backgroundColor:'#e74c3c',color:'#fff',border:'none',borderRadius:'50%',display:'flex',alignItems:'center',justifyContent:'center',boxShadow:'0 4px 12px rgba(0,0,0,0.3)',cursor:'pointer',zIndex:2147483647,padding:0},title:t('common.close'),\"aria-label\":t('common.close'),children:/*#__PURE__*/_jsx(\"span\",{style:{fontSize:40,fontWeight:900,lineHeight:'56px',width:'100%',textAlign:'center',display:'block',userSelect:'none',letterSpacing:2},children:\"\\xD7\"})}),/*#__PURE__*/_jsx(\"h3\",{style:{marginBottom:10},children:place}),loadingCoords?/*#__PURE__*/_jsx(\"div\",{style:{textAlign:'center',padding:40},children:/*#__PURE__*/_jsx(\"span\",{children:t('dogDetails.loadingMap')||'Loading map...'})}):coords?/*#__PURE__*/_jsx(\"iframe\",{title:\"Map Preview\",width:\"100%\",height:\"400\",style:{border:0,borderRadius:8},src:\"https://www.openstreetmap.org/export/embed.html?bbox=\".concat(coords.lng-0.005,\",\").concat(coords.lat-0.005,\",\").concat(coords.lng+0.005,\",\").concat(coords.lat+0.005,\"&layer=mapnik&marker=\").concat(coords.lat,\",\").concat(coords.lng),allowFullScreen:true}):coordsError?/*#__PURE__*/_jsx(\"div\",{style:{color:'red',textAlign:'center',padding:40},children:coordsError}):null]})}),owner&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'1rem',paddingTop:'1rem',borderTop:'1px solid #ddd'},children:[/*#__PURE__*/_jsxs(\"p\",{className:\"meta\",style:{marginBottom:'0.5rem'},children:[/*#__PURE__*/_jsxs(\"strong\",{children:[t('fields.postedBy')||'Posted by',\":\"]}),\" \",owner.name,createdAt&&/*#__PURE__*/_jsxs(\"span\",{style:{marginLeft:8,color:'#888',fontSize:'11px'},children:[\"\\u2022 \",new Date(createdAt).toLocaleDateString(undefined,{year:'numeric',month:'short',day:'numeric'})]})]}),owner.person&&/*#__PURE__*/_jsxs(\"p\",{className:\"meta\",style:{marginBottom:'0.5rem'},children:[/*#__PURE__*/_jsxs(\"strong\",{children:[t('fields.userType')||'Type',\":\"]}),\" \",t(\"registerOptions.\".concat(owner.person))||owner.person]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-actions\",style:{display:'flex',flexWrap:'wrap',gap:'4px',marginTop:'6px',width:'100%',rowGap:'4px',columnGap:'4px',minHeight:'24px',boxSizing:'border-box',overflow:'hidden'},children:[/*#__PURE__*/_jsx(\"button\",{className:\"details\",onClick:onViewDetails,style:{padding:'2px 7px',border:'none',borderRadius:'10px',background:'#2196F3',// app main color\ncolor:'white',fontSize:'10px',fontWeight:500,whiteSpace:'nowrap',minWidth:'fit-content',boxShadow:'0 1px 4px rgba(33,150,243,0.08)'},children:t('button.viewDetails')}),isAuthenticated&&_id&&adoptionStatusState!=='adopted'&&/*#__PURE__*/_jsxs(_Fragment,{children:[adoptionStatusState==='pending'&&adoptionQueueState&&currentUser?adoptionQueueState.adopter===currentUser._id?/*#__PURE__*/_jsx(\"button\",{id:\"adopt\",className:\"details adopt-btn\",disabled:true,children:t('button.requested')||'Requested'}):isOwner?adoptionQueueState.ownerConfirmed?/*#__PURE__*/_jsx(\"button\",{className:\"details\",disabled:true,children:t('button.waiting')||'Waiting for adopter confirmation'}):null:/*#__PURE__*/_jsx(\"button\",{id:\"adopt\",className:\"details\",onClick:handleAdopt,disabled:adoptLoading,style:{background:'#267822',border:'none',borderRadius:'10px',color:'white',fontSize:'10px',fontWeight:500},children:adoptLoading?t('button.sending')||'Slanje...':t('button.adopt')}):/*#__PURE__*/_jsx(\"button\",{id:\"adopt\",className:\"details\",onClick:handleAdopt,disabled:adoptLoading||adoptionStatusState==='adopted',style:{background:'#267822',border:'none',borderRadius:'10px',color:'white',fontSize:'10px',fontWeight:500},children:adoptLoading?t('button.sending')||'Slanje...':t('button.adopt')}),adoptError&&/*#__PURE__*/_jsx(\"div\",{style:{color:'red',marginTop:4,fontSize:'10px'},children:adoptError}),/*#__PURE__*/_jsxs(\"button\",{className:\"like \".concat(isLiked?'liked':''),onClick:async()=>{if(!isAuthenticated||!_id)return;if(isLiked){// Optimistically update UI\nsetIsLiked(false);setLikesCount(prev=>Math.max(0,prev-1));try{const response=await fetch(\"\".concat(apiBase,\"/api/dogs/\").concat(_id,\"/unlike\"),{method:'POST',headers:{'Authorization':\"Bearer \".concat(token)}});if(response.ok){const data=await response.json();setLikesCount(data.likesCount);}}catch(error){console.error('Unlike error:',error);}}else{// Optimistically update UI\nsetIsLiked(true);setLikesCount(prev=>prev+1);try{const response=await fetch(\"\".concat(apiBase,\"/api/dogs/\").concat(_id,\"/like\"),{method:'POST',headers:{'Authorization':\"Bearer \".concat(token)}});if(response.ok){const data=await response.json();setLikesCount(data.likesCount);}}catch(error){console.error('Like error:',error);}}},children:[\"\\uD83D\\uDC4D \",likesCount]}),/*#__PURE__*/_jsx(\"button\",{className:\"wishlist \".concat(inWishlist?'in-wishlist':''),onClick:()=>{// eslint-disable-next-line no-console\n// Removed debug log for addToList and removeFromList\nhandleWishlistToggle();},title:inWishlist?t('button.removeFromList'):t('button.addToList'),children:(()=>{const addToList=t('button.addToList');const removeFromList=t('button.removeFromList');// eslint-disable-next-line no-console\nreturn inWishlist?'üíî '+removeFromList:'‚ù§Ô∏è '+addToList;})()})]}),!isAuthenticated&&_id&&/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'12px',color:'#666',display:'flex',alignItems:'center',gap:'4px'},children:[\"\\uD83D\\uDC4D \",likesCount]}),canEdit&&onEdit&&/*#__PURE__*/_jsx(\"button\",{className:\"edit\",onClick:onEdit,title:t('button.edit')||'Edit',children:t('button.edit')||'Edit'}),canEdit&&onRemove&&/*#__PURE__*/_jsx(\"button\",{className:\"remove\",onClick:onRemove,title:t('button.remove')||'Remove',children:t('button.remove')||'Remove'})]})]})]});};export default CardSmall;","map":{"version":3,"names":["React","useState","useRef","useEffect","useTranslation","useAuth","DogImageSlider","createPortal","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","CardSmall","props","_id","images","video","thumbnail","name","likes","breed","place","gender","onViewDetails","onEdit","onRemove","canEdit","user","owner","adoptionStatus","adoptionQueue","onDogUpdate","createdAt","t","currentUser","isAuthenticated","token","addToWishlist","removeFromWishlist","showMap","setShowMap","coords","setCoords","coordsError","setCoordsError","loadingCoords","setLoadingCoords","isOwner","handleShowMap","response","fetch","concat","encodeURIComponent","headers","data","json","length","result","lat","parseFloat","lng","lon","e","inWishlist","setInWishlist","wishlist","isInList","includes","likesCount","setLikesCount","isLiked","setIsLiked","adoptionStatusState","setAdoptionStatus","adoptionQueueState","setAdoptionQueue","adoptLoading","setAdoptLoading","adoptError","setAdoptError","getApiBase","process","env","REACT_APP_API_URL","window","location","hostname","apiBase","getImageBase","imageBase","handleWishlistToggle","alert","currentlyInWishlist","success","error","handleConfirm","resp","method","localStorage","getItem","ok","Error","message","adopted","removed","remove","id","handleAdopt","dog","toAbsUrl","url","test","startsWith","replace","largestImgUrl","undefined","validImages","filter","img","trim","sorted","sort","a","b","width","posterUrl","poster","hasVideoUrl","videoUrl","thumbUrl","showSlider","setShowSlider","sliderContentRef","handleKeyDown","key","document","addEventListener","removeEventListener","uniqueImages","preferred","fallback","source","map","className","children","style","position","cursor","aspectRatio","height","paddingBottom","display","background","boxSizing","border","overflow","borderRadius","onClick","controls","src","alt","objectFit","imageRendering","zIndex","onError","target","top","left","color","alignItems","justifyContent","fontSize","fontWeight","letterSpacing","textShadow","pointerEvents","flexDirection","padding","currentTarget","role","tabIndex","maxWidth","maxHeight","stopPropagation","ref","type","right","boxShadow","transition","userSelect","touchAction","autoFocus","body","marginBottom","textDecoration","backgroundColor","title","lineHeight","textAlign","allowFullScreen","marginTop","paddingTop","borderTop","marginLeft","Date","toLocaleDateString","year","month","day","person","flexWrap","gap","rowGap","columnGap","minHeight","whiteSpace","minWidth","adopter","disabled","ownerConfirmed","prev","Math","max","console","addToList","removeFromList"],"sources":["/Applications/MAMP/htdocs/eky/client/src/components/CardSmall.tsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\n// import MultiPhotoIndicator from './MultiPhotoIndicator';\n// Removed unused imports\nimport { useTranslation } from 'react-i18next';\nimport { useAuth } from '../contexts/AuthContext';\nimport DogImageSlider from './DogImageSlider';\nimport { createPortal } from 'react-dom';\n\n\n\n// Geocode location if needed (mirrors DogDetails)\n// (handleShowMap will be defined inside the component, after imports)\n// ...existing imports...\n// Removed unused toHttps function\ninterface MediaVariant { url: string; width?: number; size?: string }\ninterface CardSmallProps {\n  _id?: string;\n  images?: MediaVariant[];\n  video?: { url: string; poster?: MediaVariant[] };\n  thumbnail?: MediaVariant;\n  name: string;\n  age?: number;\n  likes?: string[];\n  breed?: string;\n  color?: string;\n  place?: string;\n  location?: string;\n  lat?: number;\n  lng?: number;\n  description?: string;\n  size?: string;\n  gender?: 'male' | 'female';\n  vaccinated?: boolean;\n  neutered?: boolean;\n  onViewDetails?: (event: React.MouseEvent<HTMLButtonElement>) => void;\n  onEdit?: (event: React.MouseEvent<HTMLButtonElement>) => void;\n  onRemove?: () => void;\n  canEdit?: boolean;\n  user?: {\n    _id: string;\n    name: string;\n    username: string;\n    email?: string;\n    phone?: string;\n    person?: 'private' | 'organization';\n  };\n  adoptionStatus?: string;\n  adoptionQueue?: any;\n  onDogUpdate?: (update: any) => void;\n  createdAt?: string;\n}\n\nconst CardSmall: React.FC<CardSmallProps> = (props) => {\n  // Destructure props for easier access\n  const {\n    _id,\n    images,\n    video,\n    thumbnail,\n    name,\n    likes,\n    breed,\n    place,\n    gender,\n    onViewDetails,\n    onEdit,\n    onRemove,\n    canEdit,\n    user: owner,\n    adoptionStatus,\n    adoptionQueue,\n    onDogUpdate,\n    createdAt,\n  } = props;\n\n  const { t } = useTranslation();\n  const { currentUser, isAuthenticated, token, addToWishlist, removeFromWishlist } = useAuth();\n  const [showMap, setShowMap] = useState(false);\n  const [coords, setCoords] = useState<{ lat: number; lng: number } | null>(null);\n  const [coordsError, setCoordsError] = useState<string | null>(null);\n  const [loadingCoords, setLoadingCoords] = useState(false);\n\n  const isOwner = currentUser && owner && currentUser._id === owner._id;\n\n  const handleShowMap = async () => {\n    if (!place) return;\n    setLoadingCoords(true);\n    setCoords(null);\n    setCoordsError(null);\n    try {\n      const response = await fetch(\n        `https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(place)}`,\n        {\n          headers: {\n            'Accept': 'application/json',\n            'User-Agent': 'eky-app/1.0 (your@email.com)'\n          }\n        }\n      );\n      const data = await response.json();\n      if (data && data.length) {\n        const result = data[0];\n        setCoords({ lat: parseFloat(result.lat), lng: parseFloat(result.lon) });\n      } else {\n        setCoordsError(t('dogDetails.approximateLocation') || 'Approximate location');\n      }\n    } catch (e) {\n      setCoordsError(t('dogDetails.searchBasedLocation') || 'Search-based location');\n    } finally {\n      setLoadingCoords(false);\n      setShowMap(true);\n    }\n  };\n  // Wishlist state\n  const [inWishlist, setInWishlist] = useState(false);\n  React.useEffect(() => {\n    if (_id && currentUser && currentUser.wishlist) {\n      const isInList = currentUser.wishlist.includes(_id);\n      setInWishlist(isInList);\n    } else {\n      setInWishlist(false);\n    }\n  }, [_id, currentUser]);\n\n  // Likes state\n  const [likesCount, setLikesCount] = useState(likes?.length || 0);\n  const [isLiked, setIsLiked] = useState(likes?.includes(currentUser?._id || '') || false);\n  React.useEffect(() => {\n    if (likes && currentUser?._id) {\n      setIsLiked(likes.includes(currentUser._id));\n      setLikesCount(likes.length);\n    } else {\n      setIsLiked(false);\n      setLikesCount(likes?.length || 0);\n    }\n  }, [likes, currentUser?._id]);\n\n  // Adoption state for list view\n  const [adoptionStatusState, setAdoptionStatus] = useState<string | undefined>(adoptionStatus);\n  const [adoptionQueueState, setAdoptionQueue] = useState<any>(adoptionQueue);\n  React.useEffect(() => {\n    setAdoptionStatus(adoptionStatus);\n    setAdoptionQueue(adoptionQueue);\n  }, [adoptionStatus, adoptionQueue, _id]);\n  const [adoptLoading, setAdoptLoading] = useState(false);\n  const [adoptError, setAdoptError] = useState<string | null>(null);\n\n  // API base\n  const getApiBase = () => {\n    if (process.env.REACT_APP_API_URL) return process.env.REACT_APP_API_URL;\n    if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {\n      return `http://${window.location.hostname}:3001`;\n    }\n    return `http://${window.location.hostname}:3001`;\n  };\n  const apiBase = getApiBase();\n\n  // Image base\n  const getImageBase = () => {\n    if (process.env.REACT_APP_API_URL) return process.env.REACT_APP_API_URL;\n    if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {\n      return `http://${window.location.hostname}:3001`;\n    }\n    return `http://${window.location.hostname}:3001`;\n  };\n  const imageBase = getImageBase();\n\n  const handleWishlistToggle = async () => {\n    if (!_id || !isAuthenticated) {\n      alert('Please log in to add dogs to your wishlist');\n      return;\n    }\n    // Removed unused latestToken variable\n    const currentlyInWishlist = inWishlist;\n    if (currentlyInWishlist) {\n      // Pass latestToken to removeFromWishlist if needed\n      const result = await removeFromWishlist(_id);\n      if (result.success) {\n        setInWishlist(false);\n        alert('Removed from wishlist!');\n      } else {\n        alert('Failed to remove from wishlist: ' + (result.error || 'Unknown error'));\n      }\n    } else {\n      // Pass latestToken to addToWishlist if needed\n      const result = await addToWishlist(_id);\n      if (result.success) {\n        setInWishlist(true);\n        alert('Added to wishlist! ‚ù§Ô∏è');\n      } else {\n        alert('Failed to add to wishlist: ' + (result.error || 'Unknown error'));\n      }\n    }\n  };\n\n  const handleConfirm = async () => {\n    if (!_id) return;\n    setAdoptLoading(true);\n    setAdoptError(null);\n    try {\n      const resp = await fetch(`${apiBase}/api/dogs/${_id}/adopt-confirm`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': localStorage.getItem('token') ? `Bearer ${localStorage.getItem('token')}` : ''\n        }\n      });\n      const data = await resp.json();\n      if (!resp.ok) throw new Error(data.message || 'Error');\n      if (data.adopted === true || data.removed === true) {\n        // Dog adopted and removed\n        alert('Dog has been successfully adopted!');\n        if (onDogUpdate) onDogUpdate({ remove: true, id: _id }); // Remove from list\n      } else {\n        setAdoptionQueue(data.adoptionQueue);\n        alert('Confirmation saved. Waiting for the other party.');\n      }\n    } catch (e: any) {\n      setAdoptError(e.message || 'Error');\n    } finally {\n      setAdoptLoading(false);\n    }\n  };\n\n  const handleAdopt = async () => {\n    if (!_id) return;\n    setAdoptLoading(true);\n    setAdoptError(null);\n    try {\n      const resp = await fetch(`${apiBase}/api/dogs/${_id}/adopt-request`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': localStorage.getItem('token') ? `Bearer ${localStorage.getItem('token')}` : ''\n        }\n      });\n      const data = await resp.json();\n      if (!resp.ok) throw new Error(data.message || 'Error');\n      setAdoptionStatus(data.dog.adoptionStatus);\n      setAdoptionQueue(data.dog.adoptionQueue);\n      if (onDogUpdate && data.dog) onDogUpdate(data.dog);\n    } catch (e: any) {\n      setAdoptError(e.message || 'Error');\n    } finally {\n      setAdoptLoading(false);\n    }\n  };\n\n\n  // Helper to get absolute URL for images\n  const toAbsUrl = (url?: string) => {\n    if (!url) return url;\n    // If already absolute (http/https), use as is\n    if (/^https?:\\/\\//.test(url)) return url;\n    // If starts with /uploads/ or /u/dogs/, prepend imageBase\n    if (url.startsWith('/uploads/') || url.startsWith('/u/dogs/')) return imageBase + url;\n    // If starts with uploads/ or u/dogs/ (missing leading slash), add it and prepend imageBase\n    if (url.startsWith('uploads/') || url.startsWith('u/dogs/')) return imageBase + '/' + url;\n    // Otherwise, treat as relative to imageBase\n    return imageBase + '/' + url.replace(/^\\/+/, '');\n  };\n\n  // Only use local or external image URLs\n  let largestImgUrl: string | undefined = undefined;\n  const validImages = (images || []).filter(img => img && img.url && typeof img.url === 'string' && img.url.trim() !== '');\n  if (validImages.length) {\n    // Prefer largest available\n    const sorted = [...validImages].sort((a, b) => (b.width || 0) - (a.width || 0));\n    largestImgUrl = toAbsUrl(sorted[0].url);\n  }\n\n  const posterUrl = video && video.poster && video.poster.length\n    ? toAbsUrl(video.poster[video.poster.length - 1].url)\n    : undefined;\n  const hasVideoUrl = video && typeof video.url === 'string' && video.url.length > 0;\n  const videoUrl = hasVideoUrl ? toAbsUrl(video.url) : undefined;\n  let thumbUrl: string | undefined = undefined;\n  if (thumbnail && thumbnail.url) {\n    thumbUrl = toAbsUrl(thumbnail.url);\n  }\n\n  const [showSlider, setShowSlider] = useState(false);\n  const sliderContentRef = useRef<HTMLDivElement>(null);\n  // Removed unused sliderModalRef\n\n  // Close modal on Escape key\n  useEffect(() => {\n    if (!showSlider) return;\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if (e.key === 'Escape') setShowSlider(false);\n    };\n    document.addEventListener('keydown', handleKeyDown);\n    return () => document.removeEventListener('keydown', handleKeyDown);\n  }, [showSlider]);\n\n  // Prepare unique images for DogImageSlider (one per uploaded photo, pick only 1024px variant)\n  let uniqueImages: { url: string; width?: number }[] = [];\n  if (images && images.length > 0) {\n    // Prefer 1024px images, fallback to all valid images\n    const preferred = images.filter(img => img.width === 1024 && img.url);\n    const fallback = images.filter(img => img.url);\n    const source = preferred.length > 0 ? preferred : fallback;\n    uniqueImages = source.map(img => ({ url: toAbsUrl(img.url), width: img.width }));\n  }\n\n  return (\n    <div className=\"card\">\n      <div\n        className=\"img\"\n        style={{\n          position: 'relative',\n          cursor: images && images.length > 0 ? 'pointer' : 'default',\n          width: '100%',\n          aspectRatio: '1/1',\n          height: 0,\n          paddingBottom: '100%',\n          display: 'block',\n          background: '#f8f8f8',\n          boxSizing: 'border-box',\n          border: '1px solid #eee',\n          overflow: 'hidden',\n          borderRadius: '1rem'\n        }}\n        onClick={images && images.length > 0 ? () => setShowSlider(true) : undefined}\n      >\n        {hasVideoUrl ? (\n          <video controls width=\"100%\" height=\"auto\" poster={posterUrl}>\n            <source src={videoUrl} />\n          </video>\n        ) : (largestImgUrl) ? (\n            <div style={{ position: 'relative', width: '100%', aspectRatio: '1/1' }}>\n              <img src={largestImgUrl} alt={name} style={{ width: '100%', height: '100%', aspectRatio: '1/1', objectFit: 'cover', display: 'block', borderRadius: '1rem', imageRendering: 'auto', position: 'relative', zIndex: 1 }} onError={e => { (e.target as HTMLImageElement).src = '/img/nany.jpg'; }} />\n              {adoptionStatusState === 'pending' && (\n                <div style={{\n                  position: 'absolute',\n                  top: 0,\n                  left: 0,\n                  width: '100%',\n                  height: '100%',\n                  background: 'rgba(0,0,0,0.45)',\n                  color: '#fff',\n                  display: 'flex',\n                  alignItems: 'center',\n                  justifyContent: 'center',\n                  fontSize: 22,\n                  fontWeight: 700,\n                  letterSpacing: 1,\n                  borderRadius: '1rem',\n                  zIndex: 2,\n                  textShadow: '0 2px 8px #000',\n                  pointerEvents: 'none'\n                }}>\n                  In adoption process\n                </div>\n              )}\n            </div>\n        ) : (typeof (thumbUrl) !== 'undefined' && thumbUrl) ? (\n            <div style={{ position: 'relative', width: '100%', aspectRatio: '1/1' }}>\n              <img src={thumbUrl} alt={name} style={{ width: '100%', height: '100%', aspectRatio: '1/1', objectFit: 'cover', display: 'block', borderRadius: '1rem', imageRendering: 'auto', position: 'relative', zIndex: 1 }} onError={e => { (e.target as HTMLImageElement).src = '/img/nany.jpg'; }} />\n              {adoptionStatusState === 'pending' && (\n                <div style={{\n                  position: 'absolute',\n                  top: 0,\n                  left: 0,\n                  width: '100%',\n                  height: '100%',\n                  background: 'rgba(0,0,0,0.45)',\n                  color: '#fff',\n                  display: 'flex',\n                  alignItems: 'center',\n                  justifyContent: 'center',\n                  fontSize: 22,\n                  fontWeight: 700,\n                  letterSpacing: 1,\n                  borderRadius: '1rem',\n                  zIndex: 2,\n                  textShadow: '0 2px 8px #000',\n                  pointerEvents: 'none'\n                }}>\n                  In adoption process\n                </div>\n              )}\n            </div>\n        ) : null}\n        {/* Modal DogImageSlider */}\n        {uniqueImages.length > 0 && showSlider && createPortal(\n          <div\n            style={{\n              position: 'fixed',\n              top: 0,\n              left: 0,\n              width: '100vw',\n              height: '100vh',\n              background: 'rgba(0,0,0,0.85)',\n              zIndex: 9999,\n              display: 'flex',\n              alignItems: 'center',\n              justifyContent: 'center',\n              flexDirection: 'column',\n              padding: '6vw 0', // More vertical padding for overlay\n              boxSizing: 'border-box',\n            }}\n            onClick={e => {\n              if (e.target === e.currentTarget) setShowSlider(false);\n            }}\n            aria-modal=\"true\"\n            role=\"dialog\"\n            tabIndex={-1}\n          >\n            <div\n              style={{\n                position: 'relative',\n                maxWidth: 600,\n                width: '90vw',\n                height: 'auto',\n                maxHeight: '80vh',\n                background: 'transparent',\n                borderRadius: 16,\n                overflow: 'hidden',\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'center',\n                flexDirection: 'column',\n                boxSizing: 'border-box',\n              }}\n              onClick={e => e.stopPropagation()}\n              tabIndex={-1}\n              ref={sliderContentRef}\n            >\n              <button\n                type=\"button\"\n                onClick={e => { e.stopPropagation(); setShowSlider(false); }}\n                aria-label=\"Close slider\"\n                style={{\n                  position: 'absolute',\n                  top: 8,\n                  right: 8,\n                  zIndex: 10000,\n                  background: '#e74c3c',\n                  color: '#fff',\n                  border: 'none',\n                  borderRadius: '50%',\n                  width: 40,\n                  height: 40,\n                  fontSize: 28,\n                  fontWeight: 900,\n                  cursor: 'pointer',\n                  boxShadow: '0 4px 24px rgba(0,0,0,0.35)',\n                  display: 'flex',\n                  alignItems: 'center',\n                  justifyContent: 'center',\n                  transition: 'background 0.2s',\n                  userSelect: 'none',\n                  touchAction: 'manipulation',\n                }}\n                tabIndex={0}\n                autoFocus\n              >\n                √ó\n              </button>\n              <DogImageSlider images={uniqueImages} alt={name} />\n            </div>\n          </div>,\n          document.body\n        )}\n      </div>\n      <div className=\"description\">\n          <h3 style={{ color: '#751719', marginBottom: 4 }}>\n            <strong>{t('fields.name')}</strong> {name}\n          </h3>\n          {breed && (\n            <p className=\"meta\">\n              <span className=\"eky-icon eky-tag\"></span>\n              <strong>{t('fields.breed')}</strong> {breed}\n            </p>\n          )}\n          {gender && (gender === 'male' || gender === 'female') && (\n            <p className=\"meta\">\n              <span className=\"eky-icon eky-user\"></span>\n              <strong>{t('fields.gender')}</strong> {t(`gender.${gender}`)}\n            </p>\n          )}\n          {place && (\n            <p className=\"meta\">\n              <span className=\"eky-icon eky-map\"></span>\n              <strong>{t('fields.location')}</strong> \n              <span\n                style={{ cursor: place ? 'pointer' : 'default', textDecoration: place ? 'underline' : 'none' }}\n                onClick={place ? handleShowMap : undefined}\n              >\n                {place}\n              </span>\n            </p>\n          )}\n          {showMap && place && (\n            <div className=\"modal-map\" style={{ position: 'fixed', top: 0, left: 0, width: '100vw', height: '100vh', background: 'rgba(0,0,0,0.5)', zIndex: 9999, display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\n              <div style={{ background: '#fff', padding: 20, borderRadius: 12, maxWidth: 600, width: '90vw', position: 'relative' }}>\n                <button\n                  onClick={() => setShowMap(false)}\n                  style={{\n                    position: 'absolute',\n                    top: 10,\n                    right: 10,\n                    width: 56,\n                    height: 56,\n                    backgroundColor: '#e74c3c',\n                    color: '#fff',\n                    border: 'none',\n                    borderRadius: '50%',\n                    display: 'flex',\n                    alignItems: 'center',\n                    justifyContent: 'center',\n                    boxShadow: '0 4px 12px rgba(0,0,0,0.3)',\n                    cursor: 'pointer',\n                    zIndex: 2147483647,\n                    padding: 0\n                  }}\n                  title={t('common.close')}\n                  aria-label={t('common.close')}\n                >\n                  <span style={{\n                    fontSize: 40,\n                    fontWeight: 900,\n                    lineHeight: '56px',\n                    width: '100%',\n                    textAlign: 'center',\n                    display: 'block',\n                    userSelect: 'none',\n                    letterSpacing: 2\n                  }}>√ó</span>\n                </button>\n                <h3 style={{ marginBottom: 10 }}>{place}</h3>\n                {loadingCoords ? (\n                  <div style={{ textAlign: 'center', padding: 40 }}>\n                    <span>{t('dogDetails.loadingMap') || 'Loading map...'}</span>\n                  </div>\n                ) : coords ? (\n                  <iframe\n                    title=\"Map Preview\"\n                    width=\"100%\"\n                    height=\"400\"\n                    style={{ border: 0, borderRadius: 8 }}\n                    src={`https://www.openstreetmap.org/export/embed.html?bbox=${coords.lng-0.005},${coords.lat-0.005},${coords.lng+0.005},${coords.lat+0.005}&layer=mapnik&marker=${coords.lat},${coords.lng}`}\n                    allowFullScreen\n                  />\n                ) : coordsError ? (\n                  <div style={{ color: 'red', textAlign: 'center', padding: 40 }}>{coordsError}</div>\n                ) : null}\n              </div>\n            </div>\n          )}\n        {owner && (\n            <div style={{ marginTop: '1rem', paddingTop: '1rem', borderTop: '1px solid #ddd' }}>\n              <p className=\"meta\" style={{ marginBottom: '0.5rem' }}>\n                <strong>{t('fields.postedBy') || 'Posted by'}:</strong> {owner.name}\n                {createdAt && (\n                  <span style={{ marginLeft: 8, color: '#888', fontSize: '11px' }}>\n                    ‚Ä¢ {new Date(createdAt).toLocaleDateString(undefined, { year: 'numeric', month: 'short', day: 'numeric' })}\n                  </span>\n                )}\n              </p>\n              {owner.person && (\n                <p className=\"meta\" style={{ marginBottom: '0.5rem' }}>\n                  <strong>{t('fields.userType') || 'Type'}:</strong> {t(`registerOptions.${owner.person}`) || owner.person}\n                </p>\n              )}\n              {/* Phone and email hidden in dog list */}\n            </div>\n          )}\n          \n          <div className=\"card-actions\" style={{\n            display: 'flex',\n            flexWrap: 'wrap',\n            gap: '4px',\n            marginTop: '6px',\n            width: '100%',\n            rowGap: '4px',\n            columnGap: '4px',\n            minHeight: '24px',\n            boxSizing: 'border-box',\n            overflow: 'hidden'\n          }}>\n            <button \n              className=\"details\"\n              onClick={onViewDetails}\n              style={{\n                padding: '2px 7px',\n                border: 'none',\n                borderRadius: '10px',\n                background: '#2196F3', // app main color\n                color: 'white',\n                fontSize: '10px',\n                fontWeight: 500,\n                whiteSpace: 'nowrap',\n                minWidth: 'fit-content',\n                boxShadow: '0 1px 4px rgba(33,150,243,0.08)'\n              }}\n            >\n              {t('button.viewDetails')}\n            </button>\n            {isAuthenticated && _id && adoptionStatusState !== 'adopted' && (\n              <>\n                {/* ADOPT/ODUSTANI LOGIKA (simplified for list) */}\n                {adoptionStatusState === 'pending' && adoptionQueueState && currentUser ? (\n                  adoptionQueueState.adopter === currentUser._id ? (\n                    <button\n                      id=\"adopt\"\n                      className=\"details adopt-btn\"\n                      disabled\n                    >\n                      {t('button.requested') || 'Requested'}\n                    </button>\n                  ) : isOwner ? (\n                    adoptionQueueState.ownerConfirmed ? (\n                      <button className=\"details\" disabled>\n                        {t('button.waiting') || 'Waiting for adopter confirmation'}\n                      </button>\n                    ) : null\n                  ) : (\n                    <button\n                      id=\"adopt\"\n                      className=\"details\"\n                      onClick={handleAdopt}\n                      disabled={adoptLoading}\n                      style={{\n                        background: '#267822',\n                        border: 'none',\n                        borderRadius: '10px',\n                        color: 'white',\n                        fontSize: '10px',\n                        fontWeight: 500\n                      }}\n                    >\n                      {adoptLoading\n                        ? t('button.sending') || 'Slanje...'\n                        : t('button.adopt')}\n                    </button>\n                  )\n                ) : (\n                  <button\n                    id=\"adopt\"\n                    className=\"details\"\n                    onClick={handleAdopt}\n                    disabled={adoptLoading || adoptionStatusState === 'adopted'}\n                    style={{\n                      background: '#267822',\n                      border: 'none',\n                      borderRadius: '10px',\n                      color: 'white',\n                      fontSize: '10px',\n                      fontWeight: 500\n                    }}\n                  >\n                    {adoptLoading\n                      ? t('button.sending') || 'Slanje...'\n                      : t('button.adopt')}\n                  </button>\n                )}\n                {adoptError && <div style={{ color: 'red', marginTop: 4, fontSize: '10px' }}>{adoptError}</div>}\n                <button \n                  className={`like ${isLiked ? 'liked' : ''}`}\n                  onClick={async () => {\n                    if (!isAuthenticated || !_id) return;\n                    if (isLiked) {\n                      // Optimistically update UI\n                      setIsLiked(false);\n                      setLikesCount(prev => Math.max(0, prev - 1));\n                      try {\n                        const response = await fetch(`${apiBase}/api/dogs/${_id}/unlike`, {\n                          method: 'POST',\n                          headers: {\n                            'Authorization': `Bearer ${token}`\n                          }\n                        });\n                        if (response.ok) {\n                          const data = await response.json();\n                          setLikesCount(data.likesCount);\n                        }\n                      } catch (error) {\n                        console.error('Unlike error:', error);\n                      }\n                    } else {\n                      // Optimistically update UI\n                      setIsLiked(true);\n                      setLikesCount(prev => prev + 1);\n                      try {\n                        const response = await fetch(`${apiBase}/api/dogs/${_id}/like`, {\n                          method: 'POST',\n                          headers: {\n                            'Authorization': `Bearer ${token}`\n                          }\n                        });\n                        if (response.ok) {\n                          const data = await response.json();\n                          setLikesCount(data.likesCount);\n                        }\n                      } catch (error) {\n                        console.error('Like error:', error);\n                      }\n                    }\n                  }}\n                >\n                  üëç {likesCount}\n                </button>\n                <button \n                  className={`wishlist ${inWishlist ? 'in-wishlist' : ''}`}\n                  onClick={() => {\n                    // eslint-disable-next-line no-console\n                      // Removed debug log for addToList and removeFromList\n                    handleWishlistToggle();\n                  }}\n\n                  title={inWishlist ? t('button.removeFromList') : t('button.addToList')}\n                >\n                  {(() => {\n                    const addToList = t('button.addToList');\n                    const removeFromList = t('button.removeFromList');\n                    // eslint-disable-next-line no-console\n                    return inWishlist ? 'üíî ' + removeFromList : '‚ù§Ô∏è ' + addToList;\n                  })()}\n                </button>\n              </>\n            )}\n            {!isAuthenticated && _id && (\n              <div style={{ fontSize: '12px', color: '#666', display: 'flex', alignItems: 'center', gap: '4px' }}>\n                üëç {likesCount}\n              </div>\n            )}\n            {canEdit && onEdit && (\n              <button\n                className=\"edit\"\n                onClick={onEdit}\n                title={t('button.edit') || 'Edit'}\n\n              >\n                {t('button.edit') || 'Edit'}\n              </button>\n            )}\n            {canEdit && onRemove && (\n              <button\n                className=\"remove\"\n                onClick={onRemove}\n                title={t('button.remove') || 'Remove'}\n\n              >\n                {t('button.remove') || 'Remove'}\n              </button>\n            )}\n          </div>\n        </div>\n      </div>\n\n  );\n};\n\nexport default CardSmall;\n\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}