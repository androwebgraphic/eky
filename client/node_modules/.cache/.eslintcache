[{"/Applications/MAMP/htdocs/eky/client/src/index.js":"1","/Applications/MAMP/htdocs/eky/client/src/i18n.js":"2","/Applications/MAMP/htdocs/eky/client/src/App.js":"3","/Applications/MAMP/htdocs/eky/client/src/components/Header.js":"4","/Applications/MAMP/htdocs/eky/client/src/components/Navbar.js":"5","/Applications/MAMP/htdocs/eky/client/src/components/Footer.js":"6","/Applications/MAMP/htdocs/eky/client/src/components/ErrorBoundary.tsx":"7","/Applications/MAMP/htdocs/eky/client/src/components/Header.tsx":"8","/Applications/MAMP/htdocs/eky/client/src/components/Navbar.tsx":"9","/Applications/MAMP/htdocs/eky/client/src/components/Footer.tsx":"10","/Applications/MAMP/htdocs/eky/client/src/components/LanguageSelector.js":"11","/Applications/MAMP/htdocs/eky/client/src/components/pages/DogList.js":"12","/Applications/MAMP/htdocs/eky/client/src/components/pages/RegisterForm.js":"13","/Applications/MAMP/htdocs/eky/client/src/components/pages/About.js":"14","/Applications/MAMP/htdocs/eky/client/src/components/pages/AdddogForm.js":"15","/Applications/MAMP/htdocs/eky/client/src/components/pages/LoginForm.js":"16","/Applications/MAMP/htdocs/eky/client/src/components/LanguageSelector.tsx":"17","/Applications/MAMP/htdocs/eky/client/src/components/pages/About.tsx":"18","/Applications/MAMP/htdocs/eky/client/src/components/pages/DogList.tsx":"19","/Applications/MAMP/htdocs/eky/client/src/components/pages/LoginForm.tsx":"20","/Applications/MAMP/htdocs/eky/client/src/components/pages/AdddogForm.tsx":"21","/Applications/MAMP/htdocs/eky/client/src/components/pages/RegisterForm.tsx":"22","/Applications/MAMP/htdocs/eky/client/src/components/Heading.js":"23","/Applications/MAMP/htdocs/eky/client/src/components/Welcome.js":"24","/Applications/MAMP/htdocs/eky/client/src/components/Button.js":"25","/Applications/MAMP/htdocs/eky/client/src/components/Search.js":"26","/Applications/MAMP/htdocs/eky/client/src/components/CardSmall.js":"27","/Applications/MAMP/htdocs/eky/client/src/components/pages/DogDetails.js":"28","/Applications/MAMP/htdocs/eky/client/src/components/pages/EditDogModal.tsx":"29","/Applications/MAMP/htdocs/eky/client/src/components/Heading.tsx":"30","/Applications/MAMP/htdocs/eky/client/src/components/Welcome.tsx":"31","/Applications/MAMP/htdocs/eky/client/src/components/Search.tsx":"32","/Applications/MAMP/htdocs/eky/client/src/components/Button.tsx":"33","/Applications/MAMP/htdocs/eky/client/src/components/CardSmall.tsx":"34","/Applications/MAMP/htdocs/eky/client/src/components/pages/DogDetails.tsx":"35","/Applications/MAMP/htdocs/eky/client/src/contexts/AuthContext.tsx":"36","/Applications/MAMP/htdocs/eky/client/src/components/UserProfileModal.tsx":"37","/Applications/MAMP/htdocs/eky/client/src/components/pages/AuthCallback.tsx":"38","/Applications/MAMP/htdocs/eky/client/src/components/TermsModal.tsx":"39","/Applications/MAMP/htdocs/eky/client/src/components/ChatApp.tsx":"40"},{"size":378,"mtime":1768341393361,"results":"41","hashOfConfig":"42"},{"size":939,"mtime":1768312968899,"results":"43","hashOfConfig":"42"},{"size":1318,"mtime":1768343570757,"results":"44","hashOfConfig":"42"},{"size":86,"mtime":1767606849569,"results":"45","hashOfConfig":"42"},{"size":114,"mtime":1767606324771,"results":"46","hashOfConfig":"42"},{"size":104,"mtime":1767606350657,"results":"47","hashOfConfig":"42"},{"size":814,"mtime":1768337243687,"results":"48","hashOfConfig":"42"},{"size":10505,"mtime":1768245328009,"results":"49","hashOfConfig":"42"},{"size":866,"mtime":1768089692241,"results":"50","hashOfConfig":"42"},{"size":13080,"mtime":1768341361504,"results":"51","hashOfConfig":"42"},{"size":116,"mtime":1767606324771,"results":"52","hashOfConfig":"42"},{"size":87,"mtime":1767606324771,"results":"53","hashOfConfig":"42"},{"size":242,"mtime":1767606636723,"results":"54","hashOfConfig":"42"},{"size":85,"mtime":1767606849558,"results":"55","hashOfConfig":"42"},{"size":89,"mtime":1767606681896,"results":"56","hashOfConfig":"42"},{"size":125,"mtime":1767606462515,"results":"57","hashOfConfig":"42"},{"size":1059,"mtime":1768312968899,"results":"58","hashOfConfig":"42"},{"size":654,"mtime":1768087633748,"results":"59","hashOfConfig":"42"},{"size":14616,"mtime":1768220293293,"results":"60","hashOfConfig":"42"},{"size":4219,"mtime":1768308163774,"results":"61","hashOfConfig":"42"},{"size":15966,"mtime":1768308163774,"results":"62","hashOfConfig":"42"},{"size":6774,"mtime":1768308163774,"results":"63","hashOfConfig":"42"},{"size":106,"mtime":1767606324771,"results":"64","hashOfConfig":"42"},{"size":106,"mtime":1767606324778,"results":"65","hashOfConfig":"42"},{"size":105,"mtime":1767606324782,"results":"66","hashOfConfig":"42"},{"size":104,"mtime":1767606324771,"results":"67","hashOfConfig":"42"},{"size":107,"mtime":1767606333173,"results":"68","hashOfConfig":"42"},{"size":89,"mtime":1767606849559,"results":"69","hashOfConfig":"42"},{"size":23975,"mtime":1768308262473,"results":"70","hashOfConfig":"42"},{"size":395,"mtime":1768053955512,"results":"71","hashOfConfig":"42"},{"size":307,"mtime":1767902322769,"results":"72","hashOfConfig":"42"},{"size":5648,"mtime":1767979200936,"results":"73","hashOfConfig":"42"},{"size":392,"mtime":1767521078404,"results":"74","hashOfConfig":"42"},{"size":19282,"mtime":1768316613676,"results":"75","hashOfConfig":"42"},{"size":15371,"mtime":1768313201389,"results":"76","hashOfConfig":"42"},{"size":8317,"mtime":1768086996024,"results":"77","hashOfConfig":"42"},{"size":28363,"mtime":1768337213160,"results":"78","hashOfConfig":"42"},{"size":876,"mtime":1768307811036,"results":"79","hashOfConfig":"42"},{"size":928,"mtime":1768237104839,"results":"80","hashOfConfig":"42"},{"size":15830,"mtime":1768347229747,"results":"81","hashOfConfig":"42"},{"filePath":"82","messages":"83","suppressedMessages":"84","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"mipkny",{"filePath":"85","messages":"86","suppressedMessages":"87","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},{"filePath":"89","messages":"90","suppressedMessages":"91","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"92","messages":"93","suppressedMessages":"94","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},{"filePath":"95","messages":"96","suppressedMessages":"97","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},{"filePath":"98","messages":"99","suppressedMessages":"100","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},{"filePath":"101","messages":"102","suppressedMessages":"103","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"104","messages":"105","suppressedMessages":"106","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"107"},{"filePath":"108","messages":"109","suppressedMessages":"110","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"107"},{"filePath":"111","messages":"112","suppressedMessages":"113","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"114","messages":"115","suppressedMessages":"116","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},{"filePath":"117","messages":"118","suppressedMessages":"119","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},{"filePath":"120","messages":"121","suppressedMessages":"122","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},{"filePath":"123","messages":"124","suppressedMessages":"125","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},{"filePath":"126","messages":"127","suppressedMessages":"128","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},{"filePath":"129","messages":"130","suppressedMessages":"131","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},{"filePath":"132","messages":"133","suppressedMessages":"134","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"107"},{"filePath":"135","messages":"136","suppressedMessages":"137","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"107"},{"filePath":"138","messages":"139","suppressedMessages":"140","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"141","usedDeprecatedRules":"107"},{"filePath":"142","messages":"143","suppressedMessages":"144","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"145","usedDeprecatedRules":"107"},{"filePath":"146","messages":"147","suppressedMessages":"148","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"107"},{"filePath":"149","messages":"150","suppressedMessages":"151","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"152","usedDeprecatedRules":"107"},{"filePath":"153","messages":"154","suppressedMessages":"155","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"156"},{"filePath":"157","messages":"158","suppressedMessages":"159","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},{"filePath":"160","messages":"161","suppressedMessages":"162","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},{"filePath":"163","messages":"164","suppressedMessages":"165","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},{"filePath":"166","messages":"167","suppressedMessages":"168","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},{"filePath":"169","messages":"170","suppressedMessages":"171","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},{"filePath":"172","messages":"173","suppressedMessages":"174","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"107"},{"filePath":"175","messages":"176","suppressedMessages":"177","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"178","messages":"179","suppressedMessages":"180","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"107"},{"filePath":"181","messages":"182","suppressedMessages":"183","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"107"},{"filePath":"184","messages":"185","suppressedMessages":"186","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"107"},{"filePath":"187","messages":"188","suppressedMessages":"189","errorCount":0,"fatalErrorCount":0,"warningCount":16,"fixableErrorCount":0,"fixableWarningCount":0,"source":"190","usedDeprecatedRules":"107"},{"filePath":"191","messages":"192","suppressedMessages":"193","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"107"},{"filePath":"194","messages":"195","suppressedMessages":"196","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"107"},{"filePath":"197","messages":"198","suppressedMessages":"199","errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"200","messages":"201","suppressedMessages":"202","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"107"},{"filePath":"203","messages":"204","suppressedMessages":"205","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"107"},{"filePath":"206","messages":"207","suppressedMessages":"208","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},"/Applications/MAMP/htdocs/eky/client/src/index.js",[],[],"/Applications/MAMP/htdocs/eky/client/src/i18n.js",[],[],[],"/Applications/MAMP/htdocs/eky/client/src/App.js",[],[],"/Applications/MAMP/htdocs/eky/client/src/components/Header.js",[],[],"/Applications/MAMP/htdocs/eky/client/src/components/Navbar.js",[],[],"/Applications/MAMP/htdocs/eky/client/src/components/Footer.js",[],[],"/Applications/MAMP/htdocs/eky/client/src/components/ErrorBoundary.tsx",[],[],"/Applications/MAMP/htdocs/eky/client/src/components/Header.tsx",[],[],[],"/Applications/MAMP/htdocs/eky/client/src/components/Navbar.tsx",[],[],"/Applications/MAMP/htdocs/eky/client/src/components/Footer.tsx",[],[],"/Applications/MAMP/htdocs/eky/client/src/components/LanguageSelector.js",[],[],"/Applications/MAMP/htdocs/eky/client/src/components/pages/DogList.js",[],[],"/Applications/MAMP/htdocs/eky/client/src/components/pages/RegisterForm.js",[],[],"/Applications/MAMP/htdocs/eky/client/src/components/pages/About.js",[],[],"/Applications/MAMP/htdocs/eky/client/src/components/pages/AdddogForm.js",[],[],"/Applications/MAMP/htdocs/eky/client/src/components/pages/LoginForm.js",[],[],"/Applications/MAMP/htdocs/eky/client/src/components/LanguageSelector.tsx",[],[],"/Applications/MAMP/htdocs/eky/client/src/components/pages/About.tsx",[],[],"/Applications/MAMP/htdocs/eky/client/src/components/pages/DogList.tsx",["209","210"],[],"import React, { useState, useEffect } from 'react';\nimport { createPortal } from 'react-dom';\nimport { useSearchParams } from 'react-router-dom';\nimport EditDogModal from './EditDogModal';\nimport Search from '../Search';\nimport CardSmall from '../CardSmall';\nimport DogDetails from './DogDetails';\nimport { useTranslation } from 'react-i18next';\nimport { useAuth } from '../../contexts/AuthContext';\n\ninterface Dog {\n  _id: string;\n  name: string;\n  breed?: string;\n  age?: number;\n  images?: any[];\n  video?: any;\n  thumbnail?: any;\n  color?: string;\n  place?: string;\n  description?: string;\n  size?: string;\n  gender?: 'male' | 'female';\n  vaccinated?: boolean;\n  neutered?: boolean;\n  location?: string;\n  likes?: string[];\n  user?: { \n    _id: string; \n    name: string; \n    username: string;\n    email?: string;\n    phone?: string;\n    person?: 'private' | 'organization';\n  };\n}\n\nconst DogList: React.FC = () => {\n  const { t } = useTranslation();\n  const { user, token, isAuthenticated } = useAuth();\n  const [searchParams, setSearchParams] = useSearchParams();\n  const [dogs, setDogs] = useState<Dog[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [selectedDog, setSelectedDog] = useState<Dog | null>(null);\n  const [editDog, setEditDog] = useState<Dog | null>(null);\n  const [modalPosition, setModalPosition] = useState<{x: number, y: number} | null>(null);\n  \n  // Search filters - initialize from URL parameters\n  const [searchTerm, setSearchTerm] = useState(searchParams.get('search') || '');\n  const [genderFilter, setGenderFilter] = useState(searchParams.get('gender') || '');\n  const [sizeFilter, setSizeFilter] = useState(searchParams.get('size') || '');\n  const [locationFilter, setLocationFilter] = useState('');\n  \n  // Get unique locations for dropdown\n  const availableLocations = Array.from(new Set(\n    dogs.map(dog => dog.location || dog.place)\n      .filter(Boolean)\n      .sort()\n  ));\n  \n  // Update URL parameters when search filters change\n  useEffect(() => {\n    const params = new URLSearchParams();\n    if (searchTerm) params.set('search', searchTerm);\n    if (genderFilter) params.set('gender', genderFilter);\n    if (sizeFilter) params.set('size', sizeFilter);\n    \n    // Only update URL if params have changed\n    if (params.toString() !== searchParams.toString()) {\n      setSearchParams(params);\n    }\n  }, [searchTerm, genderFilter, sizeFilter, setSearchParams]);\n\n  // Listen for URL parameter changes (e.g., from search modal)\n  useEffect(() => {\n    const search = searchParams.get('search') || '';\n    const gender = searchParams.get('gender') || '';\n    const size = searchParams.get('size') || '';\n    \n    if (search !== searchTerm) setSearchTerm(search);\n    if (gender !== genderFilter) setGenderFilter(gender);\n    if (size !== sizeFilter) setSizeFilter(size);\n  }, [searchParams]);\n  \n  // Filter dogs based on search criteria\n  const filteredDogs = dogs.filter(dog => {\n    if (!searchTerm && !genderFilter && !sizeFilter && !locationFilter) {\n      return true; // No filters applied, show all dogs\n    }\n    \n    const matchesSearch = !searchTerm || \n      (dog.name && dog.name.toLowerCase().includes(searchTerm.toLowerCase())) ||\n      (dog.breed && dog.breed.toLowerCase().includes(searchTerm.toLowerCase())) ||\n      (dog.location && dog.location.toLowerCase().includes(searchTerm.toLowerCase())) ||\n      (dog.place && dog.place.toLowerCase().includes(searchTerm.toLowerCase()));\n    \n    const matchesGender = !genderFilter || dog.gender === genderFilter;\n    const matchesSize = !sizeFilter || dog.size === sizeFilter;\n    const matchesLocation = !locationFilter || \n      dog.location === locationFilter || dog.place === locationFilter;\n    \n    return matchesSearch && matchesGender && matchesSize && matchesLocation;\n  });\n  \n  // Debug logging to help identify the issue\n  console.log('üêï DogList render - Auth state:');\n  console.log('  - isAuthenticated:', isAuthenticated);\n  console.log('  - hasUser:', !!user);\n  console.log('  - userId:', user?._id);\n  console.log('  - userName:', user?.name);\n  console.log('  - hasToken:', !!token);\n  \n  console.log('üîç Search - totalDogs:', dogs.length, 'filteredDogs:', filteredDogs.length);\n\n  // Add/remove modal-open class when modal state changes\n  useEffect(() => {\n    if (selectedDog || editDog) {\n      document.body.classList.add('modal-open');\n    } else {\n      document.body.classList.remove('modal-open');\n    }\n    \n    // Cleanup on unmount\n    return () => {\n      document.body.classList.remove('modal-open');\n    };\n  }, [selectedDog, editDog]);\n\n  useEffect(() => {\n    const getApiUrl = () => {\n      if (process.env.REACT_APP_API_URL) return process.env.REACT_APP_API_URL;\n      if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {\n        return `http://${window.location.hostname}:3001`;\n      }\n      return `http://${window.location.hostname}:3001`;\n    };\n    const API_URL = getApiUrl();\n    let mounted = true;\n\n    (async () => {\n      setLoading(true);\n      setError(null);\n      try {\n        const headers: any = { 'Content-Type': 'application/json' };\n        if (token) {\n          headers['Authorization'] = `Bearer ${token}`;\n        }\n        const res = await fetch(`${API_URL}/api/dogs`, { \n          cache: 'no-store',\n          headers \n        });\n        if (!res.ok) {\n          const txt = await res.text();\n          throw new Error(txt || `Request failed (${res.status})`);\n        }\n        const data = await res.json();\n        if (mounted) setDogs(data);\n      } catch (err: any) {\n        console.error('Failed to fetch dogs', err);\n        if (mounted) setError(err.message || t('doglist.failedToLoad'));\n      } finally {\n        if (mounted) setLoading(false);\n      }\n    })();\n\n    return () => { mounted = false; };\n  }, [token, t]);\n\n  return (\n    <main>\n      <h2>{t('doglist.title')}</h2>\n      <Search \n        searchTerm={searchTerm}\n        onSearchChange={setSearchTerm}\n        genderFilter={genderFilter}\n        onGenderChange={setGenderFilter}\n        sizeFilter={sizeFilter}\n        onSizeChange={setSizeFilter}\n        locationFilter={locationFilter}\n        onLocationChange={setLocationFilter}\n        availableLocations={availableLocations}\n      />\n\n      {loading && <p className=\"log\">{t('doglist.loading')}</p>}\n      {error && <p className=\"error\">{error}</p>}\n\n      {!loading && !error && dogs.length === 0 && (\n        <div className=\"empty\">\n          <p>{t('doglist.empty')}</p>\n          <p>\n            <a href=\"/dodajpsa\">{t('doglist.addFirst')}</a>\n          </p>\n        </div>\n      )}\n\n      {!loading && !error && dogs.length > 0 && filteredDogs.length === 0 && (\n        <div className=\"empty\">\n          <p>{t('search.noResults')}</p>\n        </div>\n      )}\n\n      <div id=\"Doglist\">\n\n        {!loading && !error && filteredDogs.map(d => {\n          // Extract dog owner ID (handle both string and object, and _id vs id)\n          let dogOwnerId;\n          if (typeof (d.user as any) === 'string') {\n            dogOwnerId = d.user as any;\n          } else if (d.user) {\n            // Try _id first, then id\n            dogOwnerId = (d.user as any)._id || (d.user as any).id;\n          }\n          \n          // Extract current user ID\n          const currentUserId = user?._id;\n          \n          // Check if user is superadmin\n          const isSuperAdmin = user?.role === 'superadmin';\n          \n          // Compare as strings to avoid type mismatches\n          const isOwner = Boolean(\n            currentUserId && \n            dogOwnerId && \n            String(currentUserId) === String(dogOwnerId)\n          );\n          \n          // User can edit if they're the owner OR if they're a superadmin\n          const canEdit = Boolean(isAuthenticated && (isOwner || isSuperAdmin));\n          \n          return (\n          <CardSmall\n            key={d._id}\n            _id={d._id}\n            name={d.name}\n            breed={d.breed}\n            age={d.age}\n            likes={d.likes || []}\n            images={d.images}\n            video={d.video}\n            thumbnail={d.thumbnail}\n            color={d.color}\n            place={d.place || d.location}\n            description={d.description}\n            size={d.size}\n            gender={d.gender}\n            vaccinated={d.vaccinated}\n            neutered={d.neutered}\n            user={d.user}\n            canEdit={canEdit}\n            onViewDetails={(event) => {\n              const rect = event.currentTarget.getBoundingClientRect();\n              setModalPosition({\n                x: rect.left + rect.width / 2,\n                y: rect.top + rect.height / 2\n              });\n              setSelectedDog(d);\n            }}\n            onEdit={(event) => {\n              const rect = event.currentTarget.getBoundingClientRect();\n              setModalPosition({\n                x: rect.left + rect.width / 2,\n                y: rect.top + rect.height / 2\n              });\n              handleEditDog(d);\n            }}\n            onRemove={() => handleRemoveDog(d)}\n          />\n        );\n        })}\n      </div>\n\n      {selectedDog && modalPosition && createPortal(\n        <div \n          style={{\n            position: 'fixed',\n            top: 0,\n            left: 0,\n            width: '100vw',\n            height: '100vh',\n            backgroundColor: 'rgba(0, 0, 0, 0.8)',\n            zIndex: 2147483647,\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            padding: '2rem',\n            boxSizing: 'border-box'\n          }}\n          onClick={() => {\n            setSelectedDog(null);\n            setModalPosition(null);\n          }}\n        >\n          <div \n            style={{\n              backgroundColor: 'white',\n              borderRadius: '12px',\n              padding: '2rem',\n              maxWidth: '90vw',\n              maxHeight: '90vh',\n              overflowY: 'auto',\n              position: 'relative',\n              zIndex: 2147483647,\n              boxShadow: '0 20px 60px rgba(0,0,0,0.5)'\n            }}\n            onClick={e => e.stopPropagation()}\n          >\n            <button\n              style={{\n                position: 'absolute',\n                top: 15,\n                right: 15,\n                width: 56,\n                height: 56,\n                backgroundColor: '#e74c3c',\n                color: '#fff',\n                border: 'none',\n                borderRadius: '50%',\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'center',\n                boxShadow: '0 4px 12px rgba(0,0,0,0.3)',\n                cursor: 'pointer',\n                zIndex: 2147483647,\n                padding: 0\n              }}\n              onClick={() => {\n                setSelectedDog(null);\n                setModalPosition(null);\n              }}\n              title={t('common.close')}\n              aria-label={t('common.close')}\n            >\n              <span style={{\n                fontSize: 40,\n                fontWeight: 900,\n                lineHeight: '56px',\n                width: '100%',\n                textAlign: 'center',\n                display: 'block',\n                userSelect: 'none',\n                letterSpacing: 2\n              }}>\n                √ó\n              </span>\n            </button>\n            <DogDetails {...selectedDog} onClose={() => {\n              setSelectedDog(null);\n              setModalPosition(null);\n            }} />\n          </div>\n        </div>,\n        document.body\n      )}\n\n      {editDog && modalPosition && createPortal(\n        <EditDogModal\n          dog={editDog}\n          onClose={() => {\n            setEditDog(null);\n            setModalPosition(null);\n          }}\n          onSave={handleSaveEditDog}\n          modalPosition={modalPosition}\n        />,\n        document.body\n      )}\n    </main>\n  );\n\n  // Handler for editing a dog\n  function handleEditDog(dog: Dog) {\n    setEditDog(dog);\n  }\n\n  // Handler for saving an edited dog\n  function handleSaveEditDog(updatedDog: Dog) {\n    setDogs(dogs => dogs.map(d => d._id === updatedDog._id ? updatedDog : d));\n  }\n\n  // Handler for removing a dog\n  async function handleRemoveDog(dog: Dog) {\n    if (!window.confirm(t('doglist.confirmRemove', { name: dog.name }))) return;\n    try {\n      // Debug auth context values\n      console.log('Delete request - Auth context values:', {\n        user: user,\n        token: token,\n        isAuthenticated: isAuthenticated,\n        localStorageToken: localStorage.getItem('token'),\n        localStorageUser: localStorage.getItem('user')\n      });\n      \n      const getApiUrl = () => {\n        if (process.env.REACT_APP_API_URL) return process.env.REACT_APP_API_URL;\n        if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {\n          return `http://${window.location.hostname}:3001`;\n        }\n        return `http://${window.location.hostname}:3001`;\n      };\n      const API_URL = getApiUrl();\n      \n      const headers: any = {\n        'Content-Type': 'application/json'\n      };\n      \n      if (token) {\n        headers['Authorization'] = `Bearer ${token}`;\n        console.log('Delete request - Using token:', token.substring(0, 20) + '...');\n      } else {\n        console.error('Delete request - No token available!');\n      }\n      \n      console.log('Delete request details:', {\n        url: `${API_URL}/api/dogs/${dog._id}`,\n        method: 'DELETE',\n        headers,\n        dogId: dog._id,\n        dogName: dog.name\n      });\n      \n      const resp = await fetch(`${API_URL}/api/dogs/${dog._id}`, { \n        method: 'DELETE',\n        headers \n      });\n      \n      console.log('Delete response status:', resp.status);\n      if (!resp.ok) {\n        const errorText = await resp.text();\n        console.error('Delete failed:', resp.status, errorText);\n        throw new Error(`${resp.status}: ${errorText}`);\n      }\n      \n      console.log('Delete successful, removing from UI');\n      setDogs(dogs => dogs.filter(d => d._id !== dog._id));\n      // Close modals if open for this dog\n      setEditDog(editDog => (editDog && editDog._id === dog._id ? null : editDog));\n      setSelectedDog(selectedDog => (selectedDog && selectedDog._id === dog._id ? null : selectedDog));\n    } catch (err: any) {\n      console.error('Delete error details:', err);\n      alert(err.message || t('doglist.failedToRemove'));\n    }\n  }\n\n};\n\nexport default DogList;\n","/Applications/MAMP/htdocs/eky/client/src/components/pages/LoginForm.tsx",["211"],[],"import React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useForm, SubmitHandler } from 'react-hook-form';\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport * as yup from 'yup';\nimport { useTranslation } from 'react-i18next';\nimport { useAuth } from '../../contexts/AuthContext';\n\ninterface LoginFormData {\n  email: string;\n  password: string;\n  remember?: boolean;\n}\n\nconst LoginForm: React.FC = () => {\n  const { t } = useTranslation();\n  const navigate = useNavigate();\n  const { login } = useAuth();\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [loginError, setLoginError] = useState<string>('');\n\n  const getApiUrl = () => {\n    if (process.env.REACT_APP_API_URL) return process.env.REACT_APP_API_URL;\n    if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {\n      return `http://${window.location.hostname}:3001`;\n    }\n    return `http://172.20.10.2:3001`;\n  };\n\n  // ...removed social login handler...\n\n  const schema = yup.object().shape({\n    email: yup.string().email(t('validation.emailInvalid')).required(t('validation.emailRequired')),\n    password: yup\n      .string()\n      .min(4, t('validation.passwordMin', { min: 4 }))\n      .max(20)\n      .required(t('validation.passwordRequired')),\n  });\n\n  const {\n    register,\n    handleSubmit,\n    formState: { errors },\n  } = useForm<LoginFormData>({\n    resolver: yupResolver(schema),\n  });\n\n  const onSubmit: SubmitHandler<LoginFormData> = async (data) => {\n    console.log('üîê LOGIN ATTEMPT:', data.email);\n    setIsSubmitting(true);\n    setLoginError('');\n    \n    try {\n      const result = await login(data.email, data.password);\n      console.log('üîê LOGIN RESULT:', result);\n      \n      if (result.success) {\n        console.log('‚úÖ Login successful, navigating to home');\n        navigate('/');\n      } else {\n        console.log('‚ùå Login failed:', result.error);\n        setLoginError(result.error || 'Login failed');\n      }\n    } catch (error) {\n      console.error('‚ùå LOGIN ERROR:', error);\n      setLoginError('Network error. Please check your connection and try again.');\n    } finally {\n      console.log('üîê Setting isSubmitting to false');\n      setIsSubmitting(false);\n    }\n  };\n\n  return (\n    <main>\n      <h2>{t('login.title')}</h2>\n      <form id=\"login-form\" onSubmit={handleSubmit(onSubmit)}>\n        {loginError && (\n          <div className=\"error\" style={{ marginBottom: '1rem', padding: '0.5rem', backgroundColor: '#ffebee', border: '1px solid #e57373', borderRadius: '4px' }}>\n            {loginError}\n          </div>\n        )}\n        \n        <label htmlFor=\"login-email\">{t('register.email')}</label>\n        <input type=\"email\" id=\"login-email\" name=\"email\" autoComplete=\"email\" placeholder={t('register.email')} {...register('email')} />\n        <p className=\"error\">{errors.email?.message as string}</p>\n\n        <label htmlFor=\"login-password\">{t('register.password')}</label>\n        <input type=\"password\" id=\"login-password\" name=\"password\" autoComplete=\"current-password\" placeholder={t('register.password')} {...register('password')} />\n        <p className=\"error\">{errors.password?.message as string}</p>\n\n        <button id=\"login\" className=\"details\" type=\"submit\" disabled={isSubmitting}>\n          {isSubmitting ? (t('button.submitting') || 'Submitting...') : (t('button.login') || 'Login')}\n        </button>\n        \n        {/* Debug button - Remove after testing */}\n        <button \n          type=\"button\" \n          onClick={() => {\n            console.log('üîç DEBUG: Current state - isSubmitting:', isSubmitting, 'loginError:', loginError);\n            setIsSubmitting(false); // Force reset\n          }}\n          style={{ marginLeft: '10px', backgroundColor: '#ff9800', color: 'white', padding: '5px 10px', border: 'none', borderRadius: '4px' }}\n        >\n          Reset Button\n        </button>\n      </form>\n\n      <p>\n        {t('login.remember')} <input type=\"checkbox\" id=\"login-remember\" name=\"remember\" autoComplete=\"off\" {...register('remember')} />\n      </p>\n      {/* ...removed alternative social login... */}\n    </main>\n  );\n};\n\nexport default LoginForm;\n","/Applications/MAMP/htdocs/eky/client/src/components/pages/AdddogForm.tsx",[],[],"/Applications/MAMP/htdocs/eky/client/src/components/pages/RegisterForm.tsx",["212"],[],"import React, { useState } from 'react';\nimport TermsModal from '../TermsModal';\nimport { useNavigate } from 'react-router-dom';\nimport { useForm, SubmitHandler } from 'react-hook-form';\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport * as yup from 'yup';\nimport { useTranslation } from 'react-i18next';\nimport { useAuth } from '../../contexts/AuthContext';\n\ninterface RegisterFormData {\n  person: 'private' | 'organization';\n  name: string;\n  username: string;\n  email: string;\n  phone: string;\n  password: string;\n  passwordAgain: string;\n  remember?: boolean;\n}\n\nconst RegisterForm: React.FC = () => {\n  const { t } = useTranslation();\n  const navigate = useNavigate();\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [submitError, setSubmitError] = useState<string>('');\n  const [showTerms, setShowTerms] = useState(false);\n  const [acceptedTerms, setAcceptedTerms] = useState(false);\n\n  const { register: registerUser } = useAuth();\n\n  const schema = yup.object().shape({\n    name: yup.string().required(t('register.name') + ' ' + t('validation.emailRequired')),\n    email: yup.string().email(t('validation.emailInvalid')).required(t('validation.emailRequired')),\n    username: yup.string().required(t('register.username')),\n    phone: yup.string().required(t('register.phone') + ' ' + t('validation.required')),\n    password: yup.string().min(6, t('validation.passwordMin', { min: 6 })).max(20).required(t('validation.passwordRequired')),\n    passwordAgain: yup.string().oneOf([yup.ref('password'), null], t('register.passwordAgain')).required(t('register.passwordAgain')),\n  });\n\n  const {\n    register,\n    handleSubmit,\n    formState: { errors },\n  } = useForm<RegisterFormData>({\n    resolver: yupResolver(schema),\n  });\n\n  const onSubmit: SubmitHandler<RegisterFormData> = async (data) => {\n    if (!acceptedTerms) {\n      setShowTerms(true);\n      return;\n    }\n    setIsSubmitting(true);\n    setSubmitError('');\n    try {\n      // Remove passwordAgain from data before sending to server\n      const { passwordAgain, remember, ...registrationData } = data;\n      const response = await fetch('http://localhost:3001/api/users/registracija', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(registrationData),\n      });\n      const result = await response.json();\n      if (response.ok) {\n        navigate('/logiranje');\n      } else {\n        setSubmitError(result.message || 'Registration failed');\n      }\n    } catch (error) {\n      setSubmitError('Network error. Please try again.');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  return (\n    <main>\n      <h2>{t('register.register') || t('nav.register')}</h2>\n\n      <form id=\"register-form\" onSubmit={handleSubmit(onSubmit)}>\n        {submitError && (\n          <div className=\"error\" style={{ marginBottom: '1rem', padding: '0.5rem', backgroundColor: '#ffebee', border: '1px solid #e57373', borderRadius: '4px' }}>\n            {submitError}\n          </div>\n        )}\n        \n        <label htmlFor=\"register-person\">{t('register.person')}</label>\n        <select {...register('person')} name=\"person\" id=\"register-person\" autoComplete=\"off\">\n          <option value=\"private\">{t('registerOptions.private')}</option>\n          <option value=\"organization\">{t('registerOptions.organization')}</option>\n        </select>\n\n        <label htmlFor=\"register-name\">{t('register.name')}</label>\n        <input type=\"text\" id=\"register-name\" name=\"name\" autoComplete=\"name\" placeholder={t('register.name')} {...register('name')} />\n        <p className=\"error\">{errors.name?.message as string}</p>\n\n        <label htmlFor=\"register-username\">{t('register.username')}</label>\n        <input type=\"text\" id=\"register-username\" name=\"username\" autoComplete=\"username\" placeholder={t('register.username')} {...register('username')} />\n        <p className=\"error\">{errors.username?.message as string}</p>\n\n        <label htmlFor=\"register-email\">{t('register.email')}</label>\n        <input type=\"email\" id=\"register-email\" name=\"email\" autoComplete=\"email\" placeholder={t('register.email')} {...register('email')} />\n        <p className=\"error\">{errors.email?.message as string}</p>\n\n        <label htmlFor=\"register-phone\">{t('register.phone')}</label>\n        <input type=\"tel\" id=\"register-phone\" name=\"phone\" autoComplete=\"tel\" placeholder={t('register.phone')} {...register('phone')} />\n        <p className=\"error\">{errors.phone?.message as string}</p>\n\n        <label htmlFor=\"register-password\">{t('register.password')}</label>\n        <input type=\"password\" id=\"register-password\" name=\"password\" autoComplete=\"new-password\" placeholder={t('register.password')} {...register('password')} />\n        <p className=\"error\">{errors.password?.message as string}</p>\n\n        <label htmlFor=\"register-passwordAgain\">{t('register.passwordAgain')}</label>\n        <input type=\"password\" id=\"register-passwordAgain\" name=\"passwordAgain\" autoComplete=\"new-password\" placeholder={t('register.passwordAgain')} {...register('passwordAgain')} />\n        <p className=\"error\">{errors.passwordAgain?.message as string}</p>\n\n        <div style={{ margin: '1rem 0' }}>\n          <input\n            type=\"checkbox\"\n            id=\"register-acceptTerms\"\n            name=\"acceptTerms\"\n            checked={acceptedTerms}\n            onChange={e => setAcceptedTerms(e.target.checked)}\n          />\n          <label htmlFor=\"register-acceptTerms\" style={{ marginLeft: 8 }}>\n            <span style={{ cursor: 'pointer', color: '#1976d2', textDecoration: 'underline' }} onClick={e => { e.preventDefault(); setShowTerms(true); }}>\n              {t('terms_of_use_title')}\n            </span>\n            {` ` + t('Accept')}\n          </label>\n        </div>\n        <button type=\"submit\" id=\"register\" className=\"details\" disabled={isSubmitting || !acceptedTerms}>\n          {isSubmitting ? t('button.submitting') || 'Submitting...' : (t('button.register') || 'Register')}\n        </button>\n            <TermsModal\n              open={showTerms}\n              onClose={() => setShowTerms(false)}\n              onAccept={() => {\n                setAcceptedTerms(true);\n                setShowTerms(false);\n              }}\n            />\n      </form>\n      <p>\n        {t('register.remember')} <input type=\"checkbox\" id=\"register-remember\" name=\"remember\" autoComplete=\"off\" {...register('remember')} />\n      </p>\n      <p>\n        <strong>{t('register.already')}</strong>\n      </p>\n      <p className=\"log\" onClick={() => { navigate('/logiranje'); }}>\n        {t('nav.login')}...\n      </p>\n\n      {/* ...removed alternative social register... */}\n    </main>\n  );\n};\n\nexport default RegisterForm;\n","/Applications/MAMP/htdocs/eky/client/src/components/Heading.js",[],[],[],"/Applications/MAMP/htdocs/eky/client/src/components/Welcome.js",[],[],"/Applications/MAMP/htdocs/eky/client/src/components/Button.js",[],[],"/Applications/MAMP/htdocs/eky/client/src/components/Search.js",[],[],"/Applications/MAMP/htdocs/eky/client/src/components/CardSmall.js",[],[],"/Applications/MAMP/htdocs/eky/client/src/components/pages/DogDetails.js",[],[],"/Applications/MAMP/htdocs/eky/client/src/components/pages/EditDogModal.tsx",[],[],"/Applications/MAMP/htdocs/eky/client/src/components/Heading.tsx",[],[],"/Applications/MAMP/htdocs/eky/client/src/components/Welcome.tsx",[],[],"/Applications/MAMP/htdocs/eky/client/src/components/Search.tsx",[],[],"/Applications/MAMP/htdocs/eky/client/src/components/Button.tsx",[],[],"/Applications/MAMP/htdocs/eky/client/src/components/CardSmall.tsx",["213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228"],[],"\nimport React, { useState } from 'react';\nimport { MapContainer, TileLayer, Marker, Popup } from 'react-leaflet';\nimport 'leaflet/dist/leaflet.css';\nimport { useNavigate } from 'react-router-dom';\nimport { useTranslation } from 'react-i18next';\nimport { useAuth } from '../contexts/AuthContext';\n\n// Geocode location if needed (mirrors DogDetails)\n// (handleShowMap will be defined inside the component, after imports)\n\ninterface MediaVariant { url: string; width?: number; size?: string }\ninterface CardSmallProps {\n  _id?: string;\n  imgSrc?: string;\n  images?: MediaVariant[];\n  video?: { url: string; poster?: MediaVariant[] };\n  thumbnail?: MediaVariant;\n  name: string;\n  age?: number;\n  likes?: string[];\n  breed?: string;\n  color?: string;\n  place?: string;\n  location?: string;\n  lat?: number;\n  lng?: number;\n  description?: string;\n  size?: string;\n  gender?: 'male' | 'female';\n  vaccinated?: boolean;\n  neutered?: boolean;\n  onViewDetails?: (event: React.MouseEvent<HTMLButtonElement>) => void;\n  onEdit?: (event: React.MouseEvent<HTMLButtonElement>) => void;\n  onRemove?: () => void;\n  canEdit?: boolean;\n  user?: {\n    _id: string;\n    name: string;\n    username: string;\n    email?: string;\n    phone?: string;\n    person?: 'private' | 'organization';\n  };\n}\n\nconst CardSmall: React.FC<CardSmallProps> = (props) => {\n    // Geocode location if needed (mirrors DogDetails)\n    const handleShowMap = async () => {\n      if (coords || !place) {\n        setShowMap(true);\n        return;\n      }\n      setLoadingCoords(true);\n      setCoordsError(null);\n      try {\n        let query = place.trim();\n        if (query.split(/\\s+/).length < 2) {\n          query += ', Croatia';\n        }\n        const resp = await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(query)}&limit=1&addressdetails=1&extratags=1`);\n        const data = await resp.json();\n        if (data && data.length > 0) {\n          const result = data[0];\n          setCoords({ lat: parseFloat(result.lat), lng: parseFloat(result.lon) });\n          setShowMap(true);\n        } else {\n          setShowMap(true);\n          setCoordsError(t('dogDetails.approximateLocation') || 'Approximate location');\n        }\n      } catch (e) {\n        setShowMap(true);\n        setCoordsError(t('dogDetails.searchBasedLocation') || 'Search-based location');\n      } finally {\n        setLoadingCoords(false);\n      }\n    };\n  const {\n    _id, imgSrc, images, video, thumbnail, name, age, likes, breed, color, description, size, gender, vaccinated, neutered, onViewDetails, onEdit, onRemove, canEdit, user: owner\n  } = props;\n  // fallback: use props.place, or props.location if place is undefined\n  const place = props.place || props.location || '';\n  // @ts-ignore: lat/lng may be present\n  const lat = (typeof props.lat === 'number') ? props.lat : undefined;\n  const lng = (typeof props.lng === 'number') ? props.lng : undefined;\n  const [showMap, setShowMap] = useState(false);\n  const [coords, setCoords] = useState<{lat: number, lng: number} | null>(null);\n  const [loadingCoords, setLoadingCoords] = useState(false);\n  const [coordsError, setCoordsError] = useState<string | null>(null);\n  const { t } = useTranslation();\n  const { isAuthenticated, isInWishlist, addToWishlist, removeFromWishlist, user: currentUser, token } = useAuth();\n  const isOwner = !!(currentUser && owner && currentUser._id === owner._id);\n  \n  // Local state to track wishlist status for immediate UI update\n  const [inWishlist, setInWishlist] = useState(false);\n  \n  // Local state to track likes\n  const [likesCount, setLikesCount] = useState(likes?.length || 0);\n  const [isLiked, setIsLiked] = useState(likes?.includes(currentUser?._id || '') || false);\n  \n  // Sync local state with auth context\n  React.useEffect(() => {\n    if (_id && currentUser && currentUser.wishlist) {\n      const isInList = currentUser.wishlist.includes(_id);\n      setInWishlist(isInList);\n    } else {\n      // Reset when user logs out or no wishlist\n      setInWishlist(false);\n    }\n  }, [_id, currentUser?._id, currentUser?.wishlist?.length, currentUser?.wishlist?.join(',')]);\n  \n  // Update isLiked when likes prop or user changes\n  React.useEffect(() => {\n    if (likes && currentUser?._id) {\n      setIsLiked(likes.includes(currentUser._id));\n      setLikesCount(likes.length);\n    } else {\n      // Reset when user logs out\n      setIsLiked(false);\n      setLikesCount(likes?.length || 0);\n    }\n  }, [likes, currentUser?._id]);\n\n  const handleWishlistToggle = async () => {\n    console.log('Wishlist button clicked for dog:', _id, 'Authenticated:', isAuthenticated);\n    if (!_id || !isAuthenticated) {\n      console.log('Cannot toggle wishlist - no ID or not authenticated');\n      alert('Please log in to add dogs to your wishlist');\n      return;\n    }\n\n    const currentlyInWishlist = inWishlist;\n    console.log('Currently in wishlist:', currentlyInWishlist);\n\n    if (currentlyInWishlist) {\n      console.log('Removing from wishlist...');\n      const result = await removeFromWishlist(_id);\n      console.log('Remove result:', result);\n      if (result.success) {\n        setInWishlist(false);\n        alert('Removed from wishlist!');\n      } else {\n        alert('Failed to remove from wishlist: ' + (result.error || 'Unknown error'));\n      }\n    } else {\n      console.log('Adding to wishlist...');\n      const result = await addToWishlist(_id);\n      console.log('Add result:', result);\n      if (result.success) {\n        setInWishlist(true);\n        alert('Added to wishlist! ‚ù§Ô∏è');\n      } else {\n        alert('Failed to add to wishlist: ' + (result.error || 'Unknown error'));\n      }\n    }\n  };\n\n  const handleLikeToggle = async () => {\n    if (!_id || !isAuthenticated) {\n      alert('Please log in to like dogs');\n      return;\n    }\n\n    const apiBase = getApiBase();\n    \n    if (isLiked) {\n      // Unlike\n      try {\n        const response = await fetch(`${apiBase}/api/dogs/${_id}/like`, {\n          method: 'DELETE',\n          headers: {\n            'Authorization': `Bearer ${token}`\n          }\n        });\n        \n        if (response.ok) {\n          const data = await response.json();\n          setLikesCount(data.likesCount);\n          setIsLiked(false);\n        }\n      } catch (error) {\n        console.error('Unlike error:', error);\n      }\n    } else {\n      // Like\n      try {\n        const response = await fetch(`${apiBase}/api/dogs/${_id}/like`, {\n          method: 'POST',\n          headers: {\n            'Authorization': `Bearer ${token}`\n          }\n        });\n        \n        if (response.ok) {\n          const data = await response.json();\n          setLikesCount(data.likesCount);\n          setIsLiked(true);\n        }\n      } catch (error) {\n        console.error('Like error:', error);\n      }\n    }\n  };\n\n  const getApiBase = () => {\n    if (process.env.REACT_APP_API_URL) return process.env.REACT_APP_API_URL;\n    if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {\n      return `http://${window.location.hostname}:3001`;\n    }\n    return `http://${window.location.hostname}:3001`;\n  };\n  const apiBase = getApiBase();\n  const toAbs = (u?: string) => {\n    if (!u) return u;\n    // If URL contains /uploads/, extract and rebuild with current API base\n    if (u.includes('/uploads/')) {\n      const match = u.match(/\\/uploads\\/.*/);\n      return match ? `${apiBase}${match[0]}` : u;\n    }\n    // Otherwise use as-is if absolute, or prepend apiBase if relative\n    return u.startsWith('http') ? u : `${apiBase}${u}`;\n  };\n  // Add cache-busting query string to image URLs to force reload after update\n  const cacheBust = `t=${Date.now()}`;\n  const imgSrcSet = images && images.length ? images.map(i => `${toAbs(i.url)}?${cacheBust} ${i.width || 320}w`).join(', ') : undefined;\n  const posterUrl = video && video.poster && video.poster.length ? toAbs(video.poster[video.poster.length - 1].url) : undefined;\n\n  const hasVideoUrl = video && typeof video.url === 'string' && video.url.length > 0;\n  const videoUrl = hasVideoUrl ? toAbs(video.url) : undefined;\n  const thumbUrl = thumbnail && thumbnail.url ? `${toAbs(thumbnail.url)}?${cacheBust}` : undefined;\n\n  return (\n    <>\n      <div className=\"card\">\n        <div className=\"img\">\n          {hasVideoUrl ? (\n            <video controls width=\"100%\" poster={posterUrl}>\n              <source src={videoUrl} />\n            </video>\n          ) : (typeof (thumbUrl) !== 'undefined' && thumbUrl) ? (\n            <img src={thumbUrl} alt={name} style={{ width: '80px', height: '80px', borderRadius: '50%', objectFit: 'cover' }} />\n          ) : (images && images.length) ? (\n            <img src={`${toAbs(images[0].url)}?${cacheBust}`} srcSet={imgSrcSet} sizes=\"(max-width: 600px) 320px, (max-width: 1024px) 640px, 1024px\" alt={name} />\n          ) : (\n            <img src={imgSrc || 'img/nany.jpg'} alt={name} />\n          )}\n        </div>\n\n        <div className=\"description\">\n          <h3 style={{ color: '#751719', marginBottom: 4 }}>\n            <strong>{t('fields.name')}</strong> {name}\n          </h3>\n          {breed && (\n            <p className=\"meta\">\n              <span className=\"eky-icon eky-tag\"></span>\n              <strong>{t('fields.breed')}</strong> {breed}\n            </p>\n          )}\n          {gender && (gender === 'male' || gender === 'female') && (\n            <p className=\"meta\">\n              <span className=\"eky-icon eky-user\"></span>\n              <strong>{t('fields.gender')}</strong> {t(`gender.${gender}`)}\n            </p>\n          )}\n          {place && (\n            <p className=\"meta\">\n              <span className=\"eky-icon eky-map\"></span>\n              <strong>{t('fields.location')}</strong> \n              <span\n                style={{ cursor: place ? 'pointer' : 'default', textDecoration: place ? 'underline' : 'none' }}\n                onClick={place ? handleShowMap : undefined}\n              >\n                {place}\n              </span>\n              {loadingCoords && <span style={{ marginLeft: 8 }}>{t('dogDetails.loadingMap') || 'Loading map...'}</span>}\n              {coordsError && <span style={{ color: 'red', marginLeft: 8 }}>{coordsError}</span>}\n            </p>\n          )}\n          {showMap && place && (\n            <div className=\"modal-map\" style={{ position: 'fixed', top: 0, left: 0, width: '100vw', height: '100vh', background: 'rgba(0,0,0,0.5)', zIndex: 9999, display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\n              <div style={{ background: '#fff', padding: 20, borderRadius: 12, maxWidth: 600, width: '90vw', position: 'relative' }}>\n                <button\n                  onClick={() => setShowMap(false)}\n                  style={{\n                    position: 'absolute',\n                    top: 10,\n                    right: 10,\n                    width: 56,\n                    height: 56,\n                    backgroundColor: '#e74c3c',\n                    color: '#fff',\n                    border: 'none',\n                    borderRadius: '50%',\n                    display: 'flex',\n                    alignItems: 'center',\n                    justifyContent: 'center',\n                    boxShadow: '0 4px 12px rgba(0,0,0,0.3)',\n                    cursor: 'pointer',\n                    zIndex: 2147483647,\n                    padding: 0\n                  }}\n                  title={t('common.close')}\n                  aria-label={t('common.close')}\n                >\n                  <span style={{\n                    fontSize: 40,\n                    fontWeight: 900,\n                    lineHeight: '56px',\n                    width: '100%',\n                    textAlign: 'center',\n                    display: 'block',\n                    userSelect: 'none',\n                    letterSpacing: 2\n                  }}>√ó</span>\n                </button>\n                <h3 style={{ marginBottom: 10 }}>{place}</h3>\n                <iframe\n                  title=\"Map Preview\"\n                  width=\"100%\"\n                  height=\"400\"\n                  style={{ border: 0, borderRadius: 8 }}\n                  src={coords\n                    ? `https://www.openstreetmap.org/export/embed.html?bbox=${coords.lng-0.005},${coords.lat-0.005},${coords.lng+0.005},${coords.lat+0.005}&layer=mapnik&marker=${coords.lat},${coords.lng}`\n                    : `https://www.openstreetmap.org/export/embed.html?search=${encodeURIComponent(place)}`}\n                  allowFullScreen\n                />\n              </div>\n            </div>\n          )}\n        {/* ...existing code... */}\n          \n          {owner && !isOwner && (\n            <div style={{ marginTop: '1rem', paddingTop: '1rem', borderTop: '1px solid #ddd' }}>\n              <p className=\"meta\" style={{ marginBottom: '0.5rem' }}>\n                <strong>{t('fields.postedBy') || 'Posted by'}:</strong> {owner.name}\n              </p>\n              {owner.person && (\n                <p className=\"meta\" style={{ marginBottom: '0.5rem' }}>\n                  <strong>{t('fields.userType') || 'Type'}:</strong> {t(`registerOptions.${owner.person}`) || owner.person}\n                </p>\n              )}\n              {owner.phone && (\n                <p className=\"meta\" style={{ marginBottom: '0.5rem' }}>\n                  <strong>{t('fields.phone') || 'Phone'}:</strong> \n                  <a href={`tel:${owner.phone}`} style={{ color: '#007bff', textDecoration: 'none', marginLeft: '0.5rem' }}>\n                    {owner.phone}\n                  </a>\n                </p>\n              )}\n              {owner.email && (\n                <p className=\"meta\">\n                  <strong>{t('fields.email') || 'Email'}:</strong>\n                  <a href={`mailto:${owner.email}`} style={{ color: '#007bff', textDecoration: 'none', marginLeft: '0.5rem' }}>\n                    {owner.email}\n                  </a>\n                </p>\n              )}\n            </div>\n          )}\n          \n          <div className=\"card-actions\" style={{\n            display: 'flex',\n            flexWrap: 'wrap',\n            gap: '4px',\n            marginTop: '6px',\n            alignItems: 'center',\n            justifyContent: 'flex-start',\n            width: '100%',\n            rowGap: '4px',\n            columnGap: '4px',\n            minHeight: '24px',\n            boxSizing: 'border-box',\n            overflow: 'hidden'\n          }}>\n            <button \n              className=\"details\"\n              onClick={onViewDetails}\n              style={{\n                padding: '2px 7px',\n                border: 'none',\n                borderRadius: '10px',\n                background: '#2196F3', // app main color\n                color: 'white',\n                fontSize: '10px',\n                fontWeight: 500,\n                whiteSpace: 'nowrap',\n                minWidth: 'fit-content',\n                boxShadow: '0 1px 4px rgba(33,150,243,0.08)'\n              }}\n            >\n              {t('button.viewDetails')}\n            </button>\n            {isAuthenticated && _id && (\n              <>\n                <button \n                  className={`like ${isLiked ? 'liked' : ''}`}\n                  onClick={handleLikeToggle}\n                  style={{\n                    backgroundColor: isLiked ? '#ff6b6b' : '#f0f0f0',\n                    color: isLiked ? 'white' : '#333',\n                    border: '1px solid #ddd',\n                    padding: '8px 12px',\n                    borderRadius: '4px',\n                    cursor: 'pointer',\n                    fontSize: '12px',\n                    display: 'flex',\n                    alignItems: 'center',\n                    gap: '4px'\n                  }}\n                  title={isLiked ? 'Unlike' : 'Like'}\n                >\n                  üëç {likesCount}\n                </button>\n                <button \n                  className={`wishlist ${inWishlist ? 'in-wishlist' : ''}`}\n                  onClick={() => {\n                    // eslint-disable-next-line no-console\n                    console.log('[CardSmall] addToList:', t('button.addToList'), '| removeFromList:', t('button.removeFromList'));\n                    handleWishlistToggle();\n                  }}\n                  style={{\n                    backgroundColor: inWishlist ? '#ff4444' : '#2196F3', // red for remove, app color for add\n                    color: 'white',\n                    border: 'none',\n                    padding: '2px 7px',\n                    borderRadius: '10px',\n                    cursor: 'pointer',\n                    fontSize: '10px',\n                    fontWeight: 500,\n                    whiteSpace: 'nowrap',\n                    minWidth: 'fit-content',\n                    boxShadow: inWishlist ? '0 1px 4px rgba(255,68,68,0.08)' : '0 1px 4px rgba(33,150,243,0.08)'\n                  }}\n                  title={inWishlist ? t('button.removeFromList') : t('button.addToList')}\n                >\n                  {(() => {\n                    const addToList = t('button.addToList');\n                    const removeFromList = t('button.removeFromList');\n                    // eslint-disable-next-line no-console\n                    console.log('[CardSmall][render] addToList:', addToList, '| removeFromList:', removeFromList);\n                    return inWishlist ? 'üíî ' + removeFromList : '‚ù§Ô∏è ' + addToList;\n                  })()}\n                </button>\n              </>\n            )}\n            {!isAuthenticated && _id && (\n              <div style={{ fontSize: '12px', color: '#666', display: 'flex', alignItems: 'center', gap: '4px' }}>\n                üëç {likesCount}\n              </div>\n            )}\n            {canEdit && onEdit && (\n              <button\n                className=\"edit\"\n                onClick={onEdit}\n                title={t('button.edit') || 'Edit'}\n                style={{\n                  padding: '2px 7px',\n                  border: 'none',\n                  borderRadius: '10px',\n                  background: '#FFC107',\n                  color: '#333',\n                  fontSize: '10px',\n                  fontWeight: 500,\n                  whiteSpace: 'nowrap',\n                  minWidth: 'fit-content',\n                  boxShadow: '0 1px 4px rgba(255,193,7,0.08)'\n                }}\n              >\n                {t('button.edit') || 'Edit'}\n              </button>\n            )}\n            {canEdit && onRemove && (\n              <button\n                className=\"remove\"\n                onClick={onRemove}\n                title={t('button.remove') || 'Remove'}\n                style={{\n                  padding: '2px 7px',\n                  border: 'none',\n                  borderRadius: '10px',\n                  background: '#e74c3c',\n                  color: 'white',\n                  fontSize: '10px',\n                  fontWeight: 500,\n                  whiteSpace: 'nowrap',\n                  minWidth: 'fit-content',\n                  boxShadow: '0 1px 4px rgba(231,76,60,0.08)'\n                }}\n              >\n                {t('button.remove') || 'Remove'}\n              </button>\n            )}\n          </div>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default CardSmall;\n","/Applications/MAMP/htdocs/eky/client/src/components/pages/DogDetails.tsx",[],[],"/Applications/MAMP/htdocs/eky/client/src/contexts/AuthContext.tsx",[],[],"/Applications/MAMP/htdocs/eky/client/src/components/UserProfileModal.tsx",["229","230","231"],[],"/Applications/MAMP/htdocs/eky/client/src/components/pages/AuthCallback.tsx",[],[],"/Applications/MAMP/htdocs/eky/client/src/components/TermsModal.tsx",[],[],"/Applications/MAMP/htdocs/eky/client/src/components/ChatApp.tsx",["232","233"],[],{"ruleId":"234","severity":1,"message":"235","line":73,"column":6,"nodeType":"236","endLine":73,"endColumn":61,"suggestions":"237"},{"ruleId":"234","severity":1,"message":"238","line":84,"column":6,"nodeType":"236","endLine":84,"endColumn":20,"suggestions":"239"},{"ruleId":"240","severity":1,"message":"241","line":22,"column":9,"nodeType":"242","messageId":"243","endLine":22,"endColumn":18},{"ruleId":"240","severity":1,"message":"244","line":29,"column":21,"nodeType":"242","messageId":"243","endLine":29,"endColumn":33},{"ruleId":"240","severity":1,"message":"245","line":3,"column":10,"nodeType":"242","messageId":"243","endLine":3,"endColumn":22},{"ruleId":"240","severity":1,"message":"246","line":3,"column":24,"nodeType":"242","messageId":"243","endLine":3,"endColumn":33},{"ruleId":"240","severity":1,"message":"247","line":3,"column":35,"nodeType":"242","messageId":"243","endLine":3,"endColumn":41},{"ruleId":"240","severity":1,"message":"248","line":3,"column":43,"nodeType":"242","messageId":"243","endLine":3,"endColumn":48},{"ruleId":"240","severity":1,"message":"249","line":5,"column":10,"nodeType":"242","messageId":"243","endLine":5,"endColumn":21},{"ruleId":"240","severity":1,"message":"250","line":79,"column":50,"nodeType":"242","messageId":"243","endLine":79,"endColumn":53},{"ruleId":"240","severity":1,"message":"251","line":79,"column":69,"nodeType":"242","messageId":"243","endLine":79,"endColumn":74},{"ruleId":"240","severity":1,"message":"252","line":79,"column":76,"nodeType":"242","messageId":"243","endLine":79,"endColumn":87},{"ruleId":"240","severity":1,"message":"253","line":79,"column":89,"nodeType":"242","messageId":"243","endLine":79,"endColumn":93},{"ruleId":"240","severity":1,"message":"254","line":79,"column":103,"nodeType":"242","messageId":"243","endLine":79,"endColumn":113},{"ruleId":"240","severity":1,"message":"255","line":79,"column":115,"nodeType":"242","messageId":"243","endLine":79,"endColumn":123},{"ruleId":"240","severity":1,"message":"256","line":84,"column":9,"nodeType":"242","messageId":"243","endLine":84,"endColumn":12},{"ruleId":"240","severity":1,"message":"257","line":85,"column":9,"nodeType":"242","messageId":"243","endLine":85,"endColumn":12},{"ruleId":"240","severity":1,"message":"258","line":91,"column":28,"nodeType":"242","messageId":"243","endLine":91,"endColumn":40},{"ruleId":"234","severity":1,"message":"259","line":110,"column":6,"nodeType":"236","endLine":110,"endColumn":94,"suggestions":"260"},{"ruleId":"234","severity":1,"message":"261","line":110,"column":61,"nodeType":"262","endLine":110,"endColumn":93},{"ruleId":"234","severity":1,"message":"263","line":57,"column":6,"nodeType":"236","endLine":57,"endColumn":31,"suggestions":"264"},{"ruleId":"234","severity":1,"message":"265","line":74,"column":6,"nodeType":"236","endLine":74,"endColumn":14,"suggestions":"266"},{"ruleId":"267","severity":1,"message":"268","line":437,"column":21,"nodeType":"269","endLine":447,"endColumn":23},{"ruleId":"240","severity":1,"message":"270","line":3,"column":14,"nodeType":"242","messageId":"243","endLine":3,"endColumn":20},{"ruleId":"234","severity":1,"message":"271","line":172,"column":6,"nodeType":"236","endLine":172,"endColumn":19,"suggestions":"272"},"react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'searchParams'. Either include it or remove the dependency array.","ArrayExpression",["273"],"React Hook useEffect has missing dependencies: 'genderFilter', 'searchTerm', and 'sizeFilter'. Either include them or remove the dependency array.",["274"],"@typescript-eslint/no-unused-vars","'getApiUrl' is assigned a value but never used.","Identifier","unusedVar","'registerUser' is assigned a value but never used.","'MapContainer' is defined but never used.","'TileLayer' is defined but never used.","'Marker' is defined but never used.","'Popup' is defined but never used.","'useNavigate' is defined but never used.","'age' is assigned a value but never used.","'color' is assigned a value but never used.","'description' is assigned a value but never used.","'size' is assigned a value but never used.","'vaccinated' is assigned a value but never used.","'neutered' is assigned a value but never used.","'lat' is assigned a value but never used.","'lng' is assigned a value but never used.","'isInWishlist' is assigned a value but never used.","React Hook React.useEffect has a missing dependency: 'currentUser'. Either include it or remove the dependency array.",["275"],"React Hook React.useEffect has a complex expression in the dependency array. Extract it to a separate variable so it can be statically checked.","ChainExpression","React Hook React.useEffect has missing dependencies: 'loadWishlist', 'typedUser.email', 'typedUser.name', 'typedUser.phone', and 'typedUser.username'. Either include them or remove the dependency array.",["276"],"React Hook React.useEffect has a missing dependency: 'handleModalClose'. Either include it or remove the dependency array.",["277"],"jsx-a11y/img-redundant-alt","Redundant alt attribute. Screen-readers already announce `img` tags as an image. You don‚Äôt need to use the words `image`, `photo,` or `picture` (or any specified custom words) in the alt prop.","JSXOpeningElement","'Socket' is defined but never used.","React Hook useEffect has a missing dependency: 'selectedConvo'. Either include it or remove the dependency array.",["278"],{"desc":"279","fix":"280"},{"desc":"281","fix":"282"},{"desc":"283","fix":"284"},{"desc":"285","fix":"286"},{"desc":"287","fix":"288"},{"desc":"289","fix":"290"},"Update the dependencies array to be: [searchTerm, genderFilter, sizeFilter, setSearchParams, searchParams]",{"range":"291","text":"292"},"Update the dependencies array to be: [genderFilter, searchParams, searchTerm, sizeFilter]",{"range":"293","text":"294"},"Update the dependencies array to be: [_id, currentUser, currentUser._id, currentUser.wishlist.length]",{"range":"295","text":"296"},"Update the dependencies array to be: [isOpen, activeTab, user, loadWishlist, typedUser.name, typedUser.email, typedUser.username, typedUser.phone]",{"range":"297","text":"298"},"Update the dependencies array to be: [handleModalClose, isOpen]",{"range":"299","text":"300"},"Update the dependencies array to be: [user, token, selectedConvo]",{"range":"301","text":"302"},[2422,2477],"[searchTerm, genderFilter, sizeFilter, setSearchParams, searchParams]",[2892,2906],"[genderFilter, searchParams, searchTerm, sizeFilter]",[4056,4144],"[_id, currentUser, currentUser._id, currentUser.wishlist.length]",[1919,1944],"[isOpen, activeTab, user, loadWishlist, typedUser.name, typedUser.email, typedUser.username, typedUser.phone]",[2469,2477],"[handleModalClose, isOpen]",[6965,6978],"[user, token, selectedConvo]"]