{"ast":null,"code":"var _jsxFileName = \"/Applications/MAMP/htdocs/eky/client/src/components/pages/EditDogModal.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useRef } from 'react';\nimport { useForm } from 'react-hook-form';\nimport { useTranslation } from 'react-i18next';\nimport { useAuth } from '../../contexts/AuthContext';\nimport '../../css/edit-modal.css';\nimport '../../css/editdog-visuals.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst API_URL = process.env.REACT_APP_API_URL || '';\nconst getImageUrl = url => {\n  if (!url) return '';\n  if (/^https?:\\/\\//.test(url)) return url;\n  if (url.startsWith('/')) return API_URL + url;\n  return API_URL + '/uploads/dogs/' + url;\n};\nconst EditDogModal = ({\n  dog,\n  onClose,\n  onSave,\n  modalPosition\n}) => {\n  _s();\n  const {\n    t\n  } = useTranslation();\n  const {\n    token\n  } = useAuth();\n  const isMounted = useRef(true);\n  const [mediaFiles, setMediaFiles] = useState([]);\n  const [mediaPreviews, setMediaPreviews] = useState([]);\n  const [existingImages, setExistingImages] = useState(dog.images ? [...dog.images] : []);\n  const [selectedToDelete, setSelectedToDelete] = useState(new Set());\n  const {\n    handleSubmit,\n    setValue,\n    reset\n  } = useForm({\n    defaultValues: {\n      name: dog.name || '',\n      breed: dog.breed || '',\n      color: dog.color || '',\n      location: dog.location || '',\n      age: dog.age || undefined,\n      description: dog.description || '',\n      size: dog.size || '',\n      gender: dog.gender || '',\n      vaccinated: !!dog.vaccinated,\n      neutered: !!dog.neutered\n    }\n  });\n  useEffect(() => {\n    isMounted.current = true;\n    reset({\n      name: dog.name || '',\n      breed: dog.breed || '',\n      color: dog.color || '',\n      location: dog.location || '',\n      age: dog.age || undefined,\n      description: dog.description || '',\n      size: dog.size || '',\n      gender: dog.gender || '',\n      vaccinated: !!dog.vaccinated,\n      neutered: !!dog.neutered\n    });\n    setExistingImages(dog.images ? [...dog.images] : []);\n    setMediaFiles([]);\n    setMediaPreviews([]);\n    setSelectedToDelete(new Set());\n    return () => {\n      isMounted.current = false;\n    };\n  }, [dog, dog.images, setValue, reset]);\n  const onSubmit = async fields => {\n    try {\n      if (!isMounted.current) return;\n      // setSubmitting(true); // Removed unused state\n      // setSubmitError(null); // Removed unused state\n      let resp;\n      // Always send all fields, including unchecked checkboxes and empty fields\n      const allKeys = ['name', 'breed', 'color', 'location', 'age', 'description', 'size', 'gender', 'vaccinated', 'neutered'];\n      // Always send correct keepImages (after deletions)\n      const keepImagesArr = existingImages.map(img => img.url);\n      const hasNewFiles = mediaFiles.length > 0;\n      const hasRemovedImages = keepImagesArr.length !== (dog.images ? dog.images.length : 0);\n      const hasPhotoChanges = hasNewFiles || hasRemovedImages;\n      if (hasPhotoChanges) {\n        const formData = new FormData();\n        allKeys.forEach(k => {\n          let v = fields[k];\n          // Always send as string, even for 0, false, or empty\n          if (k === 'vaccinated' || k === 'neutered') {\n            formData.append(k, v ? 'true' : 'false');\n          } else if (typeof v === 'number') {\n            formData.append(k, String(v));\n          } else if (typeof v === 'boolean') {\n            formData.append(k, v ? 'true' : 'false');\n          } else if (typeof v !== 'undefined' && v !== null) {\n            formData.append(k, String(v));\n          } else {\n            formData.append(k, '');\n          }\n        });\n        formData.append('keepImages', JSON.stringify(keepImagesArr));\n        mediaFiles.forEach((file, idx) => {\n          formData.append('media', file, file.name);\n        });\n        const headers = {};\n        if (token) headers['Authorization'] = `Bearer ${token}`;\n        try {\n          resp = await fetch(`${API_URL}/api/dogs/${dog._id}`, {\n            method: 'PATCH',\n            body: formData,\n            headers\n          });\n        } catch (fetchErr) {\n          if (isMounted.current) {\n            // Error: Failed to upload images. Please check your connection or try again.\n          }\n          return;\n        }\n      } else {\n        const bodyData = {};\n        allKeys.forEach(k => {\n          let v = fields[k];\n          if (k === 'vaccinated' || k === 'neutered') {\n            bodyData[k] = v ? true : false;\n          } else if (typeof v !== 'undefined' && v !== null) {\n            bodyData[k] = v;\n          } else {\n            bodyData[k] = '';\n          }\n        });\n        // Always include keepImages in JSON PATCH\n        bodyData.keepImages = existingImages.map(img => img.url);\n        const headers = {\n          'Content-Type': 'application/json'\n        };\n        if (token) headers['Authorization'] = `Bearer ${token}`;\n        resp = await fetch(`${API_URL}/api/dogs/${dog._id}`, {\n          method: 'PATCH',\n          headers,\n          body: JSON.stringify(bodyData)\n        });\n      }\n      if (!resp.ok) {\n        const errData = await resp.json().catch(() => ({}));\n        throw new Error(errData.message || 'Failed to update dog');\n      }\n      // Always fetch the latest dog data after update (not just PATCH response)\n      let updatedDog = null;\n      try {\n        const respData = await resp.json();\n        updatedDog = respData.dog || respData;\n      } catch (e) {\n        updatedDog = null;\n      }\n      // Defensive: fetch latest from backend in case PATCH response is stale\n      if (updatedDog && updatedDog._id) {\n        try {\n          const latestResp = await fetch(`${API_URL}/api/dogs/${updatedDog._id}`);\n          if (latestResp.ok) {\n            updatedDog = await latestResp.json();\n          }\n        } catch {}\n      }\n      if (isMounted.current && updatedDog) {\n        setExistingImages(updatedDog.images ? [...updatedDog.images] : []);\n        setMediaFiles([]);\n        setMediaPreviews([]);\n        onSave(updatedDog);\n        onClose();\n      }\n    } catch (err) {\n      if (!isMounted.current) return;\n      if (mediaFiles.length > 0 && (err.message === 'Failed to fetch' || err.message === 'NetworkError when attempting to fetch resource.')) {\n        // Error: Failed to upload images. Please check your connection or try again.\n      } else {\n        // Error: Failed to update dog\n      }\n    } finally {\n      // if (isMounted.current) setSubmitting(false); // Removed unused state\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"edit-modal-overlay\",\n    style: {\n      position: 'fixed',\n      top: 0,\n      left: 0,\n      width: '100vw',\n      height: '100vh',\n      backgroundColor: 'rgba(0, 0, 0, 0.8)',\n      zIndex: 2147483647,\n      display: 'flex',\n      alignItems: window.innerWidth > 768 ? 'center' : 'stretch',\n      justifyContent: 'center',\n      padding: window.innerWidth > 768 ? '2rem' : '0',\n      boxSizing: 'border-box'\n    },\n    onClick: e => {\n      if (e.target === e.currentTarget) {\n        onClose();\n      }\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        backgroundColor: 'white',\n        borderRadius: window.innerWidth > 768 ? '12px' : '0',\n        padding: '1.5rem',\n        paddingTop: window.innerWidth > 768 ? '1.5rem' : '3.5rem',\n        paddingBottom: window.innerWidth > 768 ? '1.5rem' : '6rem',\n        width: window.innerWidth > 768 ? '100%' : '100vw',\n        height: window.innerWidth > 768 ? 'auto' : '100vh',\n        maxWidth: window.innerWidth > 768 ? '600px' : '100vw',\n        maxHeight: window.innerWidth > 768 ? '90vh' : '100vh',\n        overflowY: 'auto',\n        WebkitOverflowScrolling: 'touch',\n        position: 'relative',\n        zIndex: 2147483647\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"editdog-close-btn\",\n        onClick: onClose,\n        children: \"\\xD7\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        style: {\n          marginBottom: '1rem',\n          position: window.innerWidth <= 768 ? 'sticky' : 'static',\n          top: window.innerWidth <= 768 ? '0' : 'auto',\n          backgroundColor: 'white',\n          zIndex: 100,\n          paddingTop: window.innerWidth <= 768 ? '0.5rem' : '0'\n        },\n        children: t('editdog.title', {\n          name: dog.name\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit(onSubmit),\n        style: {\n          display: 'flex',\n          flexDirection: 'column',\n          gap: '1rem'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: t('adddog.name')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 265,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"name\",\n          defaultValue: dog.name || '',\n          onChange: e => setValue('name', e.target.value),\n          required: true,\n          style: {\n            padding: '0.5rem',\n            borderRadius: 6,\n            border: '1px solid #ccc'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: t('adddog.breed')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"breed\",\n          defaultValue: dog.breed || '',\n          onChange: e => setValue('breed', e.target.value),\n          style: {\n            padding: '0.5rem',\n            borderRadius: 6,\n            border: '1px solid #ccc'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 275,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: t('adddog.color')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 282,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"color\",\n          defaultValue: dog.color || '',\n          onChange: e => setValue('color', e.target.value),\n          style: {\n            padding: '0.5rem',\n            borderRadius: 6,\n            border: '1px solid #ccc'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 283,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: t('adddog.location')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"location\",\n          defaultValue: dog.location || '',\n          onChange: e => setValue('location', e.target.value),\n          style: {\n            padding: '0.5rem',\n            borderRadius: 6,\n            border: '1px solid #ccc'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 291,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: t('adddog.age')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 298,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"age\",\n          type: \"number\",\n          min: 0,\n          defaultValue: dog.age || '',\n          onChange: e => setValue('age', e.target.value ? Number(e.target.value) : undefined),\n          style: {\n            padding: '0.5rem',\n            borderRadius: 6,\n            border: '1px solid #ccc',\n            width: 100\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 299,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: t('adddog.size')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 308,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"size\",\n          defaultValue: dog.size || '',\n          onChange: e => setValue('size', e.target.value),\n          style: {\n            padding: '0.5rem',\n            borderRadius: 6,\n            border: '1px solid #ccc'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 309,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: t('adddog.gender')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 317,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            gap: 24,\n            alignItems: 'center',\n            marginBottom: 8\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"editdog-radio-label\",\n            style: {\n              fontSize: '1.1rem',\n              fontWeight: 500\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"radio\",\n              name: \"gender\",\n              className: \"editdog-radio\",\n              checked: dog.gender === 'male',\n              onChange: () => setValue('gender', 'male')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 320,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"editdog-radio-custom\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 327,\n              columnNumber: 15\n            }, this), t('adddog.male').replace('adddog.', '')]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 319,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"editdog-radio-label\",\n            style: {\n              fontSize: '1.1rem',\n              fontWeight: 500\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"radio\",\n              name: \"gender\",\n              className: \"editdog-radio\",\n              checked: dog.gender === 'female',\n              onChange: () => setValue('gender', 'female')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 331,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"editdog-radio-custom\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 338,\n              columnNumber: 15\n            }, this), t('adddog.female').replace('adddog.', '')]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 330,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 318,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            gap: 24,\n            alignItems: 'center',\n            marginBottom: 8\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"editdog-checkbox-label\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"checkbox\",\n              name: \"vaccinated\",\n              className: \"editdog-checkbox\",\n              checked: !!dog.vaccinated,\n              onChange: e => setValue('vaccinated', e.target.checked)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 345,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"editdog-checkbox-custom\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 352,\n              columnNumber: 15\n            }, this), t('adddog.vaccinated')]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 344,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"editdog-checkbox-label\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"checkbox\",\n              name: \"neutered\",\n              className: \"editdog-checkbox\",\n              checked: !!dog.neutered,\n              onChange: e => setValue('neutered', e.target.checked)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 356,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"editdog-checkbox-custom\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 363,\n              columnNumber: 15\n            }, this), t('adddog.neutered')]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 355,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 343,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: t('adddog.description')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 368,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          name: \"description\",\n          defaultValue: dog.description || '',\n          onChange: e => setValue('description', e.target.value),\n          rows: 3,\n          style: {\n            padding: '0.5rem',\n            borderRadius: 6,\n            border: '1px solid #ccc',\n            resize: 'vertical'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 369,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: t('adddog.media')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 378,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"media-input-row\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"editdog-media\",\n            name: \"media\",\n            type: \"file\",\n            accept: \"image/*\",\n            multiple: true,\n            onChange: e => {\n              const files = Array.from(e.target.files || []);\n              setMediaFiles(prev => [...prev, ...files]);\n              setMediaPreviews(prev => [...prev, ...files.map(f => URL.createObjectURL(f))]);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 380,\n            columnNumber: 13\n          }, this), mediaPreviews.length > 0 && /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            onClick: () => {\n              setMediaFiles([]);\n              setMediaPreviews([]);\n            },\n            className: \"editdog-reset-photos-btn\",\n            children: t('editdog.resetPhotos').replace('editdog.', '').replace('adddog.', '')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 393,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [mediaPreviews.length > 0 ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  margin: '0.5rem 0',\n                  color: '#e67e22',\n                  fontSize: '0.95rem',\n                  fontWeight: 'bold'\n                },\n                children: t('editdog.newPhotos').replace('editdog.', '').replace('adddog.', '')\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 407,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"media-preview-list\",\n                style: {\n                  display: 'flex',\n                  gap: 8,\n                  flexWrap: 'wrap'\n                },\n                children: mediaPreviews.map((url, idx) => /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: url,\n                  alt: `preview-${idx}`,\n                  width: window.innerWidth <= 768 ? 120 : 80,\n                  style: {\n                    borderRadius: 8,\n                    marginTop: window.innerWidth <= 768 ? 12 : 0,\n                    objectFit: 'cover',\n                    height: 80\n                  }\n                }, idx, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 412,\n                  columnNumber: 23\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 410,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true) : existingImages.length > 0 ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  margin: '0.5rem 0',\n                  color: '#666',\n                  fontSize: '0.9rem'\n                },\n                children: t('editdog.currentPhotos').replace('editdog.', '').replace('adddog.', '')\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 424,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"media-preview-list\",\n                style: {\n                  display: 'flex',\n                  gap: 8,\n                  flexWrap: 'wrap'\n                },\n                children: existingImages.map((img, idx) => /*#__PURE__*/_jsxDEV(\"span\", {\n                  style: {\n                    position: 'relative',\n                    display: 'inline-block',\n                    marginRight: 8\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                    src: getImageUrl(img.url),\n                    alt: `img-${idx}`,\n                    width: window.innerWidth <= 768 ? 120 : 80,\n                    style: {\n                      borderRadius: 8,\n                      marginTop: window.innerWidth <= 768 ? 12 : 0,\n                      objectFit: 'cover',\n                      height: 80,\n                      opacity: selectedToDelete.has(idx) ? 0.5 : 1\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 430,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"checkbox\",\n                    checked: selectedToDelete.has(idx),\n                    onChange: e => {\n                      setSelectedToDelete(prev => {\n                        const next = new Set(prev);\n                        if (e.target.checked) next.add(idx);else next.delete(idx);\n                        return next;\n                      });\n                    },\n                    style: {\n                      position: 'absolute',\n                      top: 4,\n                      left: 4,\n                      zIndex: 3,\n                      width: 22,\n                      height: 22,\n                      accentColor: '#e74c3c',\n                      background: '#fff',\n                      border: '2px solid #e74c3c',\n                      borderRadius: 6,\n                      boxShadow: '0 2px 8px rgba(0,0,0,0.12)'\n                    },\n                    title: selectedToDelete.has(idx) ? t('editdog.selectedToDelete').replace('editdog.', '').replace('adddog.', '') : t('editdog.selectToDelete').replace('editdog.', '').replace('adddog.', '')\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 431,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    type: \"button\",\n                    style: {\n                      position: 'absolute',\n                      top: 4,\n                      right: 4,\n                      background: '#e74c3c',\n                      color: '#fff',\n                      border: 'none',\n                      borderRadius: '50%',\n                      width: 22,\n                      height: 22,\n                      minWidth: 22,\n                      minHeight: 22,\n                      maxWidth: 22,\n                      maxHeight: 22,\n                      cursor: 'pointer',\n                      fontWeight: 'bold',\n                      fontSize: 16,\n                      lineHeight: '22px',\n                      padding: 0,\n                      display: 'flex',\n                      alignItems: 'center',\n                      justifyContent: 'center',\n                      boxShadow: '0 2px 8px rgba(0,0,0,0.12)'\n                    },\n                    onClick: () => {\n                      setExistingImages(existingImages.filter((_, i) => i !== idx));\n                      setSelectedToDelete(prev => {\n                        const next = new Set(prev);\n                        next.delete(idx);\n                        // Shift all indices above idx down by 1\n                        const shifted = new Set();\n                        next.forEach(i => shifted.add(i > idx ? i - 1 : i));\n                        return shifted;\n                      });\n                    },\n                    title: t('editdog.deleteThisImage').replace('editdog.', '').replace('adddog.', ''),\n                    children: \"\\xD7\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 445,\n                    columnNumber: 25\n                  }, this), window.innerWidth <= 768 && /*#__PURE__*/_jsxDEV(\"span\", {\n                    style: {\n                      position: 'absolute',\n                      bottom: 4,\n                      left: 4,\n                      background: 'rgba(255,255,255,0.85)',\n                      color: '#e74c3c',\n                      fontWeight: 'bold',\n                      fontSize: 12,\n                      borderRadius: 4,\n                      padding: '2px 6px',\n                      zIndex: 4\n                    },\n                    children: selectedToDelete.has(idx) ? t('editdog.selectedToDelete').replace('editdog.', '').replace('adddog.', '') : t('editdog.tapToRemove').replace('editdog.', '').replace('adddog.', '')\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 464,\n                    columnNumber: 27\n                  }, this)]\n                }, idx, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 429,\n                  columnNumber: 23\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 427,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true) : null, existingImages.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: 'flex',\n                gap: 8,\n                marginTop: 8\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                style: {\n                  background: '#e74c3c',\n                  color: '#fff',\n                  border: 'none',\n                  borderRadius: 6,\n                  padding: '0.5rem 1rem',\n                  cursor: 'pointer',\n                  fontWeight: 'bold'\n                },\n                disabled: selectedToDelete.size === 0,\n                onClick: () => {\n                  setExistingImages(existingImages.filter((_, i) => !selectedToDelete.has(i)));\n                  setSelectedToDelete(new Set());\n                },\n                children: t('editdog.deleteSelected').replace('editdog.', '').replace('adddog.', '')\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 475,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                style: {\n                  background: '#e67e22',\n                  color: '#fff',\n                  border: 'none',\n                  borderRadius: 6,\n                  padding: '0.5rem 1rem',\n                  cursor: 'pointer',\n                  fontWeight: 'bold'\n                },\n                onClick: () => {\n                  setExistingImages([]);\n                  setSelectedToDelete(new Set());\n                },\n                children: t('editdog.deleteAll').replace('editdog.', '').replace('adddog.', '')\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 486,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 474,\n              columnNumber: 17\n            }, this), existingImages.length === 0 && mediaPreviews.length === 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                margin: '0.5rem 0',\n                color: '#999',\n                fontSize: '0.9rem'\n              },\n              children: t('editdog.noPhotos').replace('editdog.', '').replace('adddog.', '')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 499,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 404,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 379,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 202,\n    columnNumber: 5\n  }, this);\n};\n_s(EditDogModal, \"LDgBVem9hotl8TL/KaYf5eXllAA=\", false, function () {\n  return [useTranslation, useAuth, useForm];\n});\n_c = EditDogModal;\nexport default EditDogModal;\nvar _c;\n$RefreshReg$(_c, \"EditDogModal\");","map":{"version":3,"names":["React","useEffect","useState","useRef","useForm","useTranslation","useAuth","jsxDEV","_jsxDEV","Fragment","_Fragment","API_URL","process","env","REACT_APP_API_URL","getImageUrl","url","test","startsWith","EditDogModal","dog","onClose","onSave","modalPosition","_s","t","token","isMounted","mediaFiles","setMediaFiles","mediaPreviews","setMediaPreviews","existingImages","setExistingImages","images","selectedToDelete","setSelectedToDelete","Set","handleSubmit","setValue","reset","defaultValues","name","breed","color","location","age","undefined","description","size","gender","vaccinated","neutered","current","onSubmit","fields","resp","allKeys","keepImagesArr","map","img","hasNewFiles","length","hasRemovedImages","hasPhotoChanges","formData","FormData","forEach","k","v","append","String","JSON","stringify","file","idx","headers","fetch","_id","method","body","fetchErr","bodyData","keepImages","ok","errData","json","catch","Error","message","updatedDog","respData","e","latestResp","err","className","style","position","top","left","width","height","backgroundColor","zIndex","display","alignItems","window","innerWidth","justifyContent","padding","boxSizing","onClick","target","currentTarget","children","borderRadius","paddingTop","paddingBottom","maxWidth","maxHeight","overflowY","WebkitOverflowScrolling","fileName","_jsxFileName","lineNumber","columnNumber","marginBottom","flexDirection","gap","defaultValue","onChange","value","required","border","type","min","Number","fontSize","fontWeight","checked","replace","rows","resize","id","accept","multiple","files","Array","from","prev","f","URL","createObjectURL","margin","flexWrap","src","alt","marginTop","objectFit","marginRight","opacity","has","next","add","delete","accentColor","background","boxShadow","title","right","minWidth","minHeight","cursor","lineHeight","filter","_","i","shifted","bottom","disabled","_c","$RefreshReg$"],"sources":["/Applications/MAMP/htdocs/eky/client/src/components/pages/EditDogModal.tsx"],"sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\nimport { useForm, SubmitHandler } from 'react-hook-form';\nimport { useTranslation } from 'react-i18next';\nimport { useAuth } from '../../contexts/AuthContext';\nimport '../../css/edit-modal.css';\nimport '../../css/editdog-visuals.css';\n\n\ninterface EditDogFormData {\n  name: string;\n  breed?: string;\n  color?: string;\n  location?: string;\n  age?: number;\n  description?: string;\n  size?: string;\n  gender?: string;\n  vaccinated?: boolean;\n  neutered?: boolean;\n}\n\ntype DogImage = { url: string };\n\n\ninterface EditDogModalProps {\n  dog: any;\n  onClose: () => void;\n  onSave: (dog: any) => void;\n  modalPosition?: { x: number; y: number };\n}\n\nconst API_URL = process.env.REACT_APP_API_URL || '';\n\nconst getImageUrl = (url: string) => {\n  if (!url) return '';\n  if (/^https?:\\/\\//.test(url)) return url;\n  if (url.startsWith('/')) return API_URL + url;\n  return API_URL + '/uploads/dogs/' + url;\n};\n\n\nconst EditDogModal = ({ dog, onClose, onSave, modalPosition }: EditDogModalProps) => {\n  const { t } = useTranslation();\n  const { token } = useAuth();\n  const isMounted = useRef(true);\n  const [mediaFiles, setMediaFiles] = useState<File[]>([]);\n  const [mediaPreviews, setMediaPreviews] = useState<string[]>([]);\n  const [existingImages, setExistingImages] = useState<DogImage[]>(dog.images ? [...dog.images] : []);\n  const [selectedToDelete, setSelectedToDelete] = useState<Set<number>>(new Set());\n\n  const { handleSubmit, setValue, reset } = useForm<EditDogFormData>({\n    defaultValues: {\n      name: dog.name || '',\n      breed: dog.breed || '',\n      color: dog.color || '',\n      location: dog.location || '',\n      age: dog.age || undefined,\n      description: dog.description || '',\n      size: dog.size || '',\n      gender: dog.gender || '',\n      vaccinated: !!dog.vaccinated,\n      neutered: !!dog.neutered,\n    }\n  });\n\n  useEffect(() => {\n    isMounted.current = true;\n    reset({\n      name: dog.name || '',\n      breed: dog.breed || '',\n      color: dog.color || '',\n      location: dog.location || '',\n      age: dog.age || undefined,\n      description: dog.description || '',\n      size: dog.size || '',\n      gender: dog.gender || '',\n      vaccinated: !!dog.vaccinated,\n      neutered: !!dog.neutered,\n    });\n    setExistingImages(dog.images ? [...dog.images] : []);\n    setMediaFiles([]);\n    setMediaPreviews([]);\n    setSelectedToDelete(new Set());\n    return () => {\n      isMounted.current = false;\n    };\n  }, [dog, dog.images, setValue, reset]);\n\n  const onSubmit: SubmitHandler<EditDogFormData> = async (fields) => {\n    try {\n      if (!isMounted.current) return;\n      // setSubmitting(true); // Removed unused state\n      // setSubmitError(null); // Removed unused state\n      let resp;\n      // Always send all fields, including unchecked checkboxes and empty fields\n      const allKeys = [\n        'name', 'breed', 'color', 'location', 'age', 'description', 'size', 'gender', 'vaccinated', 'neutered'\n      ];\n      // Always send correct keepImages (after deletions)\n      const keepImagesArr = existingImages.map(img => img.url);\n      const hasNewFiles = mediaFiles.length > 0;\n      const hasRemovedImages = keepImagesArr.length !== (dog.images ? dog.images.length : 0);\n      const hasPhotoChanges = hasNewFiles || hasRemovedImages;\n      if (hasPhotoChanges) {\n        const formData = new FormData();\n        allKeys.forEach(k => {\n          let v = fields[k as keyof EditDogFormData];\n          // Always send as string, even for 0, false, or empty\n          if (k === 'vaccinated' || k === 'neutered') {\n            formData.append(k, v ? 'true' : 'false');\n          } else if (typeof v === 'number') {\n            formData.append(k, String(v));\n          } else if (typeof v === 'boolean') {\n            formData.append(k, v ? 'true' : 'false');\n          } else if (typeof v !== 'undefined' && v !== null) {\n            formData.append(k, String(v));\n          } else {\n            formData.append(k, '');\n          }\n        });\n        formData.append('keepImages', JSON.stringify(keepImagesArr));\n        mediaFiles.forEach((file, idx) => {\n          formData.append('media', file, file.name);\n        });\n        const headers: any = {};\n        if (token) headers['Authorization'] = `Bearer ${token}`;\n        try {\n          resp = await fetch(`${API_URL}/api/dogs/${dog._id}`, {\n            method: 'PATCH',\n            body: formData,\n            headers\n          });\n        } catch (fetchErr) {\n          if (isMounted.current) {\n            // Error: Failed to upload images. Please check your connection or try again.\n          }\n          return;\n        }\n      } else {\n        const bodyData: any = {};\n        allKeys.forEach(k => {\n          let v = fields[k as keyof EditDogFormData];\n          if (k === 'vaccinated' || k === 'neutered') {\n            bodyData[k] = v ? true : false;\n          } else if (typeof v !== 'undefined' && v !== null) {\n            bodyData[k] = v;\n          } else {\n            bodyData[k] = '';\n          }\n        });\n        // Always include keepImages in JSON PATCH\n        bodyData.keepImages = existingImages.map(img => img.url);\n        const headers: any = { 'Content-Type': 'application/json' };\n        if (token) headers['Authorization'] = `Bearer ${token}`;\n        resp = await fetch(`${API_URL}/api/dogs/${dog._id}`, {\n          method: 'PATCH',\n          headers,\n          body: JSON.stringify(bodyData)\n        });\n      }\n      if (!resp.ok) {\n        const errData = await resp.json().catch(() => ({}));\n        throw new Error(errData.message || 'Failed to update dog');\n      }\n      // Always fetch the latest dog data after update (not just PATCH response)\n      let updatedDog = null;\n      try {\n        const respData = await resp.json();\n        updatedDog = respData.dog || respData;\n      } catch (e) {\n        updatedDog = null;\n      }\n      // Defensive: fetch latest from backend in case PATCH response is stale\n      if (updatedDog && updatedDog._id) {\n        try {\n          const latestResp = await fetch(`${API_URL}/api/dogs/${updatedDog._id}`);\n          if (latestResp.ok) {\n            updatedDog = await latestResp.json();\n          }\n        } catch {}\n      }\n      if (isMounted.current && updatedDog) {\n        setExistingImages(updatedDog.images ? [...updatedDog.images] : []);\n        setMediaFiles([]);\n        setMediaPreviews([]);\n        onSave(updatedDog);\n        onClose();\n      }\n    } catch (err: any) {\n      if (!isMounted.current) return;\n      if (mediaFiles.length > 0 && (err.message === 'Failed to fetch' || err.message === 'NetworkError when attempting to fetch resource.')) {\n        // Error: Failed to upload images. Please check your connection or try again.\n      } else {\n        // Error: Failed to update dog\n      }\n    } finally {\n      // if (isMounted.current) setSubmitting(false); // Removed unused state\n    }\n  };\n\n  return (\n    <div \n      className=\"edit-modal-overlay\"\n      style={{\n        position: 'fixed',\n        top: 0,\n        left: 0,\n        width: '100vw',\n        height: '100vh',\n        backgroundColor: 'rgba(0, 0, 0, 0.8)',\n        zIndex: 2147483647,\n        display: 'flex',\n        alignItems: window.innerWidth > 768 ? 'center' : 'stretch',\n        justifyContent: 'center',\n        padding: window.innerWidth > 768 ? '2rem' : '0',\n        boxSizing: 'border-box'\n      }}\n      onClick={(e) => {\n        if (e.target === e.currentTarget) {\n          onClose();\n        }\n      }}\n    >\n      <div \n        style={{\n          backgroundColor: 'white',\n          borderRadius: window.innerWidth > 768 ? '12px' : '0',\n          padding: '1.5rem',\n          paddingTop: window.innerWidth > 768 ? '1.5rem' : '3.5rem',\n          paddingBottom: window.innerWidth > 768 ? '1.5rem' : '6rem',\n          width: window.innerWidth > 768 ? '100%' : '100vw',\n          height: window.innerWidth > 768 ? 'auto' : '100vh',\n\n          maxWidth: window.innerWidth > 768 ? '600px' : '100vw',\n          maxHeight: window.innerWidth > 768 ? '90vh' : '100vh',\n          overflowY: 'auto',\n          WebkitOverflowScrolling: 'touch',\n          position: 'relative',\n          zIndex: 2147483647,\n        }}\n      >\n        <button \n          className=\"editdog-close-btn\"\n          onClick={onClose}\n        >\n          &times;\n        </button>\n        <h2 style={{ \n          marginBottom: '1rem',\n          position: window.innerWidth <= 768 ? 'sticky' : 'static',\n          top: window.innerWidth <= 768 ? '0' : 'auto',\n          backgroundColor: 'white',\n          zIndex: 100,\n          paddingTop: window.innerWidth <= 768 ? '0.5rem' : '0'\n        }}>{t('editdog.title', { name: dog.name })}</h2>\n        <form \n          onSubmit={handleSubmit(onSubmit)}\n          style={{\n            display: 'flex',\n            flexDirection: 'column',\n            gap: '1rem'\n          }}\n        >\n          {/* Dog fields */}\n          <label>{t('adddog.name')}</label>\n          <input\n            name=\"name\"\n            defaultValue={dog.name || ''}\n            onChange={e => setValue('name', e.target.value)}\n            required\n            style={{ padding: '0.5rem', borderRadius: 6, border: '1px solid #ccc' }}\n          />\n\n          <label>{t('adddog.breed')}</label>\n          <input\n            name=\"breed\"\n            defaultValue={dog.breed || ''}\n            onChange={e => setValue('breed', e.target.value)}\n            style={{ padding: '0.5rem', borderRadius: 6, border: '1px solid #ccc' }}\n          />\n\n          <label>{t('adddog.color')}</label>\n          <input\n            name=\"color\"\n            defaultValue={dog.color || ''}\n            onChange={e => setValue('color', e.target.value)}\n            style={{ padding: '0.5rem', borderRadius: 6, border: '1px solid #ccc' }}\n          />\n\n          <label>{t('adddog.location')}</label>\n          <input\n            name=\"location\"\n            defaultValue={dog.location || ''}\n            onChange={e => setValue('location', e.target.value)}\n            style={{ padding: '0.5rem', borderRadius: 6, border: '1px solid #ccc' }}\n          />\n\n          <label>{t('adddog.age')}</label>\n          <input\n            name=\"age\"\n            type=\"number\"\n            min={0}\n            defaultValue={dog.age || ''}\n            onChange={e => setValue('age', e.target.value ? Number(e.target.value) : undefined)}\n            style={{ padding: '0.5rem', borderRadius: 6, border: '1px solid #ccc', width: 100 }}\n          />\n\n          <label>{t('adddog.size')}</label>\n          <input\n            name=\"size\"\n            defaultValue={dog.size || ''}\n            onChange={e => setValue('size', e.target.value)}\n            style={{ padding: '0.5rem', borderRadius: 6, border: '1px solid #ccc' }}\n          />\n\n\n          <label>{t('adddog.gender')}</label>\n          <div style={{ display: 'flex', gap: 24, alignItems: 'center', marginBottom: 8 }}>\n            <label className=\"editdog-radio-label\" style={{ fontSize: '1.1rem', fontWeight: 500 }}>\n              <input\n                type=\"radio\"\n                name=\"gender\"\n                className=\"editdog-radio\"\n                checked={dog.gender === 'male'}\n                onChange={() => setValue('gender', 'male')}\n              />\n              <span className=\"editdog-radio-custom\" /> \n              {t('adddog.male').replace('adddog.', '')}\n            </label>\n            <label className=\"editdog-radio-label\" style={{ fontSize: '1.1rem', fontWeight: 500 }}>\n              <input\n                type=\"radio\"\n                name=\"gender\"\n                className=\"editdog-radio\"\n                checked={dog.gender === 'female'}\n                onChange={() => setValue('gender', 'female')}\n              />\n              <span className=\"editdog-radio-custom\" /> \n              {t('adddog.female').replace('adddog.', '')}\n            </label>\n          </div>\n\n          <div style={{ display: 'flex', gap: 24, alignItems: 'center', marginBottom: 8 }}>\n            <label className=\"editdog-checkbox-label\">\n              <input\n                type=\"checkbox\"\n                name=\"vaccinated\"\n                className=\"editdog-checkbox\"\n                checked={!!dog.vaccinated}\n                onChange={e => setValue('vaccinated', e.target.checked)}\n              />\n              <span className=\"editdog-checkbox-custom\" />\n              {t('adddog.vaccinated')}\n            </label>\n            <label className=\"editdog-checkbox-label\">\n              <input\n                type=\"checkbox\"\n                name=\"neutered\"\n                className=\"editdog-checkbox\"\n                checked={!!dog.neutered}\n                onChange={e => setValue('neutered', e.target.checked)}\n              />\n              <span className=\"editdog-checkbox-custom\" />\n              {t('adddog.neutered')}\n            </label>\n          </div>\n\n          <label>{t('adddog.description')}</label>\n          <textarea\n            name=\"description\"\n            defaultValue={dog.description || ''}\n            onChange={e => setValue('description', e.target.value)}\n            rows={3}\n            style={{ padding: '0.5rem', borderRadius: 6, border: '1px solid #ccc', resize: 'vertical' }}\n          />\n\n          {/* Media preview and upload */}\n          <label>{t('adddog.media')}</label>\n          <div className=\"media-input-row\">\n            <input\n              id=\"editdog-media\"\n              name=\"media\"\n              type=\"file\"\n              accept=\"image/*\"\n              multiple\n              onChange={e => {\n                const files = Array.from(e.target.files || []);\n                setMediaFiles(prev => [...prev, ...files]);\n                setMediaPreviews(prev => [...prev, ...files.map(f => URL.createObjectURL(f))]);\n              }}\n            />\n            {mediaPreviews.length > 0 && (\n              <button \n                type=\"button\" \n                onClick={() => {\n                  setMediaFiles([]);\n                  setMediaPreviews([]);\n                }}\n                className=\"editdog-reset-photos-btn\"\n              >\n                {t('editdog.resetPhotos').replace('editdog.', '').replace('adddog.', '')}\n              </button>\n            )}\n            <div>\n              {mediaPreviews.length > 0 ? (\n                <>\n                  <p style={{ margin: '0.5rem 0', color: '#e67e22', fontSize: '0.95rem', fontWeight: 'bold' }}>\n                    {t('editdog.newPhotos').replace('editdog.', '').replace('adddog.', '')}\n                  </p>\n                  <div className=\"media-preview-list\" style={{ display: 'flex', gap: 8, flexWrap: 'wrap' }}>\n                    {mediaPreviews.map((url, idx) => (\n                      <img\n                        key={idx}\n                        src={url}\n                        alt={`preview-${idx}`}\n                        width={window.innerWidth <= 768 ? 120 : 80}\n                        style={{ borderRadius: 8, marginTop: window.innerWidth <= 768 ? 12 : 0, objectFit: 'cover', height: 80 }}\n                      />\n                    ))}\n                  </div>\n                </>\n              ) : existingImages.length > 0 ? (\n                <>\n                  <p style={{ margin: '0.5rem 0', color: '#666', fontSize: '0.9rem' }}>\n                    {t('editdog.currentPhotos').replace('editdog.', '').replace('adddog.', '')}\n                  </p>\n                  <div className=\"media-preview-list\" style={{ display: 'flex', gap: 8, flexWrap: 'wrap' }}>\n                    {existingImages.map((img: any, idx: number) => (\n                      <span key={idx} style={{ position: 'relative', display: 'inline-block', marginRight: 8 }}>\n                        <img src={getImageUrl(img.url)} alt={`img-${idx}`} width={window.innerWidth <= 768 ? 120 : 80} style={{ borderRadius: 8, marginTop: window.innerWidth <= 768 ? 12 : 0, objectFit: 'cover', height: 80, opacity: selectedToDelete.has(idx) ? 0.5 : 1 }} />\n                        <input\n                          type=\"checkbox\"\n                          checked={selectedToDelete.has(idx)}\n                          onChange={e => {\n                            setSelectedToDelete(prev => {\n                              const next = new Set(prev);\n                              if (e.target.checked) next.add(idx);\n                              else next.delete(idx);\n                              return next;\n                            });\n                          }}\n                          style={{ position: 'absolute', top: 4, left: 4, zIndex: 3, width: 22, height: 22, accentColor: '#e74c3c', background: '#fff', border: '2px solid #e74c3c', borderRadius: 6, boxShadow: '0 2px 8px rgba(0,0,0,0.12)' }}\n                          title={selectedToDelete.has(idx) ? t('editdog.selectedToDelete').replace('editdog.', '').replace('adddog.', '') : t('editdog.selectToDelete').replace('editdog.', '').replace('adddog.', '')}\n                        />\n                        <button\n                          type=\"button\"\n                          style={{ position: 'absolute', top: 4, right: 4, background: '#e74c3c', color: '#fff', border: 'none', borderRadius: '50%', width: 22, height: 22, minWidth: 22, minHeight: 22, maxWidth: 22, maxHeight: 22, cursor: 'pointer', fontWeight: 'bold', fontSize: 16, lineHeight: '22px', padding: 0, display: 'flex', alignItems: 'center', justifyContent: 'center', boxShadow: '0 2px 8px rgba(0,0,0,0.12)' }}\n                          onClick={() => {\n                            setExistingImages(existingImages.filter((_, i) => i !== idx));\n                            setSelectedToDelete(prev => {\n                              const next = new Set(prev);\n                              next.delete(idx);\n                              // Shift all indices above idx down by 1\n                              const shifted = new Set<number>();\n                              next.forEach(i => shifted.add(i > idx ? i - 1 : i));\n                              return shifted;\n                            });\n                          }}\n                          title={t('editdog.deleteThisImage').replace('editdog.', '').replace('adddog.', '')}\n                        >\n                          &times;\n                        </button>\n                        {window.innerWidth <= 768 && (\n                          <span style={{ position: 'absolute', bottom: 4, left: 4, background: 'rgba(255,255,255,0.85)', color: '#e74c3c', fontWeight: 'bold', fontSize: 12, borderRadius: 4, padding: '2px 6px', zIndex: 4 }}>\n                            {selectedToDelete.has(idx) ? t('editdog.selectedToDelete').replace('editdog.', '').replace('adddog.', '') : t('editdog.tapToRemove').replace('editdog.', '').replace('adddog.', '')}\n                          </span>\n                        )}\n                      </span>\n                    ))}\n                  </div>\n                </>\n              ) : null}\n              {existingImages.length > 0 && (\n                <div style={{ display: 'flex', gap: 8, marginTop: 8 }}>\n                  <button\n                    type=\"button\"\n                    style={{ background: '#e74c3c', color: '#fff', border: 'none', borderRadius: 6, padding: '0.5rem 1rem', cursor: 'pointer', fontWeight: 'bold' }}\n                    disabled={selectedToDelete.size === 0}\n                    onClick={() => {\n                      setExistingImages(existingImages.filter((_, i) => !selectedToDelete.has(i)));\n                      setSelectedToDelete(new Set());\n                    }}\n                  >\n                    {t('editdog.deleteSelected').replace('editdog.', '').replace('adddog.', '')}\n                  </button>\n                  <button\n                    type=\"button\"\n                    style={{ background: '#e67e22', color: '#fff', border: 'none', borderRadius: 6, padding: '0.5rem 1rem', cursor: 'pointer', fontWeight: 'bold' }}\n                    onClick={() => {\n                      setExistingImages([]);\n                      setSelectedToDelete(new Set());\n                    }}\n                  >\n                    {t('editdog.deleteAll').replace('editdog.', '').replace('adddog.', '')}\n                  </button>\n                </div>\n              )}\n              {existingImages.length === 0 && mediaPreviews.length === 0 && (\n                <p style={{ margin: '0.5rem 0', color: '#999', fontSize: '0.9rem' }}>\n                  {t('editdog.noPhotos').replace('editdog.', '').replace('adddog.', '')}\n                </p>\n              )}\n            </div>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n}\n\nexport default EditDogModal;\n\n\n\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}