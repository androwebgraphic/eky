{"ast":null,"code":"var _jsxFileName = \"/Applications/MAMP/htdocs/eky/client/src/components/UserProfileModal.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { useAuth } from '../contexts/AuthContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst UserProfileModal = _ref => {\n  _s();\n  let {\n    isOpen,\n    onClose\n  } = _ref;\n  const {\n    user,\n    token,\n    logout,\n    updateUser,\n    getWishlist,\n    removeFromWishlist\n  } = useAuth();\n  const {\n    t\n  } = useTranslation();\n  const [isEditing, setIsEditing] = useState(false);\n  const [activeTab, setActiveTab] = useState('profile');\n  const [wishlist, setWishlist] = useState([]);\n  const [loadingWishlist, setLoadingWishlist] = useState(false);\n  const [profilePicture, setProfilePicture] = useState(null);\n  const [profilePicturePreview, setProfilePicturePreview] = useState('');\n  const [formData, setFormData] = useState({\n    name: (user === null || user === void 0 ? void 0 : user.name) || '',\n    email: (user === null || user === void 0 ? void 0 : user.email) || '',\n    username: (user === null || user === void 0 ? void 0 : user.username) || '',\n    phone: (user === null || user === void 0 ? void 0 : user.phone) || ''\n  });\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [success, setSuccess] = useState(null);\n\n  // Load wishlist when modal opens and wishlist tab is active\n  React.useEffect(() => {\n    if (isOpen && activeTab === 'wishlist') {\n      loadWishlist();\n    }\n    // Reset form data when modal opens\n    if (isOpen && user) {\n      setFormData({\n        name: user.name || '',\n        email: user.email || '',\n        username: user.username || '',\n        phone: user.phone || ''\n      });\n      setProfilePicture(null);\n      setProfilePicturePreview('');\n      setError(null);\n      setSuccess(null);\n    }\n  }, [isOpen, activeTab, user]); // Added loadWishlist dependency is handled by calling it directly\n\n  // Handle escape key to close modal\n  React.useEffect(() => {\n    const handleEscapeKey = event => {\n      if (event.key === 'Escape' && isOpen) {\n        console.log('Escape key pressed, closing modal');\n        handleModalClose();\n      }\n    };\n    if (isOpen) {\n      document.addEventListener('keydown', handleEscapeKey);\n      return () => {\n        document.removeEventListener('keydown', handleEscapeKey);\n      };\n    }\n  }, [isOpen]);\n\n  // Reset state when modal closes\n  React.useEffect(() => {\n    if (!isOpen) {\n      setIsEditing(false);\n      setActiveTab('profile');\n      setError(null);\n      setSuccess(null);\n      setLoading(false);\n    }\n  }, [isOpen]);\n  const handleModalClose = () => {\n    console.log('handleModalClose called');\n    setIsEditing(false);\n    setError(null);\n    setSuccess(null);\n    onClose();\n  };\n  const loadWishlist = React.useCallback(async () => {\n    setLoadingWishlist(true);\n    const wishlistData = await getWishlist();\n    setWishlist(wishlistData);\n    setLoadingWishlist(false);\n  }, [getWishlist]);\n\n  // Don't render if modal is not open - MOVED AFTER ALL HOOKS\n  if (!isOpen) {\n    return null;\n  }\n  const handleAdopt = async dogId => {\n    // This could be expanded to actually handle adoption process\n    alert(`Adoption request sent for dog ${dogId}! The owner will be contacted.`);\n  };\n  const handleProfilePictureChange = e => {\n    var _e$target$files;\n    const file = (_e$target$files = e.target.files) === null || _e$target$files === void 0 ? void 0 : _e$target$files[0];\n    if (file) {\n      setProfilePicture(file);\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        setProfilePicturePreview(reader.result);\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n  const handlePasswordReset = async () => {\n    if (!(user !== null && user !== void 0 && user.email)) return;\n    try {\n      const API_URL = getApiUrl();\n      const response = await fetch(`${API_URL}/api/users/password-reset`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          email: user.email\n        })\n      });\n      const data = await response.json();\n      if (response.ok) {\n        setSuccess('Password reset link sent to your email!');\n        setError(null);\n      } else {\n        setError(data.message || 'Failed to send password reset email');\n        setSuccess(null);\n      }\n    } catch (error) {\n      console.error('Password reset error:', error);\n      setError('Network error. Please try again.');\n      setSuccess(null);\n    }\n  };\n\n  // Get API URL based on environment\n  const getApiUrl = () => {\n    if (process.env.REACT_APP_API_URL) return process.env.REACT_APP_API_URL;\n    if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {\n      return `http://${window.location.hostname}:3001`;\n    }\n    return `http://172.20.10.2:3001`;\n  };\n  const handleInputChange = e => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value\n    });\n  };\n  const handleUpdateProfile = async e => {\n    e.preventDefault();\n    setLoading(true);\n    setError(null);\n    setSuccess(null);\n    try {\n      const API_URL = getApiUrl();\n\n      // Create FormData for file upload\n      const uploadFormData = new FormData();\n      uploadFormData.append('name', formData.name);\n      uploadFormData.append('username', formData.username);\n      uploadFormData.append('email', formData.email);\n      uploadFormData.append('phone', formData.phone);\n\n      // Add profile picture if selected\n      if (profilePicture) {\n        uploadFormData.append('profilePicture', profilePicture);\n        console.log('Profile picture selected:', profilePicture.name, profilePicture.size, profilePicture.type);\n      }\n      console.log('Updating profile with form data:', {\n        name: formData.name,\n        username: formData.username,\n        email: formData.email,\n        hasProfilePicture: !!profilePicture\n      });\n      const response = await fetch(`${API_URL}/api/users/profile`, {\n        method: 'PUT',\n        headers: {\n          'Authorization': `Bearer ${token}`\n        },\n        body: uploadFormData\n      });\n      console.log('Response status:', response.status);\n      const data = await response.json();\n      console.log('Server response:', data);\n      if (response.ok) {\n        setSuccess('Profile updated successfully!');\n\n        // Update both localStorage and AuthContext with new user data\n        const updatedUser = {\n          ...user,\n          name: data.user.name,\n          username: data.user.username,\n          email: data.user.email,\n          phone: data.user.phone,\n          ...(data.user.profilePicture && {\n            profilePicture: data.user.profilePicture\n          })\n        };\n        console.log('Updated user data:', updatedUser);\n        console.log('Profile picture URL:', data.user.profilePicture);\n        updateUser(updatedUser);\n\n        // Reset profile picture state but keep the new image visible\n        setProfilePicture(null);\n        setProfilePicturePreview('');\n\n        // Update form data to reflect changes\n        setFormData({\n          name: data.user.name,\n          email: data.user.email,\n          username: data.user.username,\n          phone: data.user.phone || ''\n        });\n\n        // Close editing mode after successful update\n        setTimeout(() => {\n          setIsEditing(false);\n        }, 100);\n      } else {\n        console.error('Profile update failed:', data);\n        setError(data.message || 'Failed to update profile');\n      }\n    } catch (error) {\n      console.error('Profile update error:', error);\n      setError('Network error. Please try again.');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleDeleteAccount = async () => {\n    if (!window.confirm('Are you sure you want to delete your account? This action cannot be undone.')) {\n      return;\n    }\n    setLoading(true);\n    setError(null);\n    try {\n      const API_URL = getApiUrl();\n      const response = await fetch(`${API_URL}/api/users/profile`, {\n        method: 'DELETE',\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      if (response.ok) {\n        logout();\n        onClose();\n        alert('Account deleted successfully');\n      } else {\n        const data = await response.json();\n        setError(data.message || 'Failed to delete account');\n      }\n    } catch (error) {\n      setError('Network error. Please try again.');\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      position: 'fixed',\n      top: 0,\n      left: 0,\n      width: '100%',\n      height: '100%',\n      backgroundColor: 'rgba(0, 0, 0, 0.5)',\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center',\n      zIndex: 1000\n    },\n    onClick: e => {\n      // Close modal when clicking on backdrop\n      if (e.target === e.currentTarget) {\n        console.log('Backdrop clicked, closing modal');\n        handleModalClose();\n      }\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        backgroundColor: 'white',\n        borderRadius: '8px',\n        padding: '24px',\n        maxWidth: '500px',\n        width: '90%',\n        maxHeight: '80vh',\n        overflowY: 'auto',\n        boxShadow: '0 4px 6px rgba(0, 0, 0, 0.1)'\n      },\n      onClick: e => {\n        // Prevent modal from closing when clicking inside the modal\n        e.stopPropagation();\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          justifyContent: 'space-between',\n          alignItems: 'center',\n          marginBottom: '20px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          style: {\n            margin: 0,\n            color: '#333'\n          },\n          children: t('userProfile.title')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 349,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: e => {\n            e.preventDefault();\n            e.stopPropagation();\n            console.log('Close button clicked');\n            handleModalClose();\n          },\n          style: {\n            background: 'none',\n            border: 'none',\n            fontSize: '24px',\n            cursor: 'pointer',\n            color: '#666',\n            padding: '5px',\n            borderRadius: '50%',\n            width: '32px',\n            height: '32px',\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center'\n          },\n          type: \"button\",\n          children: \"\\xD7\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 350,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 348,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          marginBottom: '20px',\n          borderBottom: '1px solid #ddd'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setActiveTab('profile'),\n          style: {\n            padding: '10px 20px',\n            border: 'none',\n            background: activeTab === 'profile' ? '#2196F3' : 'transparent',\n            color: activeTab === 'profile' ? 'white' : '#666',\n            cursor: 'pointer',\n            borderRadius: '4px 4px 0 0',\n            marginRight: '5px'\n          },\n          children: t('userProfile.profileTab')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 379,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setActiveTab('wishlist'),\n          style: {\n            padding: '10px 20px',\n            border: 'none',\n            background: activeTab === 'wishlist' ? '#2196F3' : 'transparent',\n            color: activeTab === 'wishlist' ? 'white' : '#666',\n            cursor: 'pointer',\n            borderRadius: '4px 4px 0 0'\n          },\n          children: [t('userProfile.wishlistTab'), \" (\", wishlist.length, \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 393,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 378,\n        columnNumber: 9\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          backgroundColor: '#ffebee',\n          color: '#c62828',\n          padding: '12px',\n          borderRadius: '4px',\n          marginBottom: '16px'\n        },\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 409,\n        columnNumber: 11\n      }, this), success && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          backgroundColor: '#e8f5e8',\n          color: '#2e7d32',\n          padding: '12px',\n          borderRadius: '4px',\n          marginBottom: '16px'\n        },\n        children: success\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 421,\n        columnNumber: 11\n      }, this), activeTab === 'profile' && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginBottom: '20px'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              alignItems: 'center',\n              gap: '12px',\n              marginBottom: '20px'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: profilePicturePreview || (user !== null && user !== void 0 && user.profilePicture ? `${getApiUrl()}${user.profilePicture}` : \"../img/androcolored-80x80.jpg\"),\n              alt: \"Profile\",\n              style: {\n                width: '60px',\n                height: '60px',\n                borderRadius: '50%',\n                objectFit: 'cover',\n                border: '2px solid #ddd'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 437,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                style: {\n                  margin: '0 0 4px 0'\n                },\n                children: user.username\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 449,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  color: '#4CAF50',\n                  fontSize: '14px'\n                },\n                children: t('userProfile.online')\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 450,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 448,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 436,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 435,\n          columnNumber: 13\n        }, this), isEditing ? /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleUpdateProfile,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginBottom: '20px',\n              textAlign: 'center'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                marginBottom: '15px'\n              },\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: profilePicturePreview || (user !== null && user !== void 0 && user.profilePicture ? `${getApiUrl()}${user.profilePicture}` : \"../img/androcolored-80x80.jpg\"),\n                alt: \"Profile Picture\",\n                style: {\n                  width: '100px',\n                  height: '100px',\n                  borderRadius: '50%',\n                  objectFit: 'cover',\n                  border: '3px solid #ddd'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 460,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 459,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                marginBottom: '15px'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"file\",\n                accept: \"image/*\",\n                onChange: handleProfilePictureChange,\n                style: {\n                  display: 'none'\n                },\n                id: \"profilePictureInput\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 473,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"profilePictureInput\",\n                style: {\n                  display: 'inline-block',\n                  padding: '8px 16px',\n                  backgroundColor: '#f0f0f0',\n                  border: '1px solid #ddd',\n                  borderRadius: '20px',\n                  cursor: 'pointer',\n                  fontSize: '14px',\n                  color: '#333'\n                },\n                children: [\"\\uD83D\\uDCF7 \", t('userProfile.changePhoto')]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 480,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 472,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 458,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginBottom: '16px'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              style: {\n                display: 'block',\n                marginBottom: '4px',\n                fontWeight: 'bold'\n              },\n              children: t('userProfile.fullName')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 499,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              name: \"name\",\n              value: formData.name,\n              onChange: handleInputChange,\n              style: {\n                width: '100%',\n                padding: '8px 12px',\n                border: '1px solid #ddd',\n                borderRadius: '4px',\n                fontSize: '14px'\n              },\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 502,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 498,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginBottom: '16px'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              style: {\n                display: 'block',\n                marginBottom: '4px',\n                fontWeight: 'bold'\n              },\n              children: t('userProfile.email')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 519,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"email\",\n              name: \"email\",\n              value: formData.email,\n              onChange: handleInputChange,\n              style: {\n                width: '100%',\n                padding: '8px 12px',\n                border: '1px solid #ddd',\n                borderRadius: '4px',\n                fontSize: '14px'\n              },\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 522,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 518,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginBottom: '16px'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              style: {\n                display: 'block',\n                marginBottom: '4px',\n                fontWeight: 'bold'\n              },\n              children: t('userProfile.username')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 539,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              name: \"username\",\n              value: formData.username,\n              onChange: handleInputChange,\n              style: {\n                width: '100%',\n                padding: '8px 12px',\n                border: '1px solid #ddd',\n                borderRadius: '4px',\n                fontSize: '14px'\n              },\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 542,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 538,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginBottom: '16px'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              style: {\n                display: 'block',\n                marginBottom: '4px',\n                fontWeight: 'bold'\n              },\n              children: t('userProfile.phone')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 559,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"tel\",\n              name: \"phone\",\n              value: formData.phone,\n              onChange: handleInputChange,\n              style: {\n                width: '100%',\n                padding: '8px 12px',\n                border: '1px solid #ddd',\n                borderRadius: '4px',\n                fontSize: '14px'\n              },\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 562,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 558,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginBottom: '20px',\n              padding: '15px',\n              backgroundColor: '#f8f9fa',\n              borderRadius: '8px',\n              border: '1px solid #e9ecef'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              style: {\n                margin: '0 0 10px 0',\n                color: '#333',\n                fontSize: '16px'\n              },\n              children: t('userProfile.password')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 585,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                margin: '0 0 15px 0',\n                fontSize: '14px',\n                color: '#666'\n              },\n              children: t('userProfile.passwordInfo')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 586,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: handlePasswordReset,\n              style: {\n                padding: '8px 16px',\n                backgroundColor: '#6c757d',\n                color: 'white',\n                border: 'none',\n                borderRadius: '20px',\n                cursor: 'pointer',\n                fontSize: '14px',\n                fontWeight: '500'\n              },\n              children: [\"\\uD83D\\uDD11 \", t('userProfile.sendPasswordReset')]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 589,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 578,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              gap: '12px',\n              marginTop: '20px'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              disabled: loading,\n              style: {\n                padding: '10px 20px',\n                backgroundColor: '#4CAF50',\n                color: 'white',\n                border: 'none',\n                borderRadius: '4px',\n                cursor: loading ? 'not-allowed' : 'pointer',\n                opacity: loading ? 0.6 : 1\n              },\n              children: loading ? t('userProfile.saving') : t('userProfile.saveChanges')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 608,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: () => {\n                console.log('Cancel button clicked');\n                setIsEditing(false);\n              },\n              style: {\n                padding: '10px 20px',\n                backgroundColor: '#757575',\n                color: 'white',\n                border: 'none',\n                borderRadius: '4px',\n                cursor: 'pointer'\n              },\n              children: t('userProfile.cancel')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 623,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 607,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 456,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginBottom: '16px'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                fontWeight: 'bold',\n                fontSize: '1.1em'\n              },\n              children: [t('userProfile.fullName'), \":\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 645,\n              columnNumber: 19\n            }, this), \" \", user.name]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 644,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginBottom: '16px'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                fontWeight: 'bold',\n                fontSize: '1.1em'\n              },\n              children: [t('userProfile.email'), \":\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 648,\n              columnNumber: 19\n            }, this), \" \", user.email]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 647,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginBottom: '20px'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                fontWeight: 'bold',\n                fontSize: '1.1em'\n              },\n              children: [t('userProfile.username'), \":\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 651,\n              columnNumber: 19\n            }, this), \" \", user.username]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 650,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginBottom: '16px'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                fontWeight: 'bold',\n                fontSize: '1.1em'\n              },\n              children: [t('userProfile.phone'), \":\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 654,\n              columnNumber: 19\n            }, this), \" \", user.phone]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 653,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              gap: '12px',\n              flexWrap: 'wrap'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setIsEditing(true),\n              style: {\n                padding: '10px 20px',\n                backgroundColor: '#2196F3',\n                color: 'white',\n                border: 'none',\n                borderRadius: '4px',\n                cursor: 'pointer'\n              },\n              children: t('userProfile.editProfile')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 657,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleDeleteAccount,\n              disabled: loading,\n              style: {\n                padding: '10px 20px',\n                backgroundColor: '#f44336',\n                color: 'white',\n                border: 'none',\n                borderRadius: '4px',\n                cursor: loading ? 'not-allowed' : 'pointer',\n                opacity: loading ? 0.6 : 1\n              },\n              children: loading ? t('userProfile.deleting') : t('userProfile.deleteAccount')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 670,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 656,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 643,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true), activeTab === 'wishlist' && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            marginBottom: '20px',\n            fontSize: '1.2em'\n          },\n          children: [t('userProfile.myWishlist'), \" (\", wishlist.length, \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 694,\n          columnNumber: 13\n        }, this), loadingWishlist ? /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            textAlign: 'center',\n            padding: '40px',\n            fontSize: '1.1em'\n          },\n          children: t('userProfile.loadingWishlist')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 697,\n          columnNumber: 15\n        }, this) : wishlist.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            textAlign: 'center',\n            padding: '40px',\n            color: '#666',\n            fontSize: '1.1em'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: t('userProfile.emptyWishlist')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 700,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: t('userProfile.emptyWishlistHint')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 701,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 699,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            maxHeight: '400px',\n            overflowY: 'auto'\n          },\n          children: wishlist.map(dog => {\n            var _dog$thumbnail, _dog$images, _dog$images$;\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                border: '1px solid #ddd',\n                borderRadius: '8px',\n                padding: '15px',\n                marginBottom: '15px',\n                display: 'flex',\n                gap: '15px',\n                alignItems: 'center'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: ((_dog$thumbnail = dog.thumbnail) === null || _dog$thumbnail === void 0 ? void 0 : _dog$thumbnail.url) || ((_dog$images = dog.images) === null || _dog$images === void 0 ? void 0 : (_dog$images$ = _dog$images[0]) === null || _dog$images$ === void 0 ? void 0 : _dog$images$.url) || '../img/placeholder-dog.jpg',\n                alt: dog.name,\n                style: {\n                  width: '60px',\n                  height: '60px',\n                  borderRadius: '8px',\n                  objectFit: 'cover'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 718,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  flex: 1\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                  style: {\n                    margin: '0 0 5px 0',\n                    color: '#333'\n                  },\n                  children: dog.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 729,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  style: {\n                    margin: '0 0 5px 0',\n                    fontSize: '14px',\n                    color: '#666'\n                  },\n                  children: [dog.breed, \" \\u2022 \", dog.age, \" years \\u2022 \", dog.size, \" \\u2022 \", dog.location || dog.place]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 730,\n                  columnNumber: 23\n                }, this), dog.description && /*#__PURE__*/_jsxDEV(\"p\", {\n                  style: {\n                    margin: '0',\n                    fontSize: '13px',\n                    color: '#888',\n                    maxWidth: '300px'\n                  },\n                  children: dog.description.length > 100 ? dog.description.substring(0, 100) + '...' : dog.description\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 734,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 728,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  display: 'flex',\n                  flexDirection: 'column',\n                  gap: '8px'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => {\n                    const adoptKey = t('userProfile.adopt');\n                    const fallbackAdopt = t('button.adopt');\n                    // eslint-disable-next-line no-console\n                    console.log('[UserProfileModal] adoptKey:', adoptKey, '| fallback:', fallbackAdopt);\n                    handleAdopt(dog._id);\n                  },\n                  style: {\n                    padding: '8px 16px',\n                    backgroundColor: '#4CAF50',\n                    color: 'white',\n                    border: 'none',\n                    borderRadius: '4px',\n                    cursor: 'pointer',\n                    fontSize: '14px',\n                    whiteSpace: 'nowrap'\n                  },\n                  children: [\"\\uD83C\\uDFE0 \", (() => {\n                    const adoptKey = t('userProfile.adopt');\n                    const fallbackAdopt = t('button.adopt');\n                    // eslint-disable-next-line no-console\n                    console.log('[UserProfileModal][render] adoptKey:', adoptKey, '| fallback:', fallbackAdopt);\n                    return adoptKey !== 'userProfile.adopt' ? adoptKey : fallbackAdopt;\n                  })()]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 740,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: async () => {\n                    const removeKey = t('userProfile.remove');\n                    const fallbackRemove = t('button.removeFromList');\n                    // eslint-disable-next-line no-console\n                    console.log('[UserProfileModal] removeKey:', removeKey, '| fallback:', fallbackRemove);\n                    await removeFromWishlist(dog._id);\n                    await loadWishlist();\n                  },\n                  style: {\n                    padding: '6px 12px',\n                    backgroundColor: '#ff4444',\n                    color: 'white',\n                    border: 'none',\n                    borderRadius: '4px',\n                    cursor: 'pointer',\n                    fontSize: '12px',\n                    whiteSpace: 'nowrap'\n                  },\n                  children: [\"\\uD83D\\uDC94 \", (() => {\n                    const removeKey = t('userProfile.remove');\n                    const fallbackRemove = t('button.removeFromList');\n                    // eslint-disable-next-line no-console\n                    console.log('[UserProfileModal][render] removeKey:', removeKey, '| fallback:', fallbackRemove);\n                    return removeKey !== 'userProfile.remove' ? removeKey : fallbackRemove;\n                  })()]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 767,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 739,\n                columnNumber: 21\n              }, this)]\n            }, dog._id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 706,\n              columnNumber: 19\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 704,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 693,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 332,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 311,\n    columnNumber: 5\n  }, this);\n};\n_s(UserProfileModal, \"jLsE/eQAUNFiJ50Sl8oXOF3lVk4=\", false, function () {\n  return [useAuth, useTranslation];\n});\n_c = UserProfileModal;\nexport default UserProfileModal;\nvar _c;\n$RefreshReg$(_c, \"UserProfileModal\");","map":{"version":3,"names":["React","useState","useTranslation","useAuth","UserProfileModal","isOpen","onClose","user","token","logout","updateUser","getWishlist","removeFromWishlist","t","isEditing","setIsEditing","activeTab","setActiveTab","wishlist","setWishlist","loadingWishlist","setLoadingWishlist","profilePicture","setProfilePicture","profilePicturePreview","setProfilePicturePreview","formData","setFormData","name","email","username","phone","loading","setLoading","error","setError","success","setSuccess","useEffect","loadWishlist","handleEscapeKey","event","key","console","log","handleModalClose","document","addEventListener","removeEventListener","useCallback","wishlistData","handleAdopt","dogId","alert","handleProfilePictureChange","e","file","target","files","reader","FileReader","onloadend","result","readAsDataURL","handlePasswordReset","API_URL","getApiUrl","response","fetch","method","headers","body","JSON","stringify","data","json","ok","message","process","env","REACT_APP_API_URL","window","location","hostname","handleInputChange","value","handleUpdateProfile","preventDefault","uploadFormData","FormData","append","size","type","hasProfilePicture","status","updatedUser","setTimeout","handleDeleteAccount","confirm","position","top","left","width","height","backgroundColor","display","alignItems","justifyContent","zIndex","currentTarget","borderRadius","padding","maxWidth","maxHeight","overflowY","boxShadow","stopPropagation","marginBottom","margin","color","background","border","fontSize","cursor","borderBottom","marginRight","length","gap","objectFit","textAlign","fontWeight","marginTop","opacity","flexWrap","map","dog","thumbnail","url","images","flex","breed","age","place","description","substring","flexDirection","adoptKey","fallbackAdopt","_id","whiteSpace","removeKey","fallbackRemove"],"sources":["/Applications/MAMP/htdocs/eky/client/src/components/UserProfileModal.tsx"],"sourcesContent":["interface User {\n  id?: string;\n  _id?: string;\n  email?: string;\n  username?: string;\n  name?: string;\n  phone?: string;\n}\ninterface User {\n  id?: string;\n  _id?: string;\n  email?: string;\n  username?: string;\n  name?: string;\n  phone?: string;\n}\ninterface User {\n  id?: string;\n  _id?: string;\n  email?: string;\n  username?: string;\n  name?: string;\n  phone?: string;\n}\nimport React, { useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { useAuth } from '../contexts/AuthContext';\n\ninterface User {\n  id?: string;\n  _id?: string;\n  email?: string;\n  username?: string;\n  name?: string;\n  phone?: string;\n}\n\ninterface UserProfileModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n}\n\nconst UserProfileModal: React.FC<UserProfileModalProps> = ({ isOpen, onClose }) => {\n  const { user, token, logout, updateUser, getWishlist, removeFromWishlist } = useAuth();\n  const { t } = useTranslation();\n  const [isEditing, setIsEditing] = useState(false);\n  const [activeTab, setActiveTab] = useState<'profile' | 'wishlist'>('profile');\n  const [wishlist, setWishlist] = useState<any[]>([]);\n  const [loadingWishlist, setLoadingWishlist] = useState(false);\n  const [profilePicture, setProfilePicture] = useState<File | null>(null);\n  const [profilePicturePreview, setProfilePicturePreview] = useState<string>('');\n  const [formData, setFormData] = useState({\n    name: user?.name || '',\n    email: user?.email || '',\n    username: user?.username || '',\n    phone: user?.phone || '',\n  });\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [success, setSuccess] = useState<string | null>(null);\n\n  // Load wishlist when modal opens and wishlist tab is active\n  React.useEffect(() => {\n    if (isOpen && activeTab === 'wishlist') {\n      loadWishlist();\n    }\n    // Reset form data when modal opens\n    if (isOpen && user) {\n      setFormData({\n        name: user.name || '',\n        email: user.email || '',\n        username: user.username || '',\n        phone: user.phone || '',\n      });\n      setProfilePicture(null);\n      setProfilePicturePreview('');\n      setError(null);\n      setSuccess(null);\n    }\n  }, [isOpen, activeTab, user]); // Added loadWishlist dependency is handled by calling it directly\n\n  // Handle escape key to close modal\n  React.useEffect(() => {\n    const handleEscapeKey = (event: KeyboardEvent) => {\n      if (event.key === 'Escape' && isOpen) {\n        console.log('Escape key pressed, closing modal');\n        handleModalClose();\n      }\n    };\n\n    if (isOpen) {\n      document.addEventListener('keydown', handleEscapeKey);\n      return () => {\n        document.removeEventListener('keydown', handleEscapeKey);\n      };\n    }\n  }, [isOpen]);\n\n  // Reset state when modal closes\n  React.useEffect(() => {\n    if (!isOpen) {\n      setIsEditing(false);\n      setActiveTab('profile');\n      setError(null);\n      setSuccess(null);\n      setLoading(false);\n    }\n  }, [isOpen]);\n\n  const handleModalClose = () => {\n    console.log('handleModalClose called');\n    setIsEditing(false);\n    setError(null);\n    setSuccess(null);\n    onClose();\n  };\n\n  const loadWishlist = React.useCallback(async () => {\n    setLoadingWishlist(true);\n    const wishlistData = await getWishlist();\n    setWishlist(wishlistData);\n    setLoadingWishlist(false);\n  }, [getWishlist]);\n\n  // Don't render if modal is not open - MOVED AFTER ALL HOOKS\n  if (!isOpen) {\n    return null;\n  }\n\n  const handleAdopt = async (dogId: string) => {\n    // This could be expanded to actually handle adoption process\n    alert(`Adoption request sent for dog ${dogId}! The owner will be contacted.`);\n  };\n\n  const handleProfilePictureChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (file) {\n      setProfilePicture(file);\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        setProfilePicturePreview(reader.result as string);\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n\n  const handlePasswordReset = async () => {\n    if (!user?.email) return;\n    \n    try {\n      const API_URL = getApiUrl();\n      const response = await fetch(`${API_URL}/api/users/password-reset`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ email: user.email }),\n      });\n\n      const data = await response.json();\n\n      if (response.ok) {\n        setSuccess('Password reset link sent to your email!');\n        setError(null);\n      } else {\n        setError(data.message || 'Failed to send password reset email');\n        setSuccess(null);\n      }\n    } catch (error) {\n      console.error('Password reset error:', error);\n      setError('Network error. Please try again.');\n      setSuccess(null);\n    }\n  };\n\n  // Get API URL based on environment\n  const getApiUrl = () => {\n    if (process.env.REACT_APP_API_URL) return process.env.REACT_APP_API_URL;\n    if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {\n      return `http://${window.location.hostname}:3001`;\n    }\n    return `http://172.20.10.2:3001`;\n  };\n\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  const handleUpdateProfile = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n    setError(null);\n    setSuccess(null);\n\n    try {\n      const API_URL = getApiUrl();\n      \n      // Create FormData for file upload\n      const uploadFormData = new FormData();\n      uploadFormData.append('name', formData.name);\n      uploadFormData.append('username', formData.username);\n      uploadFormData.append('email', formData.email);\n      uploadFormData.append('phone', formData.phone);\n      \n      // Add profile picture if selected\n      if (profilePicture) {\n        uploadFormData.append('profilePicture', profilePicture);\n        console.log('Profile picture selected:', profilePicture.name, profilePicture.size, profilePicture.type);\n      }\n      \n      console.log('Updating profile with form data:', {\n        name: formData.name,\n        username: formData.username,\n        email: formData.email,\n        hasProfilePicture: !!profilePicture\n      });\n      \n      const response = await fetch(`${API_URL}/api/users/profile`, {\n        method: 'PUT',\n        headers: {\n          'Authorization': `Bearer ${token}`\n        },\n        body: uploadFormData,\n      });\n\n      console.log('Response status:', response.status);\n      const data = await response.json();\n      console.log('Server response:', data);\n\n      if (response.ok) {\n        setSuccess('Profile updated successfully!');\n        \n        // Update both localStorage and AuthContext with new user data\n        const updatedUser = { \n          ...user, \n          name: data.user.name,\n          username: data.user.username,\n          email: data.user.email,\n          phone: data.user.phone,\n          ...(data.user.profilePicture && { profilePicture: data.user.profilePicture })\n        } as any;\n        \n        console.log('Updated user data:', updatedUser);\n        console.log('Profile picture URL:', data.user.profilePicture);\n        updateUser(updatedUser);\n        \n        // Reset profile picture state but keep the new image visible\n        setProfilePicture(null);\n        setProfilePicturePreview('');\n        \n        // Update form data to reflect changes\n        setFormData({\n          name: data.user.name,\n          email: data.user.email,\n          username: data.user.username,\n          phone: data.user.phone || ''\n        });\n        \n        // Close editing mode after successful update\n        setTimeout(() => {\n          setIsEditing(false);\n        }, 100);\n      } else {\n        console.error('Profile update failed:', data);\n        setError(data.message || 'Failed to update profile');\n      }\n    } catch (error) {\n      console.error('Profile update error:', error);\n      setError('Network error. Please try again.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleDeleteAccount = async () => {\n    if (!window.confirm('Are you sure you want to delete your account? This action cannot be undone.')) {\n      return;\n    }\n\n    setLoading(true);\n    setError(null);\n\n    try {\n      const API_URL = getApiUrl();\n      const response = await fetch(`${API_URL}/api/users/profile`, {\n        method: 'DELETE',\n        headers: {\n          'Authorization': `Bearer ${token}`\n        },\n      });\n\n      if (response.ok) {\n        logout();\n        onClose();\n        alert('Account deleted successfully');\n      } else {\n        const data = await response.json();\n        setError(data.message || 'Failed to delete account');\n      }\n    } catch (error) {\n      setError('Network error. Please try again.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div \n      style={{\n        position: 'fixed',\n        top: 0,\n        left: 0,\n        width: '100%',\n        height: '100%',\n        backgroundColor: 'rgba(0, 0, 0, 0.5)',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        zIndex: 1000\n      }}\n      onClick={(e) => {\n        // Close modal when clicking on backdrop\n        if (e.target === e.currentTarget) {\n          console.log('Backdrop clicked, closing modal');\n          handleModalClose();\n        }\n      }}\n    >\n      <div \n        style={{\n          backgroundColor: 'white',\n          borderRadius: '8px',\n          padding: '24px',\n          maxWidth: '500px',\n          width: '90%',\n          maxHeight: '80vh',\n          overflowY: 'auto',\n          boxShadow: '0 4px 6px rgba(0, 0, 0, 0.1)'\n        }}\n        onClick={(e) => {\n          // Prevent modal from closing when clicking inside the modal\n          e.stopPropagation();\n        }}\n      >\n        <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '20px' }}>\n          <h2 style={{ margin: 0, color: '#333' }}>{t('userProfile.title')}</h2>\n          <button\n            onClick={(e) => {\n              e.preventDefault();\n              e.stopPropagation();\n              console.log('Close button clicked');\n              handleModalClose();\n            }}\n            style={{\n              background: 'none',\n              border: 'none',\n              fontSize: '24px',\n              cursor: 'pointer',\n              color: '#666',\n              padding: '5px',\n              borderRadius: '50%',\n              width: '32px',\n              height: '32px',\n              display: 'flex',\n              alignItems: 'center',\n              justifyContent: 'center'\n            }}\n            type=\"button\"\n          >\n            \n          </button>\n        </div>\n\n        {/* Tab Navigation */}\n        <div style={{ display: 'flex', marginBottom: '20px', borderBottom: '1px solid #ddd' }}>\n          <button\n            onClick={() => setActiveTab('profile')}\n            style={{\n              padding: '10px 20px',\n              border: 'none',\n              background: activeTab === 'profile' ? '#2196F3' : 'transparent',\n              color: activeTab === 'profile' ? 'white' : '#666',\n              cursor: 'pointer',\n              borderRadius: '4px 4px 0 0',\n              marginRight: '5px'\n            }}\n          >\n            {t('userProfile.profileTab')}\n          </button>\n          <button\n            onClick={() => setActiveTab('wishlist')}\n            style={{\n              padding: '10px 20px',\n              border: 'none',\n              background: activeTab === 'wishlist' ? '#2196F3' : 'transparent',\n              color: activeTab === 'wishlist' ? 'white' : '#666',\n              cursor: 'pointer',\n              borderRadius: '4px 4px 0 0'\n            }}\n          >\n            {t('userProfile.wishlistTab')} ({wishlist.length})\n          </button>\n        </div>\n\n        {error && (\n          <div style={{\n            backgroundColor: '#ffebee',\n            color: '#c62828',\n            padding: '12px',\n            borderRadius: '4px',\n            marginBottom: '16px'\n          }}>\n            {error}\n          </div>\n        )}\n\n        {success && (\n          <div style={{\n            backgroundColor: '#e8f5e8',\n            color: '#2e7d32',\n            padding: '12px',\n            borderRadius: '4px',\n            marginBottom: '16px'\n          }}>\n            {success}\n          </div>\n        )}\n\n        {/* Profile Tab Content */}\n        {activeTab === 'profile' && (\n          <>\n            <div style={{ marginBottom: '20px' }}>\n              <div style={{ display: 'flex', alignItems: 'center', gap: '12px', marginBottom: '20px' }}>\n                <img \n                  src={profilePicturePreview || ((user as any)?.profilePicture ? `${getApiUrl()}${(user as any).profilePicture}` : \"../img/androcolored-80x80.jpg\")} \n                  alt=\"Profile\" \n                  style={{ \n                    width: '60px', \n                    height: '60px', \n                    borderRadius: '50%',\n                    objectFit: 'cover',\n                    border: '2px solid #ddd'\n                  }}\n                />\n                <div>\n                  <h3 style={{ margin: '0 0 4px 0' }}>{user.username}</h3>\n                  <span style={{ color: '#4CAF50', fontSize: '14px' }}>{t('userProfile.online')}</span>\n                </div>\n              </div>\n            </div>\n\n            {isEditing ? (\n              <form onSubmit={handleUpdateProfile}>\n                {/* Profile Picture Section */}\n                <div style={{ marginBottom: '20px', textAlign: 'center' }}>\n                  <div style={{ marginBottom: '15px' }}>\n                    <img \n                      src={profilePicturePreview || ((user as any)?.profilePicture ? `${getApiUrl()}${(user as any).profilePicture}` : \"../img/androcolored-80x80.jpg\")} \n                      alt=\"Profile Picture\" \n                      style={{ \n                        width: '100px', \n                        height: '100px', \n                        borderRadius: '50%', \n                        objectFit: 'cover',\n                        border: '3px solid #ddd'\n                      }} \n                    />\n                  </div>\n                  <div style={{ marginBottom: '15px' }}>\n                    <input\n                      type=\"file\"\n                      accept=\"image/*\"\n                      onChange={handleProfilePictureChange}\n                      style={{ display: 'none' }}\n                      id=\"profilePictureInput\"\n                    />\n                    <label \n                      htmlFor=\"profilePictureInput\"\n                      style={{\n                        display: 'inline-block',\n                        padding: '8px 16px',\n                        backgroundColor: '#f0f0f0',\n                        border: '1px solid #ddd',\n                        borderRadius: '20px',\n                        cursor: 'pointer',\n                        fontSize: '14px',\n                        color: '#333'\n                      }}\n                    >\n                       {t('userProfile.changePhoto')}\n                    </label>\n                  </div>\n                </div>\n\n                <div style={{ marginBottom: '16px' }}>\n                  <label style={{ display: 'block', marginBottom: '4px', fontWeight: 'bold' }}>\n                    {t('userProfile.fullName')}\n                  </label>\n                  <input\n                    type=\"text\"\n                    name=\"name\"\n                    value={formData.name}\n                    onChange={handleInputChange}\n                    style={{\n                      width: '100%',\n                      padding: '8px 12px',\n                      border: '1px solid #ddd',\n                      borderRadius: '4px',\n                      fontSize: '14px'\n                    }}\n                    required\n                  />\n                </div>\n\n                <div style={{ marginBottom: '16px' }}>\n                  <label style={{ display: 'block', marginBottom: '4px', fontWeight: 'bold' }}>\n                    {t('userProfile.email')}\n                  </label>\n                  <input\n                    type=\"email\"\n                    name=\"email\"\n                    value={formData.email}\n                    onChange={handleInputChange}\n                    style={{\n                      width: '100%',\n                      padding: '8px 12px',\n                      border: '1px solid #ddd',\n                      borderRadius: '4px',\n                      fontSize: '14px'\n                    }}\n                    required\n                  />\n                </div>\n\n                <div style={{ marginBottom: '16px' }}>\n                  <label style={{ display: 'block', marginBottom: '4px', fontWeight: 'bold' }}>\n                    {t('userProfile.username')}\n                  </label>\n                  <input\n                    type=\"text\"\n                    name=\"username\"\n                    value={formData.username}\n                    onChange={handleInputChange}\n                    style={{\n                      width: '100%',\n                      padding: '8px 12px',\n                      border: '1px solid #ddd',\n                      borderRadius: '4px',\n                      fontSize: '14px'\n                    }}\n                    required\n                  />\n                </div>\n\n                <div style={{ marginBottom: '16px' }}>\n                  <label style={{ display: 'block', marginBottom: '4px', fontWeight: 'bold' }}>\n                    {t('userProfile.phone')}\n                  </label>\n                  <input\n                    type=\"tel\"\n                    name=\"phone\"\n                    value={formData.phone}\n                    onChange={handleInputChange}\n                    style={{\n                      width: '100%',\n                      padding: '8px 12px',\n                      border: '1px solid #ddd',\n                      borderRadius: '4px',\n                      fontSize: '14px'\n                    }}\n                    required\n                  />\n                </div>\n                {/* Password Change Section */}\n                <div style={{ \n                  marginBottom: '20px', \n                  padding: '15px', \n                  backgroundColor: '#f8f9fa', \n                  borderRadius: '8px', \n                  border: '1px solid #e9ecef' \n                }}>\n                  <h4 style={{ margin: '0 0 10px 0', color: '#333', fontSize: '16px' }}>{t('userProfile.password')}</h4>\n                  <p style={{ margin: '0 0 15px 0', fontSize: '14px', color: '#666' }}>\n                    {t('userProfile.passwordInfo')}\n                  </p>\n                  <button\n                    type=\"button\"\n                    onClick={handlePasswordReset}\n                    style={{\n                      padding: '8px 16px',\n                      backgroundColor: '#6c757d',\n                      color: 'white',\n                      border: 'none',\n                      borderRadius: '20px',\n                      cursor: 'pointer',\n                      fontSize: '14px',\n                      fontWeight: '500'\n                    }}\n                  >\n                     {t('userProfile.sendPasswordReset')}\n                  </button>\n                </div>\n\n                <div style={{ display: 'flex', gap: '12px', marginTop: '20px' }}>\n                  <button\n                    type=\"submit\"\n                    disabled={loading}\n                    style={{\n                      padding: '10px 20px',\n                      backgroundColor: '#4CAF50',\n                      color: 'white',\n                      border: 'none',\n                      borderRadius: '4px',\n                      cursor: loading ? 'not-allowed' : 'pointer',\n                      opacity: loading ? 0.6 : 1\n                    }}\n                  >\n                    {loading ? t('userProfile.saving') : t('userProfile.saveChanges')}\n                  </button>\n                  <button\n                    type=\"button\"\n                    onClick={() => {\n                      console.log('Cancel button clicked');\n                      setIsEditing(false);\n                    }}\n                    style={{\n                      padding: '10px 20px',\n                      backgroundColor: '#757575',\n                      color: 'white',\n                      border: 'none',\n                      borderRadius: '4px',\n                      cursor: 'pointer'\n                    }}\n                  >\n                    {t('userProfile.cancel')}\n                  </button>\n                </div>\n              </form>\n            ) : (\n              <div>\n                <div style={{ marginBottom: '16px' }}>\n                  <span style={{ fontWeight: 'bold', fontSize: '1.1em' }}>{t('userProfile.fullName')}:</span> {user.name}\n                </div>\n                <div style={{ marginBottom: '16px' }}>\n                  <span style={{ fontWeight: 'bold', fontSize: '1.1em' }}>{t('userProfile.email')}:</span> {user.email}\n                </div>\n                <div style={{ marginBottom: '20px' }}>\n                  <span style={{ fontWeight: 'bold', fontSize: '1.1em' }}>{t('userProfile.username')}:</span> {user.username}\n                </div>\n                <div style={{ marginBottom: '16px' }}>\n                  <span style={{ fontWeight: 'bold', fontSize: '1.1em' }}>{t('userProfile.phone')}:</span> {user.phone}\n                </div>\n                <div style={{ display: 'flex', gap: '12px', flexWrap: 'wrap' }}>\n                  <button\n                    onClick={() => setIsEditing(true)}\n                    style={{\n                      padding: '10px 20px',\n                      backgroundColor: '#2196F3',\n                      color: 'white',\n                      border: 'none',\n                      borderRadius: '4px',\n                      cursor: 'pointer'\n                    }}\n                  >\n                    {t('userProfile.editProfile')}\n                  </button>\n                  <button\n                    onClick={handleDeleteAccount}\n                    disabled={loading}\n                    style={{\n                      padding: '10px 20px',\n                      backgroundColor: '#f44336',\n                      color: 'white',\n                      border: 'none',\n                      borderRadius: '4px',\n                      cursor: loading ? 'not-allowed' : 'pointer',\n                      opacity: loading ? 0.6 : 1\n                    }}\n                  >\n                    {loading ? t('userProfile.deleting') : t('userProfile.deleteAccount')}\n                  </button>\n                </div>\n              </div>\n            )}\n          </>\n        )}\n\n        {/* Wishlist Tab Content */}\n        {activeTab === 'wishlist' && (\n          <div>\n            <h3 style={{ marginBottom: '20px', fontSize: '1.2em' }}>{t('userProfile.myWishlist')} ({wishlist.length})</h3>\n            \n            {loadingWishlist ? (\n              <div style={{ textAlign: 'center', padding: '40px', fontSize: '1.1em' }}>{t('userProfile.loadingWishlist')}</div>\n            ) : wishlist.length === 0 ? (\n              <div style={{ textAlign: 'center', padding: '40px', color: '#666', fontSize: '1.1em' }}>\n                <p>{t('userProfile.emptyWishlist')}</p>\n                <p>{t('userProfile.emptyWishlistHint')}</p>\n              </div>\n            ) : (\n              <div style={{ maxHeight: '400px', overflowY: 'auto' }}>\n                {wishlist.map((dog: any) => (\n                  <div \n                    key={dog._id}\n                    style={{\n                      border: '1px solid #ddd',\n                      borderRadius: '8px',\n                      padding: '15px',\n                      marginBottom: '15px',\n                      display: 'flex',\n                      gap: '15px',\n                      alignItems: 'center'\n                    }}\n                  >\n                    <img \n                      src={dog.thumbnail?.url || dog.images?.[0]?.url || '../img/placeholder-dog.jpg'}\n                      alt={dog.name}\n                      style={{\n                        width: '60px',\n                        height: '60px',\n                        borderRadius: '8px',\n                        objectFit: 'cover'\n                      }}\n                    />\n                    <div style={{ flex: 1 }}>\n                      <h4 style={{ margin: '0 0 5px 0', color: '#333' }}>{dog.name}</h4>\n                      <p style={{ margin: '0 0 5px 0', fontSize: '14px', color: '#666' }}>\n                        {dog.breed}  {dog.age} years  {dog.size}  {dog.location || dog.place}\n                      </p>\n                      {dog.description && (\n                        <p style={{ margin: '0', fontSize: '13px', color: '#888', maxWidth: '300px' }}>\n                          {dog.description.length > 100 ? dog.description.substring(0, 100) + '...' : dog.description}\n                        </p>\n                      )}\n                    </div>\n                    <div style={{ display: 'flex', flexDirection: 'column', gap: '8px' }}>\n                      <button\n                        onClick={() => {\n                          const adoptKey = t('userProfile.adopt');\n                          const fallbackAdopt = t('button.adopt');\n                          // eslint-disable-next-line no-console\n                          console.log('[UserProfileModal] adoptKey:', adoptKey, '| fallback:', fallbackAdopt);\n                          handleAdopt(dog._id);\n                        }}\n                        style={{\n                          padding: '8px 16px',\n                          backgroundColor: '#4CAF50',\n                          color: 'white',\n                          border: 'none',\n                          borderRadius: '4px',\n                          cursor: 'pointer',\n                          fontSize: '14px',\n                          whiteSpace: 'nowrap'\n                        }}\n                      >\n                         {(() => {\n                          const adoptKey = t('userProfile.adopt');\n                          const fallbackAdopt = t('button.adopt');\n                          // eslint-disable-next-line no-console\n                          console.log('[UserProfileModal][render] adoptKey:', adoptKey, '| fallback:', fallbackAdopt);\n                          return adoptKey !== 'userProfile.adopt' ? adoptKey : fallbackAdopt;\n                        })()}\n                      </button>\n                      <button\n                        onClick={async () => {\n                          const removeKey = t('userProfile.remove');\n                          const fallbackRemove = t('button.removeFromList');\n                          // eslint-disable-next-line no-console\n                          console.log('[UserProfileModal] removeKey:', removeKey, '| fallback:', fallbackRemove);\n                          await removeFromWishlist(dog._id);\n                          await loadWishlist();\n                        }}\n                        style={{\n                          padding: '6px 12px',\n                          backgroundColor: '#ff4444',\n                          color: 'white',\n                          border: 'none',\n                          borderRadius: '4px',\n                          cursor: 'pointer',\n                          fontSize: '12px',\n                          whiteSpace: 'nowrap'\n                        }}\n                      >\n                         {(() => {\n                          const removeKey = t('userProfile.remove');\n                          const fallbackRemove = t('button.removeFromList');\n                          // eslint-disable-next-line no-console\n                          console.log('[UserProfileModal][render] removeKey:', removeKey, '| fallback:', fallbackRemove);\n                          return removeKey !== 'userProfile.remove' ? removeKey : fallbackRemove;\n                        })()}\n                      </button>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default UserProfileModal;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}