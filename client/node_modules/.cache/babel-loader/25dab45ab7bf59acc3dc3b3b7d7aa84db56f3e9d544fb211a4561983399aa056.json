{"ast":null,"code":"import _objectSpread from\"/Applications/MAMP/htdocs/eky/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from'react';import{useNavigate}from'react-router-dom';import{useForm}from'react-hook-form';import{yupResolver}from'@hookform/resolvers/yup';import*as yup from'yup';import{useTranslation}from'react-i18next';import{useAuth}from'../../contexts/AuthContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const LoginForm=()=>{var _errors$email,_errors$password;const{t}=useTranslation();const navigate=useNavigate();const{login}=useAuth();const[isSubmitting,setIsSubmitting]=useState(false);const[loginError,setLoginError]=useState('');// ...removed social login handler...\nconst schema=yup.object().shape({email:yup.string().email(t('validation.emailInvalid')).required(t('validation.emailRequired')),password:yup.string().min(4,t('validation.passwordMin',{min:4})).max(20).required(t('validation.passwordRequired'))});const{register,handleSubmit,formState:{errors}}=useForm({resolver:yupResolver(schema)});const onSubmit=async data=>{console.log('üîê LOGIN ATTEMPT:',data.email);setIsSubmitting(true);setLoginError('');try{const result=await login(data.email,data.password);console.log('üîê LOGIN RESULT:',result);if(result.success){console.log('‚úÖ Login successful, navigating to home');navigate('/');}else{console.log('‚ùå Login failed:',result.error);setLoginError(result.error||'Login failed');}}catch(error){console.error('‚ùå LOGIN ERROR:',error);setLoginError('Network error. Please check your connection and try again.');}finally{console.log('üîê Setting isSubmitting to false');setIsSubmitting(false);}};return/*#__PURE__*/_jsxs(\"main\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:t('login.title')}),/*#__PURE__*/_jsxs(\"form\",{id:\"login-form\",onSubmit:handleSubmit(onSubmit),children:[loginError&&/*#__PURE__*/_jsx(\"div\",{className:\"error\",style:{marginBottom:'1rem',padding:'0.5rem',backgroundColor:'#ffebee',border:'1px solid #e57373',borderRadius:'4px'},children:loginError}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"login-email\",children:t('register.email')}),/*#__PURE__*/_jsx(\"input\",_objectSpread({type:\"email\",id:\"login-email\",name:\"email\",autoComplete:\"email\",placeholder:t('register.email')},register('email'))),/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:(_errors$email=errors.email)===null||_errors$email===void 0?void 0:_errors$email.message}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"login-password\",children:t('register.password')}),/*#__PURE__*/_jsx(\"input\",_objectSpread({type:\"password\",id:\"login-password\",name:\"password\",autoComplete:\"current-password\",placeholder:t('register.password')},register('password'))),/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:(_errors$password=errors.password)===null||_errors$password===void 0?void 0:_errors$password.message}),/*#__PURE__*/_jsx(\"button\",{id:\"login\",className:\"details\",type:\"submit\",disabled:isSubmitting,children:isSubmitting?t('button.submitting')||'Submitting...':t('button.login')||'Login'}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{console.log('üîç DEBUG: Current state - isSubmitting:',isSubmitting,'loginError:',loginError);setIsSubmitting(false);// Force reset\n},style:{marginLeft:'10px',backgroundColor:'#ff9800',color:'white',padding:'5px 10px',border:'none',borderRadius:'4px'},children:\"Reset Button\"})]}),/*#__PURE__*/_jsxs(\"p\",{children:[t('login.remember'),\" \",/*#__PURE__*/_jsx(\"input\",_objectSpread({type:\"checkbox\",id:\"login-remember\",name:\"remember\",autoComplete:\"off\"},register('remember')))]})]});};export default LoginForm;","map":{"version":3,"names":["React","useState","useNavigate","useForm","yupResolver","yup","useTranslation","useAuth","jsx","_jsx","jsxs","_jsxs","LoginForm","_errors$email","_errors$password","t","navigate","login","isSubmitting","setIsSubmitting","loginError","setLoginError","schema","object","shape","email","string","required","password","min","max","register","handleSubmit","formState","errors","resolver","onSubmit","data","console","log","result","success","error","children","id","className","style","marginBottom","padding","backgroundColor","border","borderRadius","htmlFor","_objectSpread","type","name","autoComplete","placeholder","message","disabled","onClick","marginLeft","color"],"sources":["/Applications/MAMP/htdocs/eky/client/src/components/pages/LoginForm.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useForm, SubmitHandler } from 'react-hook-form';\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport * as yup from 'yup';\nimport { useTranslation } from 'react-i18next';\nimport { useAuth } from '../../contexts/AuthContext';\n\ninterface LoginFormData {\n  email: string;\n  password: string;\n  remember?: boolean;\n}\n\nconst LoginForm: React.FC = () => {\n  const { t } = useTranslation();\n  const navigate = useNavigate();\n  const { login } = useAuth();\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [loginError, setLoginError] = useState<string>('');\n\n\n  // ...removed social login handler...\n\n  const schema = yup.object().shape({\n    email: yup.string().email(t('validation.emailInvalid')).required(t('validation.emailRequired')),\n    password: yup\n      .string()\n      .min(4, t('validation.passwordMin', { min: 4 }))\n      .max(20)\n      .required(t('validation.passwordRequired')),\n  });\n\n  const {\n    register,\n    handleSubmit,\n    formState: { errors },\n  } = useForm<LoginFormData>({\n    resolver: yupResolver(schema),\n  });\n\n  const onSubmit: SubmitHandler<LoginFormData> = async (data) => {\n    console.log('üîê LOGIN ATTEMPT:', data.email);\n    setIsSubmitting(true);\n    setLoginError('');\n    \n    try {\n      const result = await login(data.email, data.password);\n      console.log('üîê LOGIN RESULT:', result);\n      \n      if (result.success) {\n        console.log('‚úÖ Login successful, navigating to home');\n        navigate('/');\n      } else {\n        console.log('‚ùå Login failed:', result.error);\n        setLoginError(result.error || 'Login failed');\n      }\n    } catch (error) {\n      console.error('‚ùå LOGIN ERROR:', error);\n      setLoginError('Network error. Please check your connection and try again.');\n    } finally {\n      console.log('üîê Setting isSubmitting to false');\n      setIsSubmitting(false);\n    }\n  };\n\n  return (\n    <main>\n      <h2>{t('login.title')}</h2>\n      <form id=\"login-form\" onSubmit={handleSubmit(onSubmit)}>\n        {loginError && (\n          <div className=\"error\" style={{ marginBottom: '1rem', padding: '0.5rem', backgroundColor: '#ffebee', border: '1px solid #e57373', borderRadius: '4px' }}>\n            {loginError}\n          </div>\n        )}\n        \n        <label htmlFor=\"login-email\">{t('register.email')}</label>\n        <input type=\"email\" id=\"login-email\" name=\"email\" autoComplete=\"email\" placeholder={t('register.email')} {...register('email')} />\n        <p className=\"error\">{errors.email?.message as string}</p>\n\n        <label htmlFor=\"login-password\">{t('register.password')}</label>\n        <input type=\"password\" id=\"login-password\" name=\"password\" autoComplete=\"current-password\" placeholder={t('register.password')} {...register('password')} />\n        <p className=\"error\">{errors.password?.message as string}</p>\n\n        <button id=\"login\" className=\"details\" type=\"submit\" disabled={isSubmitting}>\n          {isSubmitting ? (t('button.submitting') || 'Submitting...') : (t('button.login') || 'Login')}\n        </button>\n        \n        {/* Debug button - Remove after testing */}\n        <button \n          type=\"button\" \n          onClick={() => {\n            console.log('üîç DEBUG: Current state - isSubmitting:', isSubmitting, 'loginError:', loginError);\n            setIsSubmitting(false); // Force reset\n          }}\n          style={{ marginLeft: '10px', backgroundColor: '#ff9800', color: 'white', padding: '5px 10px', border: 'none', borderRadius: '4px' }}\n        >\n          Reset Button\n        </button>\n      </form>\n\n      <p>\n        {t('login.remember')} <input type=\"checkbox\" id=\"login-remember\" name=\"remember\" autoComplete=\"off\" {...register('remember')} />\n      </p>\n      {/* ...removed alternative social login... */}\n    </main>\n  );\n};\n\nexport default LoginForm;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}