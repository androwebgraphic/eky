{"ast":null,"code":"import _objectSpread from\"/Applications/MAMP/htdocs/eky/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{createPortal}from'react-dom';import{useSearchParams}from'react-router-dom';import EditDogModal from'./EditDogModal';import Search from'../Search';import CardSmall from'../CardSmall';import DogDetails from'./DogDetails';import{useTranslation}from'react-i18next';import{useAuth}from'../../contexts/AuthContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const DogList=()=>{const{t}=useTranslation();const{user,token,isAuthenticated}=useAuth();const[searchParams,setSearchParams]=useSearchParams();const[dogs,setDogs]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[selectedDog,setSelectedDog]=useState(null);const[editDog,setEditDog]=useState(null);const[modalPosition,setModalPosition]=useState(null);// Search filters - initialize from URL parameters\nconst[searchTerm,setSearchTerm]=useState(searchParams.get('search')||'');const[genderFilter,setGenderFilter]=useState(searchParams.get('gender')||'');const[sizeFilter,setSizeFilter]=useState(searchParams.get('size')||'');const[locationFilter,setLocationFilter]=useState('');// Get unique locations for dropdown\nconst availableLocations=Array.from(new Set(dogs.map(dog=>dog.location||dog.place).filter(Boolean).sort()));// Update URL parameters when search filters change\nuseEffect(()=>{const params=new URLSearchParams();if(searchTerm)params.set('search',searchTerm);if(genderFilter)params.set('gender',genderFilter);if(sizeFilter)params.set('size',sizeFilter);// Only update URL if params have changed\nif(params.toString()!==searchParams.toString()){setSearchParams(params);}},[searchTerm,genderFilter,sizeFilter,setSearchParams]);// Listen for URL parameter changes (e.g., from search modal)\nuseEffect(()=>{const search=searchParams.get('search')||'';const gender=searchParams.get('gender')||'';const size=searchParams.get('size')||'';if(search!==searchTerm)setSearchTerm(search);if(gender!==genderFilter)setGenderFilter(gender);if(size!==sizeFilter)setSizeFilter(size);},[searchParams]);// Filter dogs based on search criteria\nconst filteredDogs=dogs.filter(dog=>{if(!searchTerm&&!genderFilter&&!sizeFilter&&!locationFilter){return true;// No filters applied, show all dogs\n}const matchesSearch=!searchTerm||dog.name&&dog.name.toLowerCase().includes(searchTerm.toLowerCase())||dog.breed&&dog.breed.toLowerCase().includes(searchTerm.toLowerCase())||dog.location&&dog.location.toLowerCase().includes(searchTerm.toLowerCase())||dog.place&&dog.place.toLowerCase().includes(searchTerm.toLowerCase());const matchesGender=!genderFilter||dog.gender===genderFilter;const matchesSize=!sizeFilter||dog.size===sizeFilter;const matchesLocation=!locationFilter||dog.location===locationFilter||dog.place===locationFilter;return matchesSearch&&matchesGender&&matchesSize&&matchesLocation;});// Debug logging to help identify the issue\nconsole.log('ðŸ• DogList render - Auth state:');console.log('  - isAuthenticated:',isAuthenticated);console.log('  - hasUser:',!!user);console.log('  - userId:',user===null||user===void 0?void 0:user._id);console.log('  - userName:',user===null||user===void 0?void 0:user.name);console.log('  - hasToken:',!!token);console.log('ðŸ” Search - totalDogs:',dogs.length,'filteredDogs:',filteredDogs.length);// Add/remove modal-open class when modal state changes\nuseEffect(()=>{if(selectedDog||editDog){document.body.classList.add('modal-open');}else{document.body.classList.remove('modal-open');}// Cleanup on unmount\nreturn()=>{document.body.classList.remove('modal-open');};},[selectedDog,editDog]);useEffect(()=>{const getApiUrl=()=>{if(process.env.REACT_APP_API_URL)return process.env.REACT_APP_API_URL;if(window.location.protocol==='https:'){return\"https://\".concat(window.location.hostname);}if(window.location.hostname==='localhost'||window.location.hostname==='127.0.0.1'){return\"http://\".concat(window.location.hostname,\":3001\");}return\"http://172.20.10.2:3001\";};const API_URL=getApiUrl();let mounted=true;(async()=>{setLoading(true);setError(null);try{const headers={'Content-Type':'application/json'};if(token){headers['Authorization']=\"Bearer \".concat(token);}const res=await fetch(\"\".concat(API_URL,\"/api/dogs\"),{cache:'no-store',headers});if(!res.ok){const txt=await res.text();throw new Error(txt||\"Request failed (\".concat(res.status,\")\"));}const data=await res.json();if(mounted)setDogs(data);}catch(err){console.error('Failed to fetch dogs',err);if(mounted)setError(err.message||t('doglist.failedToLoad'));}finally{if(mounted)setLoading(false);}})();return()=>{mounted=false;};},[token,t]);return/*#__PURE__*/_jsxs(\"main\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:t('doglist.title')}),/*#__PURE__*/_jsx(Search,{searchTerm:searchTerm,onSearchChange:setSearchTerm,genderFilter:genderFilter,onGenderChange:setGenderFilter,sizeFilter:sizeFilter,onSizeChange:setSizeFilter,locationFilter:locationFilter,onLocationChange:setLocationFilter,availableLocations:availableLocations}),loading&&/*#__PURE__*/_jsx(\"p\",{className:\"log\",children:t('doglist.loading')}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:error}),!loading&&!error&&dogs.length===0&&/*#__PURE__*/_jsxs(\"div\",{className:\"empty\",children:[/*#__PURE__*/_jsx(\"p\",{children:t('doglist.empty')}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"/dodajpsa\",children:t('doglist.addFirst')})})]}),!loading&&!error&&dogs.length>0&&filteredDogs.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"empty\",children:/*#__PURE__*/_jsx(\"p\",{children:t('search.noResults')})}),/*#__PURE__*/_jsx(\"div\",{id:\"Doglist\",children:!loading&&!error&&filteredDogs.map(d=>{// Extract dog owner ID (handle both string and object, and _id vs id)\nlet dogOwnerId;if(typeof d.user==='string'){dogOwnerId=d.user;}else if(d.user){// Try _id first, then id\ndogOwnerId=d.user._id||d.user.id;}// Extract current user ID\nconst currentUserId=user===null||user===void 0?void 0:user._id;// Check if user is superadmin\nconst isSuperAdmin=(user===null||user===void 0?void 0:user.role)==='superadmin';// Compare as strings to avoid type mismatches\nconst isOwner=Boolean(currentUserId&&dogOwnerId&&String(currentUserId)===String(dogOwnerId));// User can edit if they're the owner OR if they're a superadmin\nconst canEdit=Boolean(isAuthenticated&&(isOwner||isSuperAdmin));return/*#__PURE__*/_jsx(CardSmall,{_id:d._id,name:d.name,breed:d.breed,age:d.age,likes:d.likes||[],images:d.images,video:d.video,thumbnail:d.thumbnail,color:d.color,place:d.place||d.location,description:d.description,size:d.size,gender:d.gender,vaccinated:d.vaccinated,neutered:d.neutered,user:d.user,canEdit:canEdit,adoptionStatus:d.adoptionStatus,adoptionQueue:d.adoptionQueue,onDogUpdate:updatedDog=>{setDogs(dogs=>dogs.map(dog=>dog._id===updatedDog._id?updatedDog:dog));if(selectedDog&&selectedDog._id===updatedDog._id)setSelectedDog(updatedDog);},onViewDetails:event=>{const rect=event.currentTarget.getBoundingClientRect();setModalPosition({x:rect.left+rect.width/2,y:rect.top+rect.height/2});setSelectedDog(d);},onEdit:event=>{const rect=event.currentTarget.getBoundingClientRect();setModalPosition({x:rect.left+rect.width/2,y:rect.top+rect.height/2});handleEditDog(d);},onRemove:()=>handleRemoveDog(d)},d._id);})}),selectedDog&&modalPosition&&/*#__PURE__*/createPortal(/*#__PURE__*/_jsx(\"div\",{style:{position:'fixed',top:0,left:0,width:'100vw',height:'100vh',backgroundColor:'rgba(0, 0, 0, 0.8)',zIndex:2147483647,display:'flex',alignItems:'center',justifyContent:'center',padding:'2rem',boxSizing:'border-box'},onClick:()=>{setSelectedDog(null);setModalPosition(null);},children:/*#__PURE__*/_jsxs(\"div\",{style:{backgroundColor:'white',borderRadius:'12px',padding:'2rem',maxWidth:'90vw',maxHeight:'90vh',overflowY:'auto',position:'relative',zIndex:2147483647,boxShadow:'0 20px 60px rgba(0,0,0,0.5)'},onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsx(\"button\",{style:{position:'absolute',top:15,right:15,width:56,height:56,backgroundColor:'#e74c3c',color:'#fff',border:'none',borderRadius:'50%',display:'flex',alignItems:'center',justifyContent:'center',boxShadow:'0 4px 12px rgba(0,0,0,0.3)',cursor:'pointer',zIndex:2147483647,padding:0},onClick:()=>{setSelectedDog(null);setModalPosition(null);},title:t('common.close'),\"aria-label\":t('common.close'),children:/*#__PURE__*/_jsx(\"span\",{style:{fontSize:40,fontWeight:900,lineHeight:'56px',width:'100%',textAlign:'center',display:'block',userSelect:'none',letterSpacing:2},children:\"\\xD7\"})}),/*#__PURE__*/_jsx(DogDetails,_objectSpread(_objectSpread({},selectedDog),{},{adoptionStatus:selectedDog===null||selectedDog===void 0?void 0:selectedDog.adoptionStatus,adoptionQueue:selectedDog===null||selectedDog===void 0?void 0:selectedDog.adoptionQueue,onDogUpdate:updatedDog=>{setDogs(dogs=>dogs.map(d=>d._id===updatedDog._id?updatedDog:d));setSelectedDog(updatedDog);},onClose:()=>{setSelectedDog(null);setModalPosition(null);}}))]})}),document.body),editDog&&modalPosition&&/*#__PURE__*/createPortal(/*#__PURE__*/_jsx(EditDogModal,{dog:editDog,onClose:()=>{setEditDog(null);setModalPosition(null);},onSave:handleSaveEditDog,modalPosition:modalPosition}),document.body)]});// Handler for editing a dog\nfunction handleEditDog(dog){setEditDog(dog);}// Handler for saving an edited dog\nfunction handleSaveEditDog(updatedDog){setDogs(dogs=>dogs.map(d=>d._id===updatedDog._id?updatedDog:d));}// Handler for removing a dog\nasync function handleRemoveDog(dog){if(!window.confirm(t('doglist.confirmRemove',{name:dog.name})))return;try{// Debug auth context values\nconsole.log('Delete request - Auth context values:',{user:user,token:token,isAuthenticated:isAuthenticated,localStorageToken:localStorage.getItem('token'),localStorageUser:localStorage.getItem('user')});const getApiUrl=()=>{if(process.env.REACT_APP_API_URL)return process.env.REACT_APP_API_URL;if(window.location.hostname==='localhost'||window.location.hostname==='127.0.0.1'){return\"http://\".concat(window.location.hostname,\":3001\");}return\"http://\".concat(window.location.hostname,\":3001\");};const API_URL=getApiUrl();const headers={'Content-Type':'application/json'};if(token){headers['Authorization']=\"Bearer \".concat(token);console.log('Delete request - Using token:',token.substring(0,20)+'...');}else{console.error('Delete request - No token available!');}console.log('Delete request details:',{url:\"\".concat(API_URL,\"/api/dogs/\").concat(dog._id),method:'DELETE',headers,dogId:dog._id,dogName:dog.name});const resp=await fetch(\"\".concat(API_URL,\"/api/dogs/\").concat(dog._id),{method:'DELETE',headers});console.log('Delete response status:',resp.status);if(!resp.ok){const errorText=await resp.text();console.error('Delete failed:',resp.status,errorText);throw new Error(\"\".concat(resp.status,\": \").concat(errorText));}console.log('Delete successful, removing from UI');setDogs(dogs=>dogs.filter(d=>d._id!==dog._id));// Close modals if open for this dog\nsetEditDog(editDog=>editDog&&editDog._id===dog._id?null:editDog);setSelectedDog(selectedDog=>selectedDog&&selectedDog._id===dog._id?null:selectedDog);}catch(err){console.error('Delete error details:',err);alert(err.message||t('doglist.failedToRemove'));}}};export default DogList;","map":{"version":3,"names":["React","useState","useEffect","createPortal","useSearchParams","EditDogModal","Search","CardSmall","DogDetails","useTranslation","useAuth","jsx","_jsx","jsxs","_jsxs","DogList","t","user","token","isAuthenticated","searchParams","setSearchParams","dogs","setDogs","loading","setLoading","error","setError","selectedDog","setSelectedDog","editDog","setEditDog","modalPosition","setModalPosition","searchTerm","setSearchTerm","get","genderFilter","setGenderFilter","sizeFilter","setSizeFilter","locationFilter","setLocationFilter","availableLocations","Array","from","Set","map","dog","location","place","filter","Boolean","sort","params","URLSearchParams","set","toString","search","gender","size","filteredDogs","matchesSearch","name","toLowerCase","includes","breed","matchesGender","matchesSize","matchesLocation","console","log","_id","length","document","body","classList","add","remove","getApiUrl","process","env","REACT_APP_API_URL","window","protocol","concat","hostname","API_URL","mounted","headers","res","fetch","cache","ok","txt","text","Error","status","data","json","err","message","children","onSearchChange","onGenderChange","onSizeChange","onLocationChange","className","href","id","d","dogOwnerId","currentUserId","isSuperAdmin","role","isOwner","String","canEdit","age","likes","images","video","thumbnail","color","description","vaccinated","neutered","adoptionStatus","adoptionQueue","onDogUpdate","updatedDog","onViewDetails","event","rect","currentTarget","getBoundingClientRect","x","left","width","y","top","height","onEdit","handleEditDog","onRemove","handleRemoveDog","style","position","backgroundColor","zIndex","display","alignItems","justifyContent","padding","boxSizing","onClick","borderRadius","maxWidth","maxHeight","overflowY","boxShadow","e","stopPropagation","right","border","cursor","title","fontSize","fontWeight","lineHeight","textAlign","userSelect","letterSpacing","_objectSpread","onClose","onSave","handleSaveEditDog","confirm","localStorageToken","localStorage","getItem","localStorageUser","substring","url","method","dogId","dogName","resp","errorText","alert"],"sources":["/Applications/MAMP/htdocs/eky/client/src/components/pages/DogList.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { createPortal } from 'react-dom';\nimport { useSearchParams } from 'react-router-dom';\nimport EditDogModal from './EditDogModal';\nimport Search from '../Search';\nimport CardSmall from '../CardSmall';\nimport DogDetails from './DogDetails';\nimport { useTranslation } from 'react-i18next';\nimport { useAuth } from '../../contexts/AuthContext';\n\ninterface Dog {\n  _id: string;\n  name: string;\n  breed?: string;\n  age?: number;\n  images?: any[];\n  video?: any;\n  thumbnail?: any;\n  color?: string;\n  place?: string;\n  description?: string;\n  size?: string;\n  gender?: 'male' | 'female';\n  vaccinated?: boolean;\n  neutered?: boolean;\n  location?: string;\n  likes?: string[];\n  user?: { \n    _id: string; \n    name: string; \n    username: string;\n    email?: string;\n    phone?: string;\n    person?: 'private' | 'organization';\n  };\n  adoptionStatus?: string;\n  adoptionQueue?: any;\n}\n\nconst DogList: React.FC = () => {\n  const { t } = useTranslation();\n  const { user, token, isAuthenticated } = useAuth();\n  const [searchParams, setSearchParams] = useSearchParams();\n  const [dogs, setDogs] = useState<Dog[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [selectedDog, setSelectedDog] = useState<Dog | null>(null);\n  const [editDog, setEditDog] = useState<Dog | null>(null);\n  const [modalPosition, setModalPosition] = useState<{x: number, y: number} | null>(null);\n  \n  // Search filters - initialize from URL parameters\n  const [searchTerm, setSearchTerm] = useState(searchParams.get('search') || '');\n  const [genderFilter, setGenderFilter] = useState(searchParams.get('gender') || '');\n  const [sizeFilter, setSizeFilter] = useState(searchParams.get('size') || '');\n  const [locationFilter, setLocationFilter] = useState('');\n  \n  // Get unique locations for dropdown\n  const availableLocations = Array.from(new Set(\n    dogs.map(dog => dog.location || dog.place)\n      .filter(Boolean)\n      .sort()\n  ));\n  \n  // Update URL parameters when search filters change\n  useEffect(() => {\n    const params = new URLSearchParams();\n    if (searchTerm) params.set('search', searchTerm);\n    if (genderFilter) params.set('gender', genderFilter);\n    if (sizeFilter) params.set('size', sizeFilter);\n    \n    // Only update URL if params have changed\n    if (params.toString() !== searchParams.toString()) {\n      setSearchParams(params);\n    }\n  }, [searchTerm, genderFilter, sizeFilter, setSearchParams]);\n\n  // Listen for URL parameter changes (e.g., from search modal)\n  useEffect(() => {\n    const search = searchParams.get('search') || '';\n    const gender = searchParams.get('gender') || '';\n    const size = searchParams.get('size') || '';\n    \n    if (search !== searchTerm) setSearchTerm(search);\n    if (gender !== genderFilter) setGenderFilter(gender);\n    if (size !== sizeFilter) setSizeFilter(size);\n  }, [searchParams]);\n  \n  // Filter dogs based on search criteria\n  const filteredDogs = dogs.filter(dog => {\n    if (!searchTerm && !genderFilter && !sizeFilter && !locationFilter) {\n      return true; // No filters applied, show all dogs\n    }\n    \n    const matchesSearch = !searchTerm || \n      (dog.name && dog.name.toLowerCase().includes(searchTerm.toLowerCase())) ||\n      (dog.breed && dog.breed.toLowerCase().includes(searchTerm.toLowerCase())) ||\n      (dog.location && dog.location.toLowerCase().includes(searchTerm.toLowerCase())) ||\n      (dog.place && dog.place.toLowerCase().includes(searchTerm.toLowerCase()));\n    \n    const matchesGender = !genderFilter || dog.gender === genderFilter;\n    const matchesSize = !sizeFilter || dog.size === sizeFilter;\n    const matchesLocation = !locationFilter || \n      dog.location === locationFilter || dog.place === locationFilter;\n    \n    return matchesSearch && matchesGender && matchesSize && matchesLocation;\n  });\n  \n  // Debug logging to help identify the issue\n  console.log('ðŸ• DogList render - Auth state:');\n  console.log('  - isAuthenticated:', isAuthenticated);\n  console.log('  - hasUser:', !!user);\n  console.log('  - userId:', user?._id);\n  console.log('  - userName:', user?.name);\n  console.log('  - hasToken:', !!token);\n  \n  console.log('ðŸ” Search - totalDogs:', dogs.length, 'filteredDogs:', filteredDogs.length);\n\n  // Add/remove modal-open class when modal state changes\n  useEffect(() => {\n    if (selectedDog || editDog) {\n      document.body.classList.add('modal-open');\n    } else {\n      document.body.classList.remove('modal-open');\n    }\n    \n    // Cleanup on unmount\n    return () => {\n      document.body.classList.remove('modal-open');\n    };\n  }, [selectedDog, editDog]);\n\n  useEffect(() => {\n    const getApiUrl = () => {\n      if (process.env.REACT_APP_API_URL) return process.env.REACT_APP_API_URL;\n      if (window.location.protocol === 'https:') {\n        return `https://${window.location.hostname}`;\n      }\n      if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {\n        return `http://${window.location.hostname}:3001`;\n      }\n      return `http://172.20.10.2:3001`;\n    };\n    const API_URL = getApiUrl();\n    let mounted = true;\n\n    (async () => {\n      setLoading(true);\n      setError(null);\n      try {\n        const headers: any = { 'Content-Type': 'application/json' };\n        if (token) {\n          headers['Authorization'] = `Bearer ${token}`;\n        }\n        const res = await fetch(`${API_URL}/api/dogs`, { \n          cache: 'no-store',\n          headers \n        });\n        if (!res.ok) {\n          const txt = await res.text();\n          throw new Error(txt || `Request failed (${res.status})`);\n        }\n        const data = await res.json();\n        if (mounted) setDogs(data);\n      } catch (err: any) {\n        console.error('Failed to fetch dogs', err);\n        if (mounted) setError(err.message || t('doglist.failedToLoad'));\n      } finally {\n        if (mounted) setLoading(false);\n      }\n    })();\n\n    return () => { mounted = false; };\n  }, [token, t]);\n\n  return (\n    <main>\n      <h2>{t('doglist.title')}</h2>\n      <Search \n        searchTerm={searchTerm}\n        onSearchChange={setSearchTerm}\n        genderFilter={genderFilter}\n        onGenderChange={setGenderFilter}\n        sizeFilter={sizeFilter}\n        onSizeChange={setSizeFilter}\n        locationFilter={locationFilter}\n        onLocationChange={setLocationFilter}\n        availableLocations={availableLocations}\n      />\n\n      {loading && <p className=\"log\">{t('doglist.loading')}</p>}\n      {error && <p className=\"error\">{error}</p>}\n\n      {!loading && !error && dogs.length === 0 && (\n        <div className=\"empty\">\n          <p>{t('doglist.empty')}</p>\n          <p>\n            <a href=\"/dodajpsa\">{t('doglist.addFirst')}</a>\n          </p>\n        </div>\n      )}\n\n      {!loading && !error && dogs.length > 0 && filteredDogs.length === 0 && (\n        <div className=\"empty\">\n          <p>{t('search.noResults')}</p>\n        </div>\n      )}\n\n      <div id=\"Doglist\">\n\n        {!loading && !error && filteredDogs.map(d => {\n          // Extract dog owner ID (handle both string and object, and _id vs id)\n          let dogOwnerId;\n          if (typeof (d.user as any) === 'string') {\n            dogOwnerId = d.user as any;\n          } else if (d.user) {\n            // Try _id first, then id\n            dogOwnerId = (d.user as any)._id || (d.user as any).id;\n          }\n          \n          // Extract current user ID\n          const currentUserId = user?._id;\n          \n          // Check if user is superadmin\n          const isSuperAdmin = user?.role === 'superadmin';\n          \n          // Compare as strings to avoid type mismatches\n          const isOwner = Boolean(\n            currentUserId && \n            dogOwnerId && \n            String(currentUserId) === String(dogOwnerId)\n          );\n          \n          // User can edit if they're the owner OR if they're a superadmin\n          const canEdit = Boolean(isAuthenticated && (isOwner || isSuperAdmin));\n          \n          return (\n            <CardSmall\n              key={d._id}\n              _id={d._id}\n              name={d.name}\n              breed={d.breed}\n              age={d.age}\n              likes={d.likes || []}\n              images={d.images}\n              video={d.video}\n              thumbnail={d.thumbnail}\n              color={d.color}\n              place={d.place || d.location}\n              description={d.description}\n              size={d.size}\n              gender={d.gender}\n              vaccinated={d.vaccinated}\n              neutered={d.neutered}\n              user={d.user}\n              canEdit={canEdit}\n              adoptionStatus={d.adoptionStatus}\n              adoptionQueue={d.adoptionQueue}\n              onDogUpdate={updatedDog => {\n                setDogs(dogs => dogs.map(dog => dog._id === updatedDog._id ? updatedDog : dog));\n                if (selectedDog && selectedDog._id === updatedDog._id) setSelectedDog(updatedDog);\n              }}\n              onViewDetails={(event) => {\n                const rect = event.currentTarget.getBoundingClientRect();\n                setModalPosition({\n                  x: rect.left + rect.width / 2,\n                  y: rect.top + rect.height / 2\n                });\n                setSelectedDog(d);\n              }}\n              onEdit={(event) => {\n                const rect = event.currentTarget.getBoundingClientRect();\n                setModalPosition({\n                  x: rect.left + rect.width / 2,\n                  y: rect.top + rect.height / 2\n                });\n                handleEditDog(d);\n              }}\n              onRemove={() => handleRemoveDog(d)}\n            />\n          );\n        })}\n      </div>\n\n      {selectedDog && modalPosition && createPortal(\n        <div \n          style={{\n            position: 'fixed',\n            top: 0,\n            left: 0,\n            width: '100vw',\n            height: '100vh',\n            backgroundColor: 'rgba(0, 0, 0, 0.8)',\n            zIndex: 2147483647,\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            padding: '2rem',\n            boxSizing: 'border-box'\n          }}\n          onClick={() => {\n            setSelectedDog(null);\n            setModalPosition(null);\n          }}\n        >\n          <div \n            style={{\n              backgroundColor: 'white',\n              borderRadius: '12px',\n              padding: '2rem',\n              maxWidth: '90vw',\n              maxHeight: '90vh',\n              overflowY: 'auto',\n              position: 'relative',\n              zIndex: 2147483647,\n              boxShadow: '0 20px 60px rgba(0,0,0,0.5)'\n            }}\n            onClick={e => e.stopPropagation()}\n          >\n            <button\n              style={{\n                position: 'absolute',\n                top: 15,\n                right: 15,\n                width: 56,\n                height: 56,\n                backgroundColor: '#e74c3c',\n                color: '#fff',\n                border: 'none',\n                borderRadius: '50%',\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'center',\n                boxShadow: '0 4px 12px rgba(0,0,0,0.3)',\n                cursor: 'pointer',\n                zIndex: 2147483647,\n                padding: 0\n              }}\n              onClick={() => {\n                setSelectedDog(null);\n                setModalPosition(null);\n              }}\n              title={t('common.close')}\n              aria-label={t('common.close')}\n            >\n              <span style={{\n                fontSize: 40,\n                fontWeight: 900,\n                lineHeight: '56px',\n                width: '100%',\n                textAlign: 'center',\n                display: 'block',\n                userSelect: 'none',\n                letterSpacing: 2\n              }}>\n                Ã—\n              </span>\n            </button>\n            <DogDetails\n              {...selectedDog}\n              adoptionStatus={selectedDog?.adoptionStatus}\n              adoptionQueue={selectedDog?.adoptionQueue}\n              onDogUpdate={updatedDog => {\n                setDogs(dogs => dogs.map(d => d._id === updatedDog._id ? updatedDog : d));\n                setSelectedDog(updatedDog);\n              }}\n              onClose={() => {\n                setSelectedDog(null);\n                setModalPosition(null);\n              }}\n            />\n          </div>\n        </div>,\n        document.body\n      )}\n\n      {editDog && modalPosition && createPortal(\n        <EditDogModal\n          dog={editDog}\n          onClose={() => {\n            setEditDog(null);\n            setModalPosition(null);\n          }}\n          onSave={handleSaveEditDog}\n          modalPosition={modalPosition}\n        />,\n        document.body\n      )}\n    </main>\n  );\n\n  // Handler for editing a dog\n  function handleEditDog(dog: Dog) {\n    setEditDog(dog);\n  }\n\n  // Handler for saving an edited dog\n  function handleSaveEditDog(updatedDog: Dog) {\n    setDogs(dogs => dogs.map(d => d._id === updatedDog._id ? updatedDog : d));\n  }\n\n  // Handler for removing a dog\n  async function handleRemoveDog(dog: Dog) {\n    if (!window.confirm(t('doglist.confirmRemove', { name: dog.name }))) return;\n    try {\n      // Debug auth context values\n      console.log('Delete request - Auth context values:', {\n        user: user,\n        token: token,\n        isAuthenticated: isAuthenticated,\n        localStorageToken: localStorage.getItem('token'),\n        localStorageUser: localStorage.getItem('user')\n      });\n      \n      const getApiUrl = () => {\n        if (process.env.REACT_APP_API_URL) return process.env.REACT_APP_API_URL;\n        if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {\n          return `http://${window.location.hostname}:3001`;\n        }\n        return `http://${window.location.hostname}:3001`;\n      };\n      const API_URL = getApiUrl();\n      \n      const headers: any = {\n        'Content-Type': 'application/json'\n      };\n      \n      if (token) {\n        headers['Authorization'] = `Bearer ${token}`;\n        console.log('Delete request - Using token:', token.substring(0, 20) + '...');\n      } else {\n        console.error('Delete request - No token available!');\n      }\n      \n      console.log('Delete request details:', {\n        url: `${API_URL}/api/dogs/${dog._id}`,\n        method: 'DELETE',\n        headers,\n        dogId: dog._id,\n        dogName: dog.name\n      });\n      \n      const resp = await fetch(`${API_URL}/api/dogs/${dog._id}`, { \n        method: 'DELETE',\n        headers \n      });\n      \n      console.log('Delete response status:', resp.status);\n      if (!resp.ok) {\n        const errorText = await resp.text();\n        console.error('Delete failed:', resp.status, errorText);\n        throw new Error(`${resp.status}: ${errorText}`);\n      }\n      \n      console.log('Delete successful, removing from UI');\n      setDogs(dogs => dogs.filter(d => d._id !== dog._id));\n      // Close modals if open for this dog\n      setEditDog(editDog => (editDog && editDog._id === dog._id ? null : editDog));\n      setSelectedDog(selectedDog => (selectedDog && selectedDog._id === dog._id ? null : selectedDog));\n    } catch (err: any) {\n      console.error('Delete error details:', err);\n      alert(err.message || t('doglist.failedToRemove'));\n    }\n  }\n\n};\n\nexport default DogList;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}