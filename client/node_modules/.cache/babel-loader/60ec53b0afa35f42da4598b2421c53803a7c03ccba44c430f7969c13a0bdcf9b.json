{"ast":null,"code":"var _jsxFileName = \"/Applications/MAMP/htdocs/eky/client/src/contexts/AuthContext.tsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useState, useEffect } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthContext = /*#__PURE__*/createContext(undefined);\nexport const useAuth = () => {\n  _s();\n  const context = useContext(AuthContext);\n  if (context === undefined) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  return context;\n};\n_s(useAuth, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n// Use build-time constant for API URL\nconst API_URL = process.env.REACT_APP_API_URL;\nexport const AuthProvider = ({\n  children\n}) => {\n  _s2();\n  const [user, setUser] = useState(null);\n  const [token, setToken] = useState(null);\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    // Check if user is logged in on app start\n    const storedToken = localStorage.getItem('token');\n    const storedUser = localStorage.getItem('user');\n    if (storedToken && storedUser) {\n      try {\n        const parsedUser = JSON.parse(storedUser);\n        setToken(storedToken);\n        setUser(parsedUser);\n      } catch (error) {\n        console.error('AuthContext: Error parsing stored user:', error);\n        localStorage.removeItem('token');\n        localStorage.removeItem('user');\n      }\n    }\n    setLoading(false);\n  }, []);\n  // Helper to always get latest token from localStorage\n  const getLatestToken = () => localStorage.getItem('token') || token;\n\n  // Refresh auth state from localStorage on mount and window focus\n  useEffect(() => {\n    const refreshAuth = () => {\n      const storedToken = localStorage.getItem('token');\n      const storedUser = localStorage.getItem('user');\n      if (storedToken && storedUser) {\n        try {\n          const parsedUser = JSON.parse(storedUser);\n          setToken(storedToken);\n          setUser(parsedUser);\n        } catch (error) {\n          console.error('AuthContext: Error parsing stored user:', error);\n          localStorage.removeItem('token');\n          localStorage.removeItem('user');\n        }\n      }\n      setLoading(false);\n    };\n    refreshAuth();\n    window.addEventListener('focus', refreshAuth);\n    return () => window.removeEventListener('focus', refreshAuth);\n  }, []);\n  const login = async (email, password) => {\n    try {\n      console.log('ðŸŒ API URL:', API_URL);\n      const controller = new AbortController();\n      const timeoutId = setTimeout(() => controller.abort(), 10000);\n      const response = await fetch(`${API_URL}/api/users/logiranje`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          email,\n          password\n        }),\n        signal: controller.signal\n      });\n      clearTimeout(timeoutId);\n      const data = await response.json();\n      if (response.ok) {\n        setUser(data);\n        setToken(data.token);\n        localStorage.setItem('token', data.token);\n        localStorage.setItem('user', JSON.stringify(data));\n        return {\n          success: true\n        };\n      } else {\n        return {\n          success: false,\n          error: data.message || 'Login failed'\n        };\n      }\n    } catch (error) {\n      if (error.name === 'AbortError') {\n        return {\n          success: false,\n          error: 'Request timeout. Please try again.'\n        };\n      }\n      return {\n        success: false,\n        error: 'Network error. Please check your connection.'\n      };\n    }\n  };\n  const register = async userData => {\n    try {\n      const response = await fetch(`${API_URL}/api/users/registracija`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(userData)\n      });\n      const data = await response.json();\n      if (response.ok) {\n        return {\n          success: true\n        };\n      } else {\n        return {\n          success: false,\n          error: data.message || 'Registration failed'\n        };\n      }\n    } catch (error) {\n      return {\n        success: false,\n        error: 'Network error. Please try again.'\n      };\n    }\n  };\n  const addToWishlist = async dogId => {\n    try {\n      const latestToken = getLatestToken();\n      const response = await fetch(`${API_URL}/api/users/wishlist`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${latestToken}`\n        },\n        body: JSON.stringify({\n          dogId\n        })\n      });\n      const data = await response.json();\n      if (response.ok) {\n        // Use updated user from backend if available\n        if (data && data.user) {\n          updateUser(data.user);\n        } else if (user) {\n          // fallback: update manually if backend did not return user\n          const updatedUser = {\n            ...user,\n            wishlist: [...(user.wishlist || []), dogId]\n          };\n          updateUser(updatedUser);\n        }\n        return {\n          success: true\n        };\n      } else {\n        return {\n          success: false,\n          error: data.message || 'Failed to add to wishlist'\n        };\n      }\n    } catch (error) {\n      return {\n        success: false,\n        error: 'Network error. Please try again.'\n      };\n    }\n  };\n  const removeFromWishlist = async dogId => {\n    try {\n      const latestToken = getLatestToken();\n      const response = await fetch(`${API_URL}/api/users/wishlist/${dogId}`, {\n        method: 'DELETE',\n        headers: {\n          'Authorization': `Bearer ${latestToken}`\n        }\n      });\n      if (response.ok) {\n        if (user) {\n          const updatedUser = {\n            ...user,\n            wishlist: (user.wishlist || []).filter(id => id !== dogId)\n          };\n          updateUser(updatedUser);\n        }\n        return {\n          success: true\n        };\n      } else {\n        const data = await response.json();\n        return {\n          success: false,\n          error: data.message || 'Failed to remove from wishlist'\n        };\n      }\n    } catch (error) {\n      return {\n        success: false,\n        error: 'Network error. Please try again.'\n      };\n    }\n  };\n  const getWishlist = async () => {\n    try {\n      const latestToken = getLatestToken();\n      const response = await fetch(`${API_URL}/api/users/wishlist`, {\n        method: 'GET',\n        headers: {\n          'Authorization': `Bearer ${latestToken}`\n        }\n      });\n      if (response.ok) {\n        const wishlist = await response.json();\n        return wishlist;\n      } else {\n        return [];\n      }\n    } catch (error) {\n      return [];\n    }\n  };\n  const isInWishlist = dogId => {\n    var _user$wishlist;\n    return (user === null || user === void 0 ? void 0 : (_user$wishlist = user.wishlist) === null || _user$wishlist === void 0 ? void 0 : _user$wishlist.includes(dogId)) || false;\n  };\n  const updateUser = userData => {\n    setUser(userData);\n    localStorage.setItem('user', JSON.stringify(userData));\n  };\n  const logout = () => {\n    setUser(null);\n    setToken(null);\n    localStorage.removeItem('token');\n    localStorage.removeItem('user');\n  };\n  const isAuthenticated = !!user && !!token;\n  const value = {\n    user,\n    currentUser: user,\n    token,\n    login,\n    register,\n    logout,\n    updateUser,\n    addToWishlist,\n    removeFromWishlist,\n    getWishlist,\n    isInWishlist,\n    isAuthenticated,\n    loading\n  };\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 270,\n    columnNumber: 10\n  }, this);\n};\n_s2(AuthProvider, \"Xu4eKkZgr0oKfKhPsnk4ElTFcXI=\");\n_c = AuthProvider;\nvar _c;\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","jsxDEV","_jsxDEV","AuthContext","undefined","useAuth","_s","context","Error","API_URL","process","env","REACT_APP_API_URL","AuthProvider","children","_s2","user","setUser","token","setToken","loading","setLoading","storedToken","localStorage","getItem","storedUser","parsedUser","JSON","parse","error","console","removeItem","getLatestToken","refreshAuth","window","addEventListener","removeEventListener","login","email","password","log","controller","AbortController","timeoutId","setTimeout","abort","response","fetch","method","headers","body","stringify","signal","clearTimeout","data","json","ok","setItem","success","message","name","register","userData","addToWishlist","dogId","latestToken","updateUser","updatedUser","wishlist","removeFromWishlist","filter","id","getWishlist","isInWishlist","_user$wishlist","includes","logout","isAuthenticated","value","currentUser","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Applications/MAMP/htdocs/eky/client/src/contexts/AuthContext.tsx"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect, ReactNode } from 'react';\n\ninterface User {\n  _id: string;\n  name: string;\n  email: string;\n  username: string;\n  wishlist?: string[];\n  profilePicture?: string;\n  role?: string;\n}\n\ninterface AuthContextType {\n  user: User | null;\n  currentUser?: User | null;\n  token: string | null;\n  login: (email: string, password: string) => Promise<{ success: boolean; error?: string }>;\n  register: (userData: any) => Promise<{ success: boolean; error?: string }>;\n  logout: () => void;\n  updateUser: (userData: User) => void;\n  addToWishlist: (dogId: string) => Promise<{ success: boolean; error?: string }>;\n  removeFromWishlist: (dogId: string) => Promise<{ success: boolean; error?: string }>;\n  getWishlist: () => Promise<string[]>;\n  isInWishlist: (dogId: string) => boolean;\n  isAuthenticated: boolean;\n  loading: boolean;\n}\n\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\n\nexport const useAuth = () => {\n  const context = useContext(AuthContext);\n  if (context === undefined) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  return context;\n};\n\ninterface AuthProviderProps {\n  children: ReactNode;\n}\n\n// Use build-time constant for API URL\nconst API_URL = process.env.REACT_APP_API_URL;\n\nexport const AuthProvider: React.FC<AuthProviderProps> = ({ children }) => {\n  const [user, setUser] = useState<User | null>(null);\n  const [token, setToken] = useState<string | null>(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    // Check if user is logged in on app start\n    const storedToken = localStorage.getItem('token');\n    const storedUser = localStorage.getItem('user');\n    \n    if (storedToken && storedUser) {\n      try {\n        const parsedUser = JSON.parse(storedUser);\n        setToken(storedToken);\n        setUser(parsedUser);\n      } catch (error) {\n        console.error('AuthContext: Error parsing stored user:', error);\n        localStorage.removeItem('token');\n        localStorage.removeItem('user');\n      }\n    }\n    setLoading(false);\n  }, []);\n  // Helper to always get latest token from localStorage\n  const getLatestToken = () => localStorage.getItem('token') || token;\n\n  // Refresh auth state from localStorage on mount and window focus\n  useEffect(() => {\n    const refreshAuth = () => {\n      const storedToken = localStorage.getItem('token');\n      const storedUser = localStorage.getItem('user');\n      if (storedToken && storedUser) {\n        try {\n          const parsedUser = JSON.parse(storedUser);\n          setToken(storedToken);\n          setUser(parsedUser);\n        } catch (error) {\n          console.error('AuthContext: Error parsing stored user:', error);\n          localStorage.removeItem('token');\n          localStorage.removeItem('user');\n        }\n      }\n      setLoading(false);\n    };\n    refreshAuth();\n    window.addEventListener('focus', refreshAuth);\n    return () => window.removeEventListener('focus', refreshAuth);\n  }, []);\n\n  const login = async (email: string, password: string) => {\n    try {\n      console.log('ðŸŒ API URL:', API_URL);\n\n      const controller = new AbortController();\n      const timeoutId = setTimeout(() => controller.abort(), 10000);\n\n      const response = await fetch(`${API_URL}/api/users/logiranje`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ email, password }),\n        signal: controller.signal\n      });\n\n      clearTimeout(timeoutId);\n      const data = await response.json();\n\n      if (response.ok) {\n        setUser(data);\n        setToken(data.token);\n        localStorage.setItem('token', data.token);\n        localStorage.setItem('user', JSON.stringify(data));\n        return { success: true };\n      } else {\n        return { success: false, error: data.message || 'Login failed' };\n      }\n    } catch (error: any) {\n      if (error.name === 'AbortError') {\n        return { success: false, error: 'Request timeout. Please try again.' };\n      }\n      return { success: false, error: 'Network error. Please check your connection.' };\n    }\n  };\n\n  const register = async (userData: any) => {\n    try {\n      const response = await fetch(`${API_URL}/api/users/registracija`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(userData),\n      });\n\n      const data = await response.json();\n\n      if (response.ok) {\n        return { success: true };\n      } else {\n        return { success: false, error: data.message || 'Registration failed' };\n      }\n    } catch (error) {\n      return { success: false, error: 'Network error. Please try again.' };\n    }\n  };\n\n  const addToWishlist = async (dogId: string) => {\n    try {\n      const latestToken = getLatestToken();\n      const response = await fetch(`${API_URL}/api/users/wishlist`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${latestToken}`\n        },\n        body: JSON.stringify({ dogId }),\n      });\n\n      const data = await response.json();\n\n      if (response.ok) {\n        // Use updated user from backend if available\n        if (data && data.user) {\n          updateUser(data.user);\n        } else if (user) {\n          // fallback: update manually if backend did not return user\n          const updatedUser = {\n            ...user,\n            wishlist: [...(user.wishlist || []), dogId]\n          };\n          updateUser(updatedUser);\n        }\n        return { success: true };\n      } else {\n        return { success: false, error: data.message || 'Failed to add to wishlist' };\n      }\n    } catch (error) {\n      return { success: false, error: 'Network error. Please try again.' };\n    }\n  };\n\n  const removeFromWishlist = async (dogId: string) => {\n    try {\n      const latestToken = getLatestToken();\n      const response = await fetch(`${API_URL}/api/users/wishlist/${dogId}`, {\n        method: 'DELETE',\n        headers: {\n          'Authorization': `Bearer ${latestToken}`\n        },\n      });\n\n      if (response.ok) {\n        if (user) {\n          const updatedUser = {\n            ...user,\n            wishlist: (user.wishlist || []).filter(id => id !== dogId)\n          };\n          updateUser(updatedUser);\n        }\n        return { success: true };\n      } else {\n        const data = await response.json();\n        return { success: false, error: data.message || 'Failed to remove from wishlist' };\n      }\n    } catch (error) {\n      return { success: false, error: 'Network error. Please try again.' };\n    }\n  };\n\n  const getWishlist = async () => {\n    try {\n      const latestToken = getLatestToken();\n      const response = await fetch(`${API_URL}/api/users/wishlist`, {\n        method: 'GET',\n        headers: {\n          'Authorization': `Bearer ${latestToken}`\n        },\n      });\n\n      if (response.ok) {\n        const wishlist = await response.json();\n        return wishlist;\n      } else {\n        return [];\n      }\n    } catch (error) {\n      return [];\n    }\n  };\n\n  const isInWishlist = (dogId: string) => {\n    return user?.wishlist?.includes(dogId) || false;\n  };\n\n  const updateUser = (userData: User) => {\n    setUser(userData);\n    localStorage.setItem('user', JSON.stringify(userData));\n  };\n\n  const logout = () => {\n    setUser(null);\n    setToken(null);\n    localStorage.removeItem('token');\n    localStorage.removeItem('user');\n  };\n\n  const isAuthenticated = !!user && !!token;\n\n  const value: AuthContextType = {\n  user,\n  currentUser: user, \n  token,\n  login,\n  register,\n  logout,\n  updateUser,\n  addToWishlist,\n  removeFromWishlist,\n  getWishlist,\n  isInWishlist,\n  isAuthenticated,\n  loading,\n};\n  return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>;\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}