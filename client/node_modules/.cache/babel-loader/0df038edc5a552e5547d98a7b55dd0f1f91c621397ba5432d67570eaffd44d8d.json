{"ast":null,"code":"var _jsxFileName = \"/Applications/MAMP/htdocs/eky/client/src/components/pages/LoginForm.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useForm } from 'react-hook-form';\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport * as yup from 'yup';\nimport { useTranslation } from 'react-i18next';\nimport { useAuth } from '../../contexts/AuthContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst LoginForm = () => {\n  _s();\n  var _errors$email, _errors$password;\n  const {\n    t\n  } = useTranslation();\n  const navigate = useNavigate();\n  const {\n    login\n  } = useAuth();\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [loginError, setLoginError] = useState('');\n  const getApiUrl = () => {\n    if (process.env.REACT_APP_API_URL) return process.env.REACT_APP_API_URL;\n    if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {\n      return `http://${window.location.hostname}:3001`;\n    }\n    return `http://172.20.10.2:3001`;\n  };\n\n  // ...removed social login handler...\n\n  const schema = yup.object().shape({\n    email: yup.string().email(t('validation.emailInvalid')).required(t('validation.emailRequired')),\n    password: yup.string().min(4, t('validation.passwordMin', {\n      min: 4\n    })).max(20).required(t('validation.passwordRequired'))\n  });\n  const {\n    register,\n    handleSubmit,\n    formState: {\n      errors\n    }\n  } = useForm({\n    resolver: yupResolver(schema)\n  });\n  const onSubmit = async data => {\n    console.log('üîê LOGIN ATTEMPT:', data.email);\n    setIsSubmitting(true);\n    setLoginError('');\n    try {\n      const result = await login(data.email, data.password);\n      console.log('üîê LOGIN RESULT:', result);\n      if (result.success) {\n        console.log('‚úÖ Login successful, navigating to home');\n        navigate('/');\n      } else {\n        console.log('‚ùå Login failed:', result.error);\n        setLoginError(result.error || 'Login failed');\n      }\n    } catch (error) {\n      console.error('‚ùå LOGIN ERROR:', error);\n      setLoginError('Network error. Please check your connection and try again.');\n    } finally {\n      console.log('üîê Setting isSubmitting to false');\n      setIsSubmitting(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"main\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: t('login.title')\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      id: \"login-form\",\n      onSubmit: handleSubmit(onSubmit),\n      children: [loginError && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error\",\n        style: {\n          marginBottom: '1rem',\n          padding: '0.5rem',\n          backgroundColor: '#ffebee',\n          border: '1px solid #e57373',\n          borderRadius: '4px'\n        },\n        children: loginError\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"login-email\",\n        children: t('register.email')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"email\",\n        id: \"login-email\",\n        name: \"email\",\n        autoComplete: \"email\",\n        placeholder: t('register.email'),\n        ...register('email')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"error\",\n        children: (_errors$email = errors.email) === null || _errors$email === void 0 ? void 0 : _errors$email.message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"login-password\",\n        children: t('register.password')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"password\",\n        id: \"login-password\",\n        name: \"password\",\n        autoComplete: \"current-password\",\n        placeholder: t('register.password'),\n        ...register('password')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"error\",\n        children: (_errors$password = errors.password) === null || _errors$password === void 0 ? void 0 : _errors$password.message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        id: \"login\",\n        className: \"details\",\n        type: \"submit\",\n        disabled: isSubmitting,\n        children: isSubmitting ? t('button.submitting') || 'Submitting...' : t('button.login') || 'Login'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: () => {\n          console.log('üîç DEBUG: Current state - isSubmitting:', isSubmitting, 'loginError:', loginError);\n          setIsSubmitting(false); // Force reset\n        },\n\n        style: {\n          marginLeft: '10px',\n          backgroundColor: '#ff9800',\n          color: 'white',\n          padding: '5px 10px',\n          border: 'none',\n          borderRadius: '4px'\n        },\n        children: \"Reset Button\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [t('login.remember'), \" \", /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"checkbox\",\n        id: \"login-remember\",\n        name: \"remember\",\n        autoComplete: \"off\",\n        ...register('remember')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 31\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 5\n  }, this);\n};\n_s(LoginForm, \"M0ZSDQhXcIm86TaWW2KSOxMvk/A=\", false, function () {\n  return [useTranslation, useNavigate, useAuth, useForm];\n});\n_c = LoginForm;\nexport default LoginForm;\nvar _c;\n$RefreshReg$(_c, \"LoginForm\");","map":{"version":3,"names":["React","useState","useNavigate","useForm","yupResolver","yup","useTranslation","useAuth","LoginForm","t","navigate","login","isSubmitting","setIsSubmitting","loginError","setLoginError","getApiUrl","process","env","REACT_APP_API_URL","window","location","hostname","schema","object","shape","email","string","required","password","min","max","register","handleSubmit","formState","errors","resolver","onSubmit","data","console","log","result","success","error","marginBottom","padding","backgroundColor","border","borderRadius","message","marginLeft","color"],"sources":["/Applications/MAMP/htdocs/eky/client/src/components/pages/LoginForm.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useForm, SubmitHandler } from 'react-hook-form';\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport * as yup from 'yup';\nimport { useTranslation } from 'react-i18next';\nimport { useAuth } from '../../contexts/AuthContext';\n\ninterface LoginFormData {\n  email: string;\n  password: string;\n  remember?: boolean;\n}\n\nconst LoginForm: React.FC = () => {\n  const { t } = useTranslation();\n  const navigate = useNavigate();\n  const { login } = useAuth();\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [loginError, setLoginError] = useState<string>('');\n\n  const getApiUrl = () => {\n    if (process.env.REACT_APP_API_URL) return process.env.REACT_APP_API_URL;\n    if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {\n      return `http://${window.location.hostname}:3001`;\n    }\n    return `http://172.20.10.2:3001`;\n  };\n\n  // ...removed social login handler...\n\n  const schema = yup.object().shape({\n    email: yup.string().email(t('validation.emailInvalid')).required(t('validation.emailRequired')),\n    password: yup\n      .string()\n      .min(4, t('validation.passwordMin', { min: 4 }))\n      .max(20)\n      .required(t('validation.passwordRequired')),\n  });\n\n  const {\n    register,\n    handleSubmit,\n    formState: { errors },\n  } = useForm<LoginFormData>({\n    resolver: yupResolver(schema),\n  });\n\n  const onSubmit: SubmitHandler<LoginFormData> = async (data) => {\n    console.log('üîê LOGIN ATTEMPT:', data.email);\n    setIsSubmitting(true);\n    setLoginError('');\n    \n    try {\n      const result = await login(data.email, data.password);\n      console.log('üîê LOGIN RESULT:', result);\n      \n      if (result.success) {\n        console.log('‚úÖ Login successful, navigating to home');\n        navigate('/');\n      } else {\n        console.log('‚ùå Login failed:', result.error);\n        setLoginError(result.error || 'Login failed');\n      }\n    } catch (error) {\n      console.error('‚ùå LOGIN ERROR:', error);\n      setLoginError('Network error. Please check your connection and try again.');\n    } finally {\n      console.log('üîê Setting isSubmitting to false');\n      setIsSubmitting(false);\n    }\n  };\n\n  return (\n    <main>\n      <h2>{t('login.title')}</h2>\n      <form id=\"login-form\" onSubmit={handleSubmit(onSubmit)}>\n        {loginError && (\n          <div className=\"error\" style={{ marginBottom: '1rem', padding: '0.5rem', backgroundColor: '#ffebee', border: '1px solid #e57373', borderRadius: '4px' }}>\n            {loginError}\n          </div>\n        )}\n        \n        <label htmlFor=\"login-email\">{t('register.email')}</label>\n        <input type=\"email\" id=\"login-email\" name=\"email\" autoComplete=\"email\" placeholder={t('register.email')} {...register('email')} />\n        <p className=\"error\">{errors.email?.message as string}</p>\n\n        <label htmlFor=\"login-password\">{t('register.password')}</label>\n        <input type=\"password\" id=\"login-password\" name=\"password\" autoComplete=\"current-password\" placeholder={t('register.password')} {...register('password')} />\n        <p className=\"error\">{errors.password?.message as string}</p>\n\n        <button id=\"login\" className=\"details\" type=\"submit\" disabled={isSubmitting}>\n          {isSubmitting ? (t('button.submitting') || 'Submitting...') : (t('button.login') || 'Login')}\n        </button>\n        \n        {/* Debug button - Remove after testing */}\n        <button \n          type=\"button\" \n          onClick={() => {\n            console.log('üîç DEBUG: Current state - isSubmitting:', isSubmitting, 'loginError:', loginError);\n            setIsSubmitting(false); // Force reset\n          }}\n          style={{ marginLeft: '10px', backgroundColor: '#ff9800', color: 'white', padding: '5px 10px', border: 'none', borderRadius: '4px' }}\n        >\n          Reset Button\n        </button>\n      </form>\n\n      <p>\n        {t('login.remember')} <input type=\"checkbox\" id=\"login-remember\" name=\"remember\" autoComplete=\"off\" {...register('remember')} />\n      </p>\n      {/* ...removed alternative social login... */}\n    </main>\n  );\n};\n\nexport default LoginForm;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}