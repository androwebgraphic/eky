{"ast":null,"code":"import _objectSpread from\"/Applications/MAMP/htdocs/eky/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from'react';import{useNavigate}from'react-router-dom';import{useForm}from'react-hook-form';import{yupResolver}from'@hookform/resolvers/yup';import*as yup from'yup';import{useTranslation}from'react-i18next';import{useAuth}from'../../contexts/AuthContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const LoginForm=()=>{var _errors$email,_errors$password;const{t}=useTranslation();const navigate=useNavigate();const{login}=useAuth();const[isSubmitting,setIsSubmitting]=useState(false);const[loginError,setLoginError]=useState('');const getApiUrl=()=>{if(process.env.REACT_APP_API_URL)return process.env.REACT_APP_API_URL;if(window.location.protocol==='https:'){return\"https://\".concat(window.location.hostname);}if(window.location.hostname==='localhost'||window.location.hostname==='127.0.0.1'){return\"http://\".concat(window.location.hostname,\":3001\");}return\"http://172.20.10.2:3001\";};// ...removed social login handler...\nconst schema=yup.object().shape({email:yup.string().email(t('validation.emailInvalid')).required(t('validation.emailRequired')),password:yup.string().min(4,t('validation.passwordMin',{min:4})).max(20).required(t('validation.passwordRequired'))});const{register,handleSubmit,formState:{errors}}=useForm({resolver:yupResolver(schema)});const onSubmit=async data=>{console.log('üîê LOGIN ATTEMPT:',data.email);setIsSubmitting(true);setLoginError('');try{const result=await login(data.email,data.password);console.log('üîê LOGIN RESULT:',result);if(result.success){console.log('‚úÖ Login successful, navigating to home');navigate('/');}else{console.log('‚ùå Login failed:',result.error);setLoginError(result.error||'Login failed');}}catch(error){console.error('‚ùå LOGIN ERROR:',error);setLoginError('Network error. Please check your connection and try again.');}finally{console.log('üîê Setting isSubmitting to false');setIsSubmitting(false);}};return/*#__PURE__*/_jsxs(\"main\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:t('login.title')}),/*#__PURE__*/_jsxs(\"form\",{id:\"login-form\",onSubmit:handleSubmit(onSubmit),children:[loginError&&/*#__PURE__*/_jsx(\"div\",{className:\"error\",style:{marginBottom:'1rem',padding:'0.5rem',backgroundColor:'#ffebee',border:'1px solid #e57373',borderRadius:'4px'},children:loginError}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"login-email\",children:t('register.email')}),/*#__PURE__*/_jsx(\"input\",_objectSpread({type:\"email\",id:\"login-email\",name:\"email\",autoComplete:\"email\",placeholder:t('register.email')},register('email'))),/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:(_errors$email=errors.email)===null||_errors$email===void 0?void 0:_errors$email.message}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"login-password\",children:t('register.password')}),/*#__PURE__*/_jsx(\"input\",_objectSpread({type:\"password\",id:\"login-password\",name:\"password\",autoComplete:\"current-password\",placeholder:t('register.password')},register('password'))),/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:(_errors$password=errors.password)===null||_errors$password===void 0?void 0:_errors$password.message}),/*#__PURE__*/_jsx(\"button\",{id:\"login\",className:\"details\",type:\"submit\",disabled:isSubmitting,children:isSubmitting?t('button.submitting')||'Submitting...':t('button.login')||'Login'}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{console.log('üîç DEBUG: Current state - isSubmitting:',isSubmitting,'loginError:',loginError);setIsSubmitting(false);// Force reset\n},style:{marginLeft:'10px',backgroundColor:'#ff9800',color:'white',padding:'5px 10px',border:'none',borderRadius:'4px'},children:\"Reset Button\"})]}),/*#__PURE__*/_jsxs(\"p\",{children:[t('login.remember'),\" \",/*#__PURE__*/_jsx(\"input\",_objectSpread({type:\"checkbox\",id:\"login-remember\",name:\"remember\",autoComplete:\"off\"},register('remember')))]})]});};export default LoginForm;","map":{"version":3,"names":["React","useState","useNavigate","useForm","yupResolver","yup","useTranslation","useAuth","jsx","_jsx","jsxs","_jsxs","LoginForm","_errors$email","_errors$password","t","navigate","login","isSubmitting","setIsSubmitting","loginError","setLoginError","getApiUrl","process","env","REACT_APP_API_URL","window","location","protocol","concat","hostname","schema","object","shape","email","string","required","password","min","max","register","handleSubmit","formState","errors","resolver","onSubmit","data","console","log","result","success","error","children","id","className","style","marginBottom","padding","backgroundColor","border","borderRadius","htmlFor","_objectSpread","type","name","autoComplete","placeholder","message","disabled","onClick","marginLeft","color"],"sources":["/Applications/MAMP/htdocs/eky/client/src/components/pages/LoginForm.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useForm, SubmitHandler } from 'react-hook-form';\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport * as yup from 'yup';\nimport { useTranslation } from 'react-i18next';\nimport { useAuth } from '../../contexts/AuthContext';\n\ninterface LoginFormData {\n  email: string;\n  password: string;\n  remember?: boolean;\n}\n\nconst LoginForm: React.FC = () => {\n  const { t } = useTranslation();\n  const navigate = useNavigate();\n  const { login } = useAuth();\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [loginError, setLoginError] = useState<string>('');\n\n  const getApiUrl = () => {\n    if (process.env.REACT_APP_API_URL) return process.env.REACT_APP_API_URL;\n    if (window.location.protocol === 'https:') {\n      return `https://${window.location.hostname}`;\n    }\n    if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {\n      return `http://${window.location.hostname}:3001`;\n    }\n    return `http://172.20.10.2:3001`;\n  };\n\n  // ...removed social login handler...\n\n  const schema = yup.object().shape({\n    email: yup.string().email(t('validation.emailInvalid')).required(t('validation.emailRequired')),\n    password: yup\n      .string()\n      .min(4, t('validation.passwordMin', { min: 4 }))\n      .max(20)\n      .required(t('validation.passwordRequired')),\n  });\n\n  const {\n    register,\n    handleSubmit,\n    formState: { errors },\n  } = useForm<LoginFormData>({\n    resolver: yupResolver(schema),\n  });\n\n  const onSubmit: SubmitHandler<LoginFormData> = async (data) => {\n    console.log('üîê LOGIN ATTEMPT:', data.email);\n    setIsSubmitting(true);\n    setLoginError('');\n    \n    try {\n      const result = await login(data.email, data.password);\n      console.log('üîê LOGIN RESULT:', result);\n      \n      if (result.success) {\n        console.log('‚úÖ Login successful, navigating to home');\n        navigate('/');\n      } else {\n        console.log('‚ùå Login failed:', result.error);\n        setLoginError(result.error || 'Login failed');\n      }\n    } catch (error) {\n      console.error('‚ùå LOGIN ERROR:', error);\n      setLoginError('Network error. Please check your connection and try again.');\n    } finally {\n      console.log('üîê Setting isSubmitting to false');\n      setIsSubmitting(false);\n    }\n  };\n\n  return (\n    <main>\n      <h2>{t('login.title')}</h2>\n      <form id=\"login-form\" onSubmit={handleSubmit(onSubmit)}>\n        {loginError && (\n          <div className=\"error\" style={{ marginBottom: '1rem', padding: '0.5rem', backgroundColor: '#ffebee', border: '1px solid #e57373', borderRadius: '4px' }}>\n            {loginError}\n          </div>\n        )}\n        \n        <label htmlFor=\"login-email\">{t('register.email')}</label>\n        <input type=\"email\" id=\"login-email\" name=\"email\" autoComplete=\"email\" placeholder={t('register.email')} {...register('email')} />\n        <p className=\"error\">{errors.email?.message as string}</p>\n\n        <label htmlFor=\"login-password\">{t('register.password')}</label>\n        <input type=\"password\" id=\"login-password\" name=\"password\" autoComplete=\"current-password\" placeholder={t('register.password')} {...register('password')} />\n        <p className=\"error\">{errors.password?.message as string}</p>\n\n        <button id=\"login\" className=\"details\" type=\"submit\" disabled={isSubmitting}>\n          {isSubmitting ? (t('button.submitting') || 'Submitting...') : (t('button.login') || 'Login')}\n        </button>\n        \n        {/* Debug button - Remove after testing */}\n        <button \n          type=\"button\" \n          onClick={() => {\n            console.log('üîç DEBUG: Current state - isSubmitting:', isSubmitting, 'loginError:', loginError);\n            setIsSubmitting(false); // Force reset\n          }}\n          style={{ marginLeft: '10px', backgroundColor: '#ff9800', color: 'white', padding: '5px 10px', border: 'none', borderRadius: '4px' }}\n        >\n          Reset Button\n        </button>\n      </form>\n\n      <p>\n        {t('login.remember')} <input type=\"checkbox\" id=\"login-remember\" name=\"remember\" autoComplete=\"off\" {...register('remember')} />\n      </p>\n      {/* ...removed alternative social login... */}\n    </main>\n  );\n};\n\nexport default LoginForm;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}