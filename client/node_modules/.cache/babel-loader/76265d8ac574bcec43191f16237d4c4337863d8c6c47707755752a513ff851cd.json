{"ast":null,"code":"import _objectSpread from\"/Applications/MAMP/htdocs/eky/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{createPortal}from'react-dom';import{useSearchParams}from'react-router-dom';import EditDogModal from'./EditDogModal';import Search from'../Search';import CardSmall from'../CardSmall';import DogDetails from'./DogDetails';import{useTranslation}from'react-i18next';import{useAuth}from'../../contexts/AuthContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const DogList=()=>{// Helper to get API URL\nconst getApiUrl=()=>{if(process.env.REACT_APP_API_URL)return process.env.REACT_APP_API_URL;return'http://localhost:3001';};// Helper to refetch dogs after adoption actions\nconst refetchDogs=async()=>{setLoading(true);setError(null);try{const headers={'Content-Type':'application/json'};if(token){headers['Authorization']=\"Bearer \".concat(token);}const res=await fetch(\"\".concat(getApiUrl(),\"/api/dogs\"),{cache:'no-store',headers});if(!res.ok){const txt=await res.text();throw new Error(txt||\"Request failed (\".concat(res.status,\")\"));}const data=await res.json();setDogs(data);}catch(err){console.error('Failed to fetch dogs',err);setError(err.message||t('doglist.failedToLoad'));}finally{setLoading(false);}};const{t}=useTranslation();const{user,token,isAuthenticated}=useAuth();const[searchParams,setSearchParams]=useSearchParams();const[dogs,setDogs]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[selectedDog,setSelectedDog]=useState(null);const[editDog,setEditDog]=useState(null);const[modalPosition,setModalPosition]=useState(null);// Search filters - initialize from URL parameters\nconst[searchTerm,setSearchTerm]=useState(searchParams.get('search')||'');const[genderFilter,setGenderFilter]=useState(searchParams.get('gender')||'');const[sizeFilter,setSizeFilter]=useState(searchParams.get('size')||'');const[locationFilter,setLocationFilter]=useState('');// Get unique locations for dropdown\nconst availableLocations=Array.from(new Set(dogs.map(dog=>dog.location||dog.place).filter(Boolean).sort()));// Store availableLocations in localStorage for Footer search modal\nReact.useEffect(()=>{if(availableLocations.length>0){localStorage.setItem('availableLocations',JSON.stringify(availableLocations));}},[availableLocations]);// Update URL parameters when search filters change\nuseEffect(()=>{const params=new URLSearchParams();if(searchTerm)params.set('search',searchTerm);if(genderFilter)params.set('gender',genderFilter);if(sizeFilter)params.set('size',sizeFilter);// Only update URL if params have changed\nif(params.toString()!==searchParams.toString()){setSearchParams(params);}},[searchTerm,genderFilter,sizeFilter,setSearchParams,searchParams]);// Listen for URL parameter changes (e.g., from search modal)\nuseEffect(()=>{const search=searchParams.get('search')||'';const gender=searchParams.get('gender')||'';const size=searchParams.get('size')||'';if(search!==searchTerm)setSearchTerm(search);if(gender!==genderFilter)setGenderFilter(gender);if(size!==sizeFilter)setSizeFilter(size);},[searchParams,searchTerm,genderFilter,sizeFilter]);// Filter dogs based on search criteria\nconst filteredDogs=dogs.filter(dog=>{if(!searchTerm&&!genderFilter&&!sizeFilter&&!locationFilter){return true;// No filters applied, show all dogs\n}const matchesSearch=!searchTerm||dog.name&&dog.name.toLowerCase().includes(searchTerm.toLowerCase())||dog.breed&&dog.breed.toLowerCase().includes(searchTerm.toLowerCase())||dog.location&&dog.location.toLowerCase().includes(searchTerm.toLowerCase())||dog.place&&dog.place.toLowerCase().includes(searchTerm.toLowerCase());const matchesGender=!genderFilter||dog.gender===genderFilter;const matchesSize=!sizeFilter||dog.size===sizeFilter;const matchesLocation=!locationFilter||dog.location===locationFilter||dog.place===locationFilter;return matchesSearch&&matchesGender&&matchesSize&&matchesLocation;});// Debug logging to help identify the issue\n// Add/remove modal-open class when modal state changes\nuseEffect(()=>{if(selectedDog||editDog){document.body.classList.add('modal-open');}else{document.body.classList.remove('modal-open');}// Cleanup on unmount\nreturn()=>{document.body.classList.remove('modal-open');};},[selectedDog,editDog]);useEffect(()=>{const getApiUrl=()=>{if(process.env.REACT_APP_API_URL)return process.env.REACT_APP_API_URL;return'http://localhost:3001';};const API_URL=getApiUrl();let mounted=true;(async()=>{setLoading(true);setError(null);try{const headers={'Content-Type':'application/json'};if(token){headers['Authorization']=\"Bearer \".concat(token);}const res=await fetch(\"\".concat(API_URL,\"/api/dogs\"),{cache:'no-store',headers});if(!res.ok){const txt=await res.text();throw new Error(txt||\"Request failed (\".concat(res.status,\")\"));}const data=await res.json();// Debug: log images array for each dog\nif(mounted)setDogs(data);}catch(err){console.error('Failed to fetch dogs',err);if(mounted)setError(err.message||t('doglist.failedToLoad'));}finally{if(mounted)setLoading(false);}})();return()=>{mounted=false;};},[token,t]);return/*#__PURE__*/_jsxs(\"main\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:t('doglist.title')}),/*#__PURE__*/_jsx(Search,{searchTerm:searchTerm,onSearchChange:setSearchTerm,genderFilter:genderFilter,onGenderChange:setGenderFilter,sizeFilter:sizeFilter,onSizeChange:setSizeFilter,locationFilter:locationFilter,onLocationChange:setLocationFilter,availableLocations:availableLocations}),loading&&/*#__PURE__*/_jsx(\"p\",{className:\"log\",children:t('doglist.loading')}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:error}),!loading&&!error&&dogs.length===0&&/*#__PURE__*/_jsxs(\"div\",{className:\"empty\",children:[/*#__PURE__*/_jsx(\"p\",{children:t('doglist.empty')}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"/dodajpsa\",children:t('doglist.addFirst')})})]}),!loading&&!error&&dogs.length>0&&filteredDogs.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"empty\",children:/*#__PURE__*/_jsx(\"p\",{children:t('search.noResults')})}),/*#__PURE__*/_jsx(\"div\",{id:\"Doglist\",children:!loading&&!error&&filteredDogs.map(d=>{// Extract dog owner ID (handle both string and object, and _id vs id)\nlet dogOwnerId;if(typeof d.user==='string'){dogOwnerId=d.user;}else if(d.user){// Try _id first, then id\ndogOwnerId=d.user._id||d.user.id;}// Extract current user ID\nconst currentUserId=user===null||user===void 0?void 0:user._id;// Check if user is superadmin\nconst isSuperAdmin=(user===null||user===void 0?void 0:user.role)==='superadmin';// Compare as strings to avoid type mismatches\nconst isOwner=Boolean(currentUserId&&dogOwnerId&&String(currentUserId)===String(dogOwnerId));// User can edit if they're the owner OR if they're a superadmin\nconst canEdit=Boolean(isAuthenticated&&(isOwner||isSuperAdmin));return/*#__PURE__*/_jsx(CardSmall,{_id:d._id,name:d.name,breed:d.breed,age:d.age,likes:d.likes||[],images:d.images,video:d.video,thumbnail:d.thumbnail,color:d.color,place:d.place||d.location,description:d.description,size:d.size,gender:d.gender,vaccinated:d.vaccinated,neutered:d.neutered,user:d.user,canEdit:canEdit,adoptionStatus:d.adoptionStatus,adoptionQueue:d.adoptionQueue,onDogUpdate:update=>{console.log('[DogList] onDogUpdate received:',update);if(update&&update.remove&&update.id){setDogs(prev=>{console.log('[DogList] Dog list before removal:',prev);const filtered=prev.filter(dog=>dog._id!==update.id);console.log('[DogList] Dog list after removal:',filtered);return filtered;});if(selectedDog&&selectedDog._id===update.id)setSelectedDog(null);}else{// Always refetch dogs after adoption actions to ensure correct state\nrefetchDogs();if(selectedDog&&update&&selectedDog._id===update._id)setSelectedDog(update);}},onViewDetails:event=>{const rect=event.currentTarget.getBoundingClientRect();setModalPosition({x:rect.left+rect.width/2,y:rect.top+rect.height/2});setSelectedDog(d);},onEdit:event=>{const rect=event.currentTarget.getBoundingClientRect();setModalPosition({x:rect.left+rect.width/2,y:rect.top+rect.height/2});handleEditDog(d);},onRemove:()=>handleRemoveDog(d)},d._id);})}),selectedDog&&modalPosition&&/*#__PURE__*/createPortal(/*#__PURE__*/_jsx(\"div\",{style:{position:'fixed',top:0,left:0,width:'100vw',height:'100vh',backgroundColor:'rgba(0, 0, 0, 0.8)',zIndex:2147483647,display:'flex',alignItems:'center',justifyContent:'center',padding:'2rem',boxSizing:'border-box'},onClick:()=>{setSelectedDog(null);setModalPosition(null);},children:/*#__PURE__*/_jsxs(\"div\",{style:{backgroundColor:'white',borderRadius:'12px',padding:'2rem',maxWidth:'90vw',maxHeight:'90vh',overflowY:'auto',position:'relative',zIndex:2147483647,boxShadow:'0 20px 60px rgba(0,0,0,0.5)'},onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsx(\"button\",{style:{position:'absolute',top:15,right:15,width:56,height:56,backgroundColor:'#e74c3c',color:'#fff',border:'none',borderRadius:'50%',display:'flex',alignItems:'center',justifyContent:'center',boxShadow:'0 4px 12px rgba(0,0,0,0.3)',cursor:'pointer',zIndex:2147483647,padding:0},onClick:()=>{setSelectedDog(null);setModalPosition(null);},title:t('common.close'),\"aria-label\":t('common.close'),children:/*#__PURE__*/_jsx(\"span\",{style:{fontSize:40,fontWeight:900,lineHeight:'56px',width:'100%',textAlign:'center',display:'block',userSelect:'none',letterSpacing:2},children:\"\\xD7\"})}),/*#__PURE__*/_jsx(DogDetails,_objectSpread(_objectSpread({},selectedDog),{},{adoptionStatus:selectedDog===null||selectedDog===void 0?void 0:selectedDog.adoptionStatus,adoptionQueue:selectedDog===null||selectedDog===void 0?void 0:selectedDog.adoptionQueue,onDogUpdate:async update=>{// Always reload the full dog list and update selected dog with latest from backend\nconst getApiUrl=()=>{if(process.env.REACT_APP_API_URL)return process.env.REACT_APP_API_URL;return'http://localhost:3001';};const API_URL=getApiUrl();setLoading(true);setError(null);try{const headers={'Content-Type':'application/json'};if(token)headers['Authorization']=\"Bearer \".concat(token);const res=await fetch(\"\".concat(API_URL,\"/api/dogs\"),{cache:'no-store',headers});if(!res.ok)throw new Error((await res.text())||\"Request failed (\".concat(res.status,\")\"));const data=await res.json();setDogs(data);// Update selected dog with latest data\nif(update&&update._id){const latest=data.find(d=>d._id===update._id);setSelectedDog(latest||null);}else if(update&&update.remove){setSelectedDog(null);}}catch(err){setError(err.message||t('doglist.failedToLoad'));}finally{setLoading(false);}},onDogChanged:async()=>{// Also reload the full dog list after adoption actions\nconst getApiUrl=()=>{if(process.env.REACT_APP_API_URL)return process.env.REACT_APP_API_URL;return'http://localhost:3001';};const API_URL=getApiUrl();setLoading(true);setError(null);try{const headers={'Content-Type':'application/json'};if(token)headers['Authorization']=\"Bearer \".concat(token);const res=await fetch(\"\".concat(API_URL,\"/api/dogs\"),{cache:'no-store',headers});if(!res.ok)throw new Error((await res.text())||\"Request failed (\".concat(res.status,\")\"));const data=await res.json();setDogs(data);// If a dog is selected, update it\nif(selectedDog&&selectedDog._id){const latest=data.find(d=>d._id===selectedDog._id);setSelectedDog(latest||null);}}catch(err){setError(err.message||t('doglist.failedToLoad'));}finally{setLoading(false);}},onClose:()=>{setSelectedDog(null);setModalPosition(null);}}))]})}),document.body),editDog&&modalPosition&&/*#__PURE__*/createPortal(/*#__PURE__*/_jsx(EditDogModal,{dog:editDog,onClose:()=>{setEditDog(null);setModalPosition(null);},onSave:handleSaveEditDog,modalPosition:modalPosition}),document.body)]});// Handler for editing a dog\nfunction handleEditDog(dog){setEditDog(dog);}// Handler for saving an edited dog\nasync function handleSaveEditDog(updatedDog){// Re-fetch the full dog list after editing\nconst getApiUrl=()=>{if(process.env.REACT_APP_API_URL)return process.env.REACT_APP_API_URL;return'http://localhost:3001';};const API_URL=getApiUrl();setLoading(true);setError(null);try{const headers={'Content-Type':'application/json'};if(token)headers['Authorization']=\"Bearer \".concat(token);const res=await fetch(\"\".concat(API_URL,\"/api/dogs\"),{cache:'no-store',headers});if(!res.ok)throw new Error((await res.text())||\"Request failed (\".concat(res.status,\")\"));const data=await res.json();setDogs(data);}catch(err){setError(err.message||t('doglist.failedToLoad'));}finally{setLoading(false);}}// Handler for removing a dog\nasync function handleRemoveDog(dog){if(!window.confirm(t('doglist.confirmRemove',{name:dog.name})))return;try{// Debug auth context values\nconsole.log('Delete request - Auth context values:',{user:user,token:token,isAuthenticated:isAuthenticated,localStorageToken:localStorage.getItem('token'),localStorageUser:localStorage.getItem('user')});const getApiUrl=()=>{if(process.env.REACT_APP_API_URL)return process.env.REACT_APP_API_URL;return'http://localhost:3001';};const API_URL=getApiUrl();const headers={'Content-Type':'application/json'};if(token){headers['Authorization']=\"Bearer \".concat(token);console.log('Delete request - Using token:',token.substring(0,20)+'...');}else{console.error('Delete request - No token available!');}console.log('Delete request details:',{url:\"\".concat(API_URL,\"/api/dogs/\").concat(dog._id),method:'DELETE',headers,dogId:dog._id,dogName:dog.name});const resp=await fetch(\"\".concat(API_URL,\"/api/dogs/\").concat(dog._id),{method:'DELETE',headers});console.log('Delete response status:',resp.status);if(!resp.ok){const errorText=await resp.text();console.error('Delete failed:',resp.status,errorText);throw new Error(\"\".concat(resp.status,\": \").concat(errorText));}console.log('Delete successful, removing from UI');setDogs(dogs=>dogs.filter(d=>d._id!==dog._id));// Close modals if open for this dog\nsetEditDog(editDog=>editDog&&editDog._id===dog._id?null:editDog);setSelectedDog(selectedDog=>selectedDog&&selectedDog._id===dog._id?null:selectedDog);}catch(err){console.error('Delete error details:',err);alert(err.message||t('doglist.failedToRemove'));}}};export default DogList;","map":{"version":3,"names":["React","useState","useEffect","createPortal","useSearchParams","EditDogModal","Search","CardSmall","DogDetails","useTranslation","useAuth","jsx","_jsx","jsxs","_jsxs","DogList","getApiUrl","process","env","REACT_APP_API_URL","refetchDogs","setLoading","setError","headers","token","concat","res","fetch","cache","ok","txt","text","Error","status","data","json","setDogs","err","console","error","message","t","user","isAuthenticated","searchParams","setSearchParams","dogs","loading","selectedDog","setSelectedDog","editDog","setEditDog","modalPosition","setModalPosition","searchTerm","setSearchTerm","get","genderFilter","setGenderFilter","sizeFilter","setSizeFilter","locationFilter","setLocationFilter","availableLocations","Array","from","Set","map","dog","location","place","filter","Boolean","sort","length","localStorage","setItem","JSON","stringify","params","URLSearchParams","set","toString","search","gender","size","filteredDogs","matchesSearch","name","toLowerCase","includes","breed","matchesGender","matchesSize","matchesLocation","document","body","classList","add","remove","API_URL","mounted","children","onSearchChange","onGenderChange","onSizeChange","onLocationChange","className","href","id","d","dogOwnerId","_id","currentUserId","isSuperAdmin","role","isOwner","String","canEdit","age","likes","images","video","thumbnail","color","description","vaccinated","neutered","adoptionStatus","adoptionQueue","onDogUpdate","update","log","prev","filtered","onViewDetails","event","rect","currentTarget","getBoundingClientRect","x","left","width","y","top","height","onEdit","handleEditDog","onRemove","handleRemoveDog","style","position","backgroundColor","zIndex","display","alignItems","justifyContent","padding","boxSizing","onClick","borderRadius","maxWidth","maxHeight","overflowY","boxShadow","e","stopPropagation","right","border","cursor","title","fontSize","fontWeight","lineHeight","textAlign","userSelect","letterSpacing","_objectSpread","latest","find","onDogChanged","onClose","onSave","handleSaveEditDog","updatedDog","window","confirm","localStorageToken","getItem","localStorageUser","substring","url","method","dogId","dogName","resp","errorText","alert"],"sources":["/Applications/MAMP/htdocs/eky/client/src/components/pages/DogList.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { createPortal } from 'react-dom';\nimport { useSearchParams } from 'react-router-dom';\nimport EditDogModal from './EditDogModal';\nimport Search from '../Search';\nimport CardSmall from '../CardSmall';\nimport DogDetails from './DogDetails';\nimport { useTranslation } from 'react-i18next';\nimport { useAuth } from '../../contexts/AuthContext';\n\ninterface Dog {\n  _id: string;\n  name: string;\n  breed?: string;\n  age?: number;\n  images?: any[];\n  video?: any;\n  thumbnail?: any;\n  color?: string;\n  place?: string;\n  description?: string;\n  size?: string;\n  gender?: 'male' | 'female';\n  vaccinated?: boolean;\n  neutered?: boolean;\n  location?: string;\n  likes?: string[];\n  user?: { \n    _id: string; \n    name: string; \n    username: string;\n    email?: string;\n    phone?: string;\n    person?: 'private' | 'organization';\n  };\n  adoptionStatus?: string;\n  adoptionQueue?: any;\n}\n\nconst DogList: React.FC = () => {\n      // Helper to get API URL\n      const getApiUrl = () => {\n        if (process.env.REACT_APP_API_URL) return process.env.REACT_APP_API_URL;\n        return 'http://localhost:3001';\n      };\n    // Helper to refetch dogs after adoption actions\n    const refetchDogs = async () => {\n      setLoading(true);\n      setError(null);\n      try {\n        const headers: any = { 'Content-Type': 'application/json' };\n        if (token) {\n          headers['Authorization'] = `Bearer ${token}`;\n        }\n        const res = await fetch(`${getApiUrl()}/api/dogs`, { \n          cache: 'no-store',\n          headers \n        });\n        if (!res.ok) {\n          const txt = await res.text();\n          throw new Error(txt || `Request failed (${res.status})`);\n        }\n        const data = await res.json();\n        setDogs(data);\n      } catch (err: any) {\n        console.error('Failed to fetch dogs', err);\n        setError(err.message || t('doglist.failedToLoad'));\n      } finally {\n        setLoading(false);\n      }\n    };\n  const { t } = useTranslation();\n  const { user, token, isAuthenticated } = useAuth();\n  const [searchParams, setSearchParams] = useSearchParams();\n  const [dogs, setDogs] = useState<Dog[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [selectedDog, setSelectedDog] = useState<Dog | null>(null);\n  const [editDog, setEditDog] = useState<Dog | null>(null);\n  const [modalPosition, setModalPosition] = useState<{x: number, y: number} | null>(null);\n  \n  // Search filters - initialize from URL parameters\n  const [searchTerm, setSearchTerm] = useState(searchParams.get('search') || '');\n  const [genderFilter, setGenderFilter] = useState(searchParams.get('gender') || '');\n  const [sizeFilter, setSizeFilter] = useState(searchParams.get('size') || '');\n  const [locationFilter, setLocationFilter] = useState('');\n  \n\n  // Get unique locations for dropdown\n  const availableLocations = Array.from(new Set(\n    dogs.map(dog => dog.location || dog.place)\n      .filter(Boolean)\n      .sort()\n  ));\n  // Store availableLocations in localStorage for Footer search modal\n  React.useEffect(() => {\n    if (availableLocations.length > 0) {\n      localStorage.setItem('availableLocations', JSON.stringify(availableLocations));\n    }\n  }, [availableLocations]);\n  \n  // Update URL parameters when search filters change\n  useEffect(() => {\n    const params = new URLSearchParams();\n    if (searchTerm) params.set('search', searchTerm);\n    if (genderFilter) params.set('gender', genderFilter);\n    if (sizeFilter) params.set('size', sizeFilter);\n    \n    // Only update URL if params have changed\n    if (params.toString() !== searchParams.toString()) {\n      setSearchParams(params);\n    }\n  }, [searchTerm, genderFilter, sizeFilter, setSearchParams, searchParams]);\n\n  // Listen for URL parameter changes (e.g., from search modal)\n  useEffect(() => {\n    const search = searchParams.get('search') || '';\n    const gender = searchParams.get('gender') || '';\n    const size = searchParams.get('size') || '';\n    \n    if (search !== searchTerm) setSearchTerm(search);\n    if (gender !== genderFilter) setGenderFilter(gender);\n    if (size !== sizeFilter) setSizeFilter(size);\n  }, [searchParams, searchTerm, genderFilter, sizeFilter]);\n  \n  // Filter dogs based on search criteria\n  const filteredDogs = dogs.filter(dog => {\n    if (!searchTerm && !genderFilter && !sizeFilter && !locationFilter) {\n      return true; // No filters applied, show all dogs\n    }\n    \n    const matchesSearch = !searchTerm || \n      (dog.name && dog.name.toLowerCase().includes(searchTerm.toLowerCase())) ||\n      (dog.breed && dog.breed.toLowerCase().includes(searchTerm.toLowerCase())) ||\n      (dog.location && dog.location.toLowerCase().includes(searchTerm.toLowerCase())) ||\n      (dog.place && dog.place.toLowerCase().includes(searchTerm.toLowerCase()));\n    \n    const matchesGender = !genderFilter || dog.gender === genderFilter;\n    const matchesSize = !sizeFilter || dog.size === sizeFilter;\n    const matchesLocation = !locationFilter || \n      dog.location === locationFilter || dog.place === locationFilter;\n    \n    return matchesSearch && matchesGender && matchesSize && matchesLocation;\n  });\n  \n  // Debug logging to help identify the issue\n  \n\n  // Add/remove modal-open class when modal state changes\n  useEffect(() => {\n    if (selectedDog || editDog) {\n      document.body.classList.add('modal-open');\n    } else {\n      document.body.classList.remove('modal-open');\n    }\n    \n    // Cleanup on unmount\n    return () => {\n      document.body.classList.remove('modal-open');\n    };\n  }, [selectedDog, editDog]);\n\n  useEffect(() => {\n    const getApiUrl = () => {\n      if (process.env.REACT_APP_API_URL) return process.env.REACT_APP_API_URL;\n      return 'http://localhost:3001';\n    };\n    const API_URL = getApiUrl();\n    let mounted = true;\n\n    (async () => {\n      setLoading(true);\n      setError(null);\n      try {\n        const headers: any = { 'Content-Type': 'application/json' };\n        if (token) {\n          headers['Authorization'] = `Bearer ${token}`;\n        }\n        const res = await fetch(`${API_URL}/api/dogs`, { \n          cache: 'no-store',\n          headers \n        });\n        if (!res.ok) {\n          const txt = await res.text();\n          throw new Error(txt || `Request failed (${res.status})`);\n        }\n        const data = await res.json();\n        // Debug: log images array for each dog\n        if (mounted) setDogs(data);\n      } catch (err: any) {\n        console.error('Failed to fetch dogs', err);\n        if (mounted) setError(err.message || t('doglist.failedToLoad'));\n      } finally {\n        if (mounted) setLoading(false);\n      }\n    })();\n\n    return () => { mounted = false; };\n  }, [token, t]);\n\n  return (\n    <main>\n      <h2>{t('doglist.title')}</h2>\n      <Search \n        searchTerm={searchTerm}\n        onSearchChange={setSearchTerm}\n        genderFilter={genderFilter}\n        onGenderChange={setGenderFilter}\n        sizeFilter={sizeFilter}\n        onSizeChange={setSizeFilter}\n        locationFilter={locationFilter}\n        onLocationChange={setLocationFilter}\n        availableLocations={availableLocations}\n      />\n\n      {loading && <p className=\"log\">{t('doglist.loading')}</p>}\n      {error && <p className=\"error\">{error}</p>}\n\n      {!loading && !error && dogs.length === 0 && (\n        <div className=\"empty\">\n          <p>{t('doglist.empty')}</p>\n          <p>\n            <a href=\"/dodajpsa\">{t('doglist.addFirst')}</a>\n          </p>\n        </div>\n      )}\n\n      {!loading && !error && dogs.length > 0 && filteredDogs.length === 0 && (\n        <div className=\"empty\">\n          <p>{t('search.noResults')}</p>\n        </div>\n      )}\n\n      <div id=\"Doglist\">\n\n        {!loading && !error && filteredDogs.map(d => {\n          // Extract dog owner ID (handle both string and object, and _id vs id)\n          let dogOwnerId;\n          if (typeof (d.user as any) === 'string') {\n            dogOwnerId = d.user as any;\n          } else if (d.user) {\n            // Try _id first, then id\n            dogOwnerId = (d.user as any)._id || (d.user as any).id;\n          }\n          \n          // Extract current user ID\n          const currentUserId = user?._id;\n          \n          // Check if user is superadmin\n          const isSuperAdmin = user?.role === 'superadmin';\n          \n          // Compare as strings to avoid type mismatches\n          const isOwner = Boolean(\n            currentUserId && \n            dogOwnerId && \n            String(currentUserId) === String(dogOwnerId)\n          );\n          \n          // User can edit if they're the owner OR if they're a superadmin\n          const canEdit = Boolean(isAuthenticated && (isOwner || isSuperAdmin));\n          \n          return (\n            <CardSmall\n              key={d._id}\n              _id={d._id}\n              name={d.name}\n              breed={d.breed}\n              age={d.age}\n              likes={d.likes || []}\n              images={d.images}\n              video={d.video}\n              thumbnail={d.thumbnail}\n              color={d.color}\n              place={d.place || d.location}\n              description={d.description}\n              size={d.size}\n              gender={d.gender}\n              vaccinated={d.vaccinated}\n              neutered={d.neutered}\n              user={d.user}\n              canEdit={canEdit}\n              adoptionStatus={d.adoptionStatus}\n              adoptionQueue={d.adoptionQueue}\n              onDogUpdate={update => {\n                console.log('[DogList] onDogUpdate received:', update);\n                if (update && update.remove && update.id) {\n                  setDogs(prev => {\n                    console.log('[DogList] Dog list before removal:', prev);\n                    const filtered = prev.filter(dog => dog._id !== update.id);\n                    console.log('[DogList] Dog list after removal:', filtered);\n                    return filtered;\n                  });\n                  if (selectedDog && selectedDog._id === update.id) setSelectedDog(null);\n                } else {\n                  // Always refetch dogs after adoption actions to ensure correct state\n                  refetchDogs();\n                  if (selectedDog && update && selectedDog._id === update._id) setSelectedDog(update);\n                }\n              }}\n              onViewDetails={(event) => {\n                const rect = event.currentTarget.getBoundingClientRect();\n                setModalPosition({\n                  x: rect.left + rect.width / 2,\n                  y: rect.top + rect.height / 2\n                });\n                setSelectedDog(d);\n              }}\n              onEdit={(event) => {\n                const rect = event.currentTarget.getBoundingClientRect();\n                setModalPosition({\n                  x: rect.left + rect.width / 2,\n                  y: rect.top + rect.height / 2\n                });\n                handleEditDog(d);\n              }}\n              onRemove={() => handleRemoveDog(d)}\n            />\n          );\n        })}\n      </div>\n\n      {selectedDog && modalPosition && createPortal(\n        <div \n          style={{\n            position: 'fixed',\n            top: 0,\n            left: 0,\n            width: '100vw',\n            height: '100vh',\n            backgroundColor: 'rgba(0, 0, 0, 0.8)',\n            zIndex: 2147483647,\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            padding: '2rem',\n            boxSizing: 'border-box'\n          }}\n          onClick={() => {\n            setSelectedDog(null);\n            setModalPosition(null);\n          }}\n        >\n          <div \n            style={{\n              backgroundColor: 'white',\n              borderRadius: '12px',\n              padding: '2rem',\n              maxWidth: '90vw',\n              maxHeight: '90vh',\n              overflowY: 'auto',\n              position: 'relative',\n              zIndex: 2147483647,\n              boxShadow: '0 20px 60px rgba(0,0,0,0.5)'\n            }}\n            onClick={e => e.stopPropagation()}\n          >\n            <button\n              style={{\n                position: 'absolute',\n                top: 15,\n                right: 15,\n                width: 56,\n                height: 56,\n                backgroundColor: '#e74c3c',\n                color: '#fff',\n                border: 'none',\n                borderRadius: '50%',\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'center',\n                boxShadow: '0 4px 12px rgba(0,0,0,0.3)',\n                cursor: 'pointer',\n                zIndex: 2147483647,\n                padding: 0\n              }}\n              onClick={() => {\n                setSelectedDog(null);\n                setModalPosition(null);\n              }}\n              title={t('common.close')}\n              aria-label={t('common.close')}\n            >\n              <span style={{\n                fontSize: 40,\n                fontWeight: 900,\n                lineHeight: '56px',\n                width: '100%',\n                textAlign: 'center',\n                display: 'block',\n                userSelect: 'none',\n                letterSpacing: 2\n              }}>\n                Ã—\n              </span>\n            </button>\n            <DogDetails\n              {...selectedDog}\n              adoptionStatus={selectedDog?.adoptionStatus}\n              adoptionQueue={selectedDog?.adoptionQueue}\n              onDogUpdate={async update => {\n                // Always reload the full dog list and update selected dog with latest from backend\n                const getApiUrl = () => {\n                  if (process.env.REACT_APP_API_URL) return process.env.REACT_APP_API_URL;\n                  return 'http://localhost:3001';\n                };\n                const API_URL = getApiUrl();\n                setLoading(true);\n                setError(null);\n                try {\n                  const headers = { 'Content-Type': 'application/json' };\n                  if (token) headers['Authorization'] = `Bearer ${token}`;\n                  const res = await fetch(`${API_URL}/api/dogs`, { cache: 'no-store', headers });\n                  if (!res.ok) throw new Error(await res.text() || `Request failed (${res.status})`);\n                  const data = await res.json();\n                  setDogs(data);\n                  // Update selected dog with latest data\n                  if (update && update._id) {\n                    const latest = data.find((d: any) => d._id === update._id);\n                    setSelectedDog(latest || null);\n                  } else if (update && update.remove) {\n                    setSelectedDog(null);\n                  }\n                } catch (err: any) {\n                  setError(err.message || t('doglist.failedToLoad'));\n                } finally {\n                  setLoading(false);\n                }\n              }}\n              onDogChanged={async () => {\n                // Also reload the full dog list after adoption actions\n                const getApiUrl = () => {\n                  if (process.env.REACT_APP_API_URL) return process.env.REACT_APP_API_URL;\n                  return 'http://localhost:3001';\n                };\n                const API_URL = getApiUrl();\n                setLoading(true);\n                setError(null);\n                try {\n                  const headers = { 'Content-Type': 'application/json' };\n                  if (token) headers['Authorization'] = `Bearer ${token}`;\n                  const res = await fetch(`${API_URL}/api/dogs`, { cache: 'no-store', headers });\n                  if (!res.ok) throw new Error(await res.text() || `Request failed (${res.status})`);\n                  const data = await res.json();\n                  setDogs(data);\n                  // If a dog is selected, update it\n                  if (selectedDog && selectedDog._id) {\n                    const latest = data.find((d: any) => d._id === selectedDog._id);\n                    setSelectedDog(latest || null);\n                  }\n                } catch (err: any) {\n                  setError(err.message || t('doglist.failedToLoad'));\n                } finally {\n                  setLoading(false);\n                }\n              }}\n              onClose={() => {\n                setSelectedDog(null);\n                setModalPosition(null);\n              }}\n            />\n          </div>\n        </div>,\n        document.body\n      )}\n\n      {editDog && modalPosition && createPortal(\n        <EditDogModal\n          dog={editDog}\n          onClose={() => {\n            setEditDog(null);\n            setModalPosition(null);\n          }}\n          onSave={handleSaveEditDog}\n          modalPosition={modalPosition}\n        />,\n        document.body\n      )}\n    </main>\n  );\n\n  // Handler for editing a dog\n  function handleEditDog(dog: Dog) {\n    setEditDog(dog);\n  }\n\n  // Handler for saving an edited dog\n  async function handleSaveEditDog(updatedDog: Dog) {\n    // Re-fetch the full dog list after editing\n    const getApiUrl = () => {\n      if (process.env.REACT_APP_API_URL) return process.env.REACT_APP_API_URL;\n      return 'http://localhost:3001';\n    };\n    const API_URL = getApiUrl();\n    setLoading(true);\n    setError(null);\n    try {\n      const headers: any = { 'Content-Type': 'application/json' };\n      if (token) headers['Authorization'] = `Bearer ${token}`;\n      const res = await fetch(`${API_URL}/api/dogs`, { cache: 'no-store', headers });\n      if (!res.ok) throw new Error(await res.text() || `Request failed (${res.status})`);\n      const data = await res.json();\n      setDogs(data);\n    } catch (err: any) {\n      setError(err.message || t('doglist.failedToLoad'));\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  // Handler for removing a dog\n  async function handleRemoveDog(dog: Dog) {\n    if (!window.confirm(t('doglist.confirmRemove', { name: dog.name }))) return;\n    try {\n      // Debug auth context values\n      console.log('Delete request - Auth context values:', {\n        user: user,\n        token: token,\n        isAuthenticated: isAuthenticated,\n        localStorageToken: localStorage.getItem('token'),\n        localStorageUser: localStorage.getItem('user')\n      });\n      \n      const getApiUrl = () => {\n        if (process.env.REACT_APP_API_URL) return process.env.REACT_APP_API_URL;\n        return 'http://localhost:3001';\n      };\n      const API_URL = getApiUrl();\n      \n      const headers: any = {\n        'Content-Type': 'application/json'\n      };\n      \n      if (token) {\n        headers['Authorization'] = `Bearer ${token}`;\n        console.log('Delete request - Using token:', token.substring(0, 20) + '...');\n      } else {\n        console.error('Delete request - No token available!');\n      }\n      \n      console.log('Delete request details:', {\n        url: `${API_URL}/api/dogs/${dog._id}`,\n        method: 'DELETE',\n        headers,\n        dogId: dog._id,\n        dogName: dog.name\n      });\n      \n      const resp = await fetch(`${API_URL}/api/dogs/${dog._id}`, { \n        method: 'DELETE',\n        headers \n      });\n      \n      console.log('Delete response status:', resp.status);\n      if (!resp.ok) {\n        const errorText = await resp.text();\n        console.error('Delete failed:', resp.status, errorText);\n        throw new Error(`${resp.status}: ${errorText}`);\n      }\n      \n      console.log('Delete successful, removing from UI');\n      setDogs(dogs => dogs.filter(d => d._id !== dog._id));\n      // Close modals if open for this dog\n      setEditDog(editDog => (editDog && editDog._id === dog._id ? null : editDog));\n      setSelectedDog(selectedDog => (selectedDog && selectedDog._id === dog._id ? null : selectedDog));\n    } catch (err: any) {\n      console.error('Delete error details:', err);\n      alert(err.message || t('doglist.failedToRemove'));\n    }\n  }\n\n};\n\nexport default DogList;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}