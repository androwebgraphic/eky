{"ast":null,"code":"var _jsxFileName = \"/Applications/MAMP/htdocs/eky/client/src/components/pages/DogList.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { createPortal } from 'react-dom';\nimport { useSearchParams, useNavigate } from 'react-router-dom';\nimport EditDogModal from './EditDogModal';\nimport Search from '../Search';\nimport CardSmall from '../CardSmall';\nimport DogDetails from './DogDetails';\nimport { useTranslation } from 'react-i18next';\nimport { useAuth } from '../../contexts/AuthContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst DogList = () => {\n  _s();\n  const {\n    t\n  } = useTranslation();\n  const {\n    user,\n    token,\n    isAuthenticated\n  } = useAuth();\n  const navigate = useNavigate();\n  const [searchParams, setSearchParams] = useSearchParams();\n  const [dogs, setDogs] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [selectedDog, setSelectedDog] = useState(null);\n  const [editDog, setEditDog] = useState(null);\n  const [modalPosition, setModalPosition] = useState(null);\n\n  // Search filters - initialize from URL parameters\n  const [searchTerm, setSearchTerm] = useState(searchParams.get('search') || '');\n  const [genderFilter, setGenderFilter] = useState(searchParams.get('gender') || '');\n  const [sizeFilter, setSizeFilter] = useState(searchParams.get('size') || '');\n  const [locationFilter, setLocationFilter] = useState('');\n\n  // Get unique locations for dropdown\n  const availableLocations = Array.from(new Set(dogs.map(dog => dog.location || dog.place).filter(Boolean).sort()));\n\n  // Update URL parameters when search filters change\n  useEffect(() => {\n    const params = new URLSearchParams();\n    if (searchTerm) params.set('search', searchTerm);\n    if (genderFilter) params.set('gender', genderFilter);\n    if (sizeFilter) params.set('size', sizeFilter);\n\n    // Only update URL if params have changed\n    if (params.toString() !== searchParams.toString()) {\n      setSearchParams(params);\n    }\n  }, [searchTerm, genderFilter, sizeFilter, setSearchParams]);\n\n  // Listen for URL parameter changes (e.g., from search modal)\n  useEffect(() => {\n    const search = searchParams.get('search') || '';\n    const gender = searchParams.get('gender') || '';\n    const size = searchParams.get('size') || '';\n    if (search !== searchTerm) setSearchTerm(search);\n    if (gender !== genderFilter) setGenderFilter(gender);\n    if (size !== sizeFilter) setSizeFilter(size);\n  }, [searchParams]);\n\n  // Filter dogs based on search criteria\n  const filteredDogs = dogs.filter(dog => {\n    if (!searchTerm && !genderFilter && !sizeFilter && !locationFilter) {\n      return true; // No filters applied, show all dogs\n    }\n    const matchesSearch = !searchTerm || dog.name && dog.name.toLowerCase().includes(searchTerm.toLowerCase()) || dog.breed && dog.breed.toLowerCase().includes(searchTerm.toLowerCase()) || dog.location && dog.location.toLowerCase().includes(searchTerm.toLowerCase()) || dog.place && dog.place.toLowerCase().includes(searchTerm.toLowerCase());\n    const matchesGender = !genderFilter || dog.gender === genderFilter;\n    const matchesSize = !sizeFilter || dog.size === sizeFilter;\n    const matchesLocation = !locationFilter || dog.location === locationFilter || dog.place === locationFilter;\n    return matchesSearch && matchesGender && matchesSize && matchesLocation;\n  });\n\n  // Debug logging to help identify the issue\n  console.log('ðŸ• DogList render - Auth state:');\n  console.log('  - isAuthenticated:', isAuthenticated);\n  console.log('  - hasUser:', !!user);\n  console.log('  - userId:', user === null || user === void 0 ? void 0 : user._id);\n  console.log('  - userName:', user === null || user === void 0 ? void 0 : user.name);\n  console.log('  - hasToken:', !!token);\n  console.log('ðŸ” Search - totalDogs:', dogs.length, 'filteredDogs:', filteredDogs.length);\n\n  // Add/remove modal-open class when modal state changes\n  useEffect(() => {\n    if (selectedDog || editDog) {\n      document.body.classList.add('modal-open');\n    } else {\n      document.body.classList.remove('modal-open');\n    }\n\n    // Cleanup on unmount\n    return () => {\n      document.body.classList.remove('modal-open');\n    };\n  }, [selectedDog, editDog]);\n\n  // Only fetch dogs on mount or when token changes, not on every translation change or render\n  useEffect(() => {\n    const getApiUrl = () => {\n      if (process.env.REACT_APP_API_URL) return process.env.REACT_APP_API_URL;\n      // Always use backend port 3001 to match server.js\n      if (window.location.protocol === 'https:') {\n        return `https://${window.location.hostname}:3001`;\n      }\n      // Localhost or LAN\n      return `http://${window.location.hostname}:3001`;\n    };\n    const API_URL = getApiUrl();\n    let mounted = true;\n    (async () => {\n      setLoading(true);\n      setError(null);\n      try {\n        const headers = {\n          'Content-Type': 'application/json'\n        };\n        if (token) {\n          headers['Authorization'] = `Bearer ${token}`;\n        }\n        const res = await fetch(`${API_URL}/api/dogs`, {\n          cache: 'no-store',\n          headers\n        });\n        if (!res.ok) {\n          const txt = await res.text();\n          throw new Error(txt || `Request failed (${res.status})`);\n        }\n        const data = await res.json();\n        if (mounted) setDogs(data);\n      } catch (err) {\n        console.error('Failed to fetch dogs', err);\n        if (mounted) setError(err.message || 'Failed to load dog list');\n      } finally {\n        if (mounted) setLoading(false);\n      }\n    })();\n    return () => {\n      mounted = false;\n    };\n  }, [token]);\n  return /*#__PURE__*/_jsxDEV(\"main\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        alignItems: 'flex-end',\n        justifyContent: 'flex-end',\n        marginBottom: 8\n      },\n      children: isAuthenticated && /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => navigate('/adddog'),\n        style: {\n          background: '#267822',\n          color: '#fff',\n          border: 'none',\n          borderRadius: 12,\n          padding: '12px 28px',\n          fontSize: 18,\n          fontWeight: 700,\n          boxShadow: '0 2px 8px rgba(0,0,0,0.10)',\n          cursor: 'pointer',\n          marginRight: 0\n        },\n        title: t('adddog.addDog') || 'Add Dog',\n        \"aria-label\": t('adddog.addDog') || 'Add Dog',\n        children: \"Add Dog\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Search, {\n      searchTerm: searchTerm,\n      onSearchChange: setSearchTerm,\n      genderFilter: genderFilter,\n      onGenderChange: setGenderFilter,\n      sizeFilter: sizeFilter,\n      onSizeChange: setSizeFilter,\n      locationFilter: locationFilter,\n      onLocationChange: setLocationFilter,\n      availableLocations: availableLocations\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 7\n    }, this), loading && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"log\",\n      children: t('doglist.loading')\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 19\n    }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"error\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 17\n    }, this), !loading && !error && dogs.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"empty\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: t('doglist.empty')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: /*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"/dodajpsa\",\n          children: t('doglist.addFirst')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 9\n    }, this), !loading && !error && dogs.length > 0 && filteredDogs.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"empty\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: t('search.noResults')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"Doglist\",\n      children: !loading && !error && filteredDogs.map(d => {\n        // Extract dog owner ID (handle both string and object, and _id vs id)\n        let dogOwnerId;\n        if (typeof d.user === 'string') {\n          dogOwnerId = d.user;\n        } else if (d.user) {\n          // Try _id first, then id\n          dogOwnerId = d.user._id || d.user.id;\n        }\n\n        // Extract current user ID\n        const currentUserId = user === null || user === void 0 ? void 0 : user._id;\n\n        // Check if user is superadmin\n        const isSuperAdmin = (user === null || user === void 0 ? void 0 : user.role) === 'superadmin';\n\n        // Compare as strings to avoid type mismatches\n        const isOwner = Boolean(currentUserId && dogOwnerId && String(currentUserId) === String(dogOwnerId));\n\n        // User can edit if they're the owner OR if they're a superadmin\n        const canEdit = Boolean(isAuthenticated && (isOwner || isSuperAdmin));\n        return /*#__PURE__*/_jsxDEV(CardSmall, {\n          _id: d._id,\n          name: d.name,\n          breed: d.breed,\n          age: d.age,\n          likes: d.likes || [],\n          images: d.images,\n          video: d.video,\n          thumbnail: d.thumbnail,\n          color: d.color,\n          place: d.place || d.location,\n          description: d.description,\n          size: d.size,\n          gender: d.gender,\n          vaccinated: d.vaccinated,\n          neutered: d.neutered,\n          user: d.user,\n          canEdit: canEdit,\n          adoptionStatus: d.adoptionStatus,\n          adoptionQueue: d.adoptionQueue,\n          onDogUpdate: async updatedDog => {\n            // Always refetch the dog list from backend after an update to ensure UI is in sync\n            await handleSaveEditDog(updatedDog);\n          },\n          onViewDetails: event => {\n            const rect = event.currentTarget.getBoundingClientRect();\n            setModalPosition({\n              x: rect.left + rect.width / 2,\n              y: rect.top + rect.height / 2\n            });\n            setSelectedDog(d);\n          },\n          onEdit: event => {\n            const rect = event.currentTarget.getBoundingClientRect();\n            setModalPosition({\n              x: rect.left + rect.width / 2,\n              y: rect.top + rect.height / 2\n            });\n            handleEditDog(d);\n          },\n          onRemove: () => handleRemoveDog(d)\n        }, d._id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 13\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 7\n    }, this), selectedDog && modalPosition && /*#__PURE__*/createPortal(/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: 'fixed',\n        top: 0,\n        left: 0,\n        width: '100vw',\n        height: '100vh',\n        backgroundColor: 'rgba(0, 0, 0, 0.8)',\n        zIndex: 2147483647,\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        padding: '2rem',\n        boxSizing: 'border-box'\n      },\n      onClick: () => {\n        setSelectedDog(null);\n        setModalPosition(null);\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          backgroundColor: 'white',\n          borderRadius: '12px',\n          padding: '2rem',\n          maxWidth: '90vw',\n          maxHeight: '90vh',\n          overflowY: 'auto',\n          position: 'relative',\n          zIndex: 2147483647,\n          boxShadow: '0 20px 60px rgba(0,0,0,0.5)'\n        },\n        onClick: e => e.stopPropagation(),\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          style: {\n            position: 'absolute',\n            top: 15,\n            right: 15,\n            width: 56,\n            height: 56,\n            backgroundColor: '#e74c3c',\n            color: '#fff',\n            border: 'none',\n            borderRadius: '50%',\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            boxShadow: '0 4px 12px rgba(0,0,0,0.3)',\n            cursor: 'pointer',\n            zIndex: 2147483647,\n            padding: 0\n          },\n          onClick: () => {\n            setSelectedDog(null);\n            setModalPosition(null);\n          },\n          title: t('common.close'),\n          \"aria-label\": t('common.close'),\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              fontSize: 40,\n              fontWeight: 900,\n              lineHeight: '56px',\n              width: '100%',\n              textAlign: 'center',\n              display: 'block',\n              userSelect: 'none',\n              letterSpacing: 2\n            },\n            children: \"\\xD7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 369,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 343,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(DogDetails, {\n          ...selectedDog,\n          adoptionStatus: selectedDog === null || selectedDog === void 0 ? void 0 : selectedDog.adoptionStatus,\n          adoptionQueue: selectedDog === null || selectedDog === void 0 ? void 0 : selectedDog.adoptionQueue,\n          onDogUpdate: updatedDog => {\n            setDogs(dogs => dogs.map(d => d._id === updatedDog._id ? updatedDog : d));\n            setSelectedDog(updatedDog);\n          },\n          onClose: () => {\n            setSelectedDog(null);\n            setModalPosition(null);\n          },\n          onEditDog: () => {\n            setEditDog(selectedDog);\n          },\n          onAddPhotos: () => {\n            setEditDog(selectedDog);\n            // Optionally, you could focus the photo upload tab/section in EditDogModal\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 382,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 329,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 9\n    }, this), document.body), editDog && modalPosition && /*#__PURE__*/createPortal(/*#__PURE__*/_jsxDEV(EditDogModal, {\n      dog: editDog,\n      onClose: () => {\n        setEditDog(null);\n        setModalPosition(null);\n      },\n      onSave: handleSaveEditDog,\n      modalPosition: modalPosition\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 408,\n      columnNumber: 9\n    }, this), document.body)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 178,\n    columnNumber: 5\n  }, this);\n\n  // Handler for editing a dog\n  function handleEditDog(dog) {\n    setEditDog(dog);\n  }\n\n  // Handler for saving an edited dog\n  async function handleSaveEditDog(updatedDog) {\n    // After edit, refetch the dog list from backend to ensure MongoDB changes are reflected\n    try {\n      setLoading(true);\n      setError(null);\n      const getApiUrl = () => {\n        if (process.env.REACT_APP_API_URL) return process.env.REACT_APP_API_URL;\n        if (window.location.protocol === 'https:') {\n          return `https://${window.location.hostname}:3001`;\n        }\n        return `http://${window.location.hostname}:3001`;\n      };\n      const API_URL = getApiUrl();\n      const headers = {\n        'Content-Type': 'application/json'\n      };\n      if (token) headers['Authorization'] = `Bearer ${token}`;\n      const res = await fetch(`${API_URL}/api/dogs`, {\n        cache: 'no-store',\n        headers\n      });\n      if (!res.ok) throw new Error((await res.text()) || `Request failed (${res.status})`);\n      const data = await res.json();\n      setDogs(data);\n    } catch (err) {\n      setError(err.message || 'Failed to reload dog list');\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  // Handler for removing a dog\n  async function handleRemoveDog(dog) {\n    if (!window.confirm(t('doglist.confirmRemove', {\n      name: dog.name\n    }))) return;\n    try {\n      // Debug auth context values\n      console.log('Delete request - Auth context values:', {\n        user: user,\n        token: token,\n        isAuthenticated: isAuthenticated,\n        localStorageToken: localStorage.getItem('token'),\n        localStorageUser: localStorage.getItem('user')\n      });\n      const getApiUrl = () => {\n        if (process.env.REACT_APP_API_URL) return process.env.REACT_APP_API_URL;\n        if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {\n          return `http://${window.location.hostname}:3001`;\n        }\n        return `http://${window.location.hostname}:3001`;\n      };\n      const API_URL = getApiUrl();\n      const headers = {\n        'Content-Type': 'application/json'\n      };\n      if (token) {\n        headers['Authorization'] = `Bearer ${token}`;\n        console.log('Delete request - Using token:', token.substring(0, 20) + '...');\n      } else {\n        console.error('Delete request - No token available!');\n      }\n      console.log('Delete request details:', {\n        url: `${API_URL}/api/dogs/${dog._id}`,\n        method: 'DELETE',\n        headers,\n        dogId: dog._id,\n        dogName: dog.name\n      });\n      const resp = await fetch(`${API_URL}/api/dogs/${dog._id}`, {\n        method: 'DELETE',\n        headers\n      });\n      console.log('Delete response status:', resp.status);\n      if (!resp.ok) {\n        const errorText = await resp.text();\n        console.error('Delete failed:', resp.status, errorText);\n        throw new Error(`${resp.status}: ${errorText}`);\n      }\n      console.log('Delete successful, removing from UI');\n      setDogs(dogs => dogs.filter(d => d._id !== dog._id));\n      // Close modals if open for this dog\n      setEditDog(editDog => editDog && editDog._id === dog._id ? null : editDog);\n      setSelectedDog(selectedDog => selectedDog && selectedDog._id === dog._id ? null : selectedDog);\n    } catch (err) {\n      console.error('Delete error details:', err);\n      alert(err.message || t('doglist.failedToRemove'));\n    }\n  }\n};\n_s(DogList, \"EpQomlq61IJpbUATJi1KRXT0fKQ=\", false, function () {\n  return [useTranslation, useAuth, useNavigate, useSearchParams];\n});\n_c = DogList;\nexport default DogList;\nvar _c;\n$RefreshReg$(_c, \"DogList\");","map":{"version":3,"names":["React","useState","useEffect","createPortal","useSearchParams","useNavigate","EditDogModal","Search","CardSmall","DogDetails","useTranslation","useAuth","jsxDEV","_jsxDEV","DogList","_s","t","user","token","isAuthenticated","navigate","searchParams","setSearchParams","dogs","setDogs","loading","setLoading","error","setError","selectedDog","setSelectedDog","editDog","setEditDog","modalPosition","setModalPosition","searchTerm","setSearchTerm","get","genderFilter","setGenderFilter","sizeFilter","setSizeFilter","locationFilter","setLocationFilter","availableLocations","Array","from","Set","map","dog","location","place","filter","Boolean","sort","params","URLSearchParams","set","toString","search","gender","size","filteredDogs","matchesSearch","name","toLowerCase","includes","breed","matchesGender","matchesSize","matchesLocation","console","log","_id","length","document","body","classList","add","remove","getApiUrl","process","env","REACT_APP_API_URL","window","protocol","hostname","API_URL","mounted","headers","res","fetch","cache","ok","txt","text","Error","status","data","json","err","message","children","style","display","alignItems","justifyContent","marginBottom","onClick","background","color","border","borderRadius","padding","fontSize","fontWeight","boxShadow","cursor","marginRight","title","fileName","_jsxFileName","lineNumber","columnNumber","onSearchChange","onGenderChange","onSizeChange","onLocationChange","className","href","id","d","dogOwnerId","currentUserId","isSuperAdmin","role","isOwner","String","canEdit","age","likes","images","video","thumbnail","description","vaccinated","neutered","adoptionStatus","adoptionQueue","onDogUpdate","updatedDog","handleSaveEditDog","onViewDetails","event","rect","currentTarget","getBoundingClientRect","x","left","width","y","top","height","onEdit","handleEditDog","onRemove","handleRemoveDog","position","backgroundColor","zIndex","boxSizing","maxWidth","maxHeight","overflowY","e","stopPropagation","right","lineHeight","textAlign","userSelect","letterSpacing","onClose","onEditDog","onAddPhotos","onSave","confirm","localStorageToken","localStorage","getItem","localStorageUser","substring","url","method","dogId","dogName","resp","errorText","alert","_c","$RefreshReg$"],"sources":["/Applications/MAMP/htdocs/eky/client/src/components/pages/DogList.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { createPortal } from 'react-dom';\nimport { useSearchParams, useNavigate } from 'react-router-dom';\nimport EditDogModal from './EditDogModal';\nimport Search from '../Search';\nimport CardSmall from '../CardSmall';\nimport DogDetails  from './DogDetails';\nimport { useTranslation } from 'react-i18next';\nimport { useAuth } from '../../contexts/AuthContext';\n\ninterface Dog {\n  _id: string;\n  name: string;\n  breed?: string;\n  age?: number;\n  images?: any[];\n  video?: any;\n  thumbnail?: any;\n  color?: string;\n  place?: string;\n  description?: string;\n  size?: string;\n  gender?: 'male' | 'female';\n  vaccinated?: boolean;\n  neutered?: boolean;\n  location?: string;\n  likes?: string[];\n  user?: { \n    _id: string; \n    name: string; \n    username: string;\n    email?: string;\n    phone?: string;\n    person?: 'private' | 'organization';\n  };\n  adoptionStatus?: string;\n  adoptionQueue?: any;\n}\n\nconst DogList: React.FC = () => {\n  const { t } = useTranslation();\n  const { user, token, isAuthenticated } = useAuth();\n  const navigate = useNavigate();\n  const [searchParams, setSearchParams] = useSearchParams();\n  const [dogs, setDogs] = useState<Dog[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [selectedDog, setSelectedDog] = useState<Dog | null>(null);\n  const [editDog, setEditDog] = useState<Dog | null>(null);\n  const [modalPosition, setModalPosition] = useState<{x: number, y: number} | null>(null);\n  \n  // Search filters - initialize from URL parameters\n  const [searchTerm, setSearchTerm] = useState(searchParams.get('search') || '');\n  const [genderFilter, setGenderFilter] = useState(searchParams.get('gender') || '');\n  const [sizeFilter, setSizeFilter] = useState(searchParams.get('size') || '');\n  const [locationFilter, setLocationFilter] = useState('');\n  \n  // Get unique locations for dropdown\n  const availableLocations = Array.from(new Set(\n    dogs.map(dog => dog.location || dog.place)\n      .filter(Boolean)\n      .sort()\n  ));\n  \n  // Update URL parameters when search filters change\n  useEffect(() => {\n    const params = new URLSearchParams();\n    if (searchTerm) params.set('search', searchTerm);\n    if (genderFilter) params.set('gender', genderFilter);\n    if (sizeFilter) params.set('size', sizeFilter);\n    \n    // Only update URL if params have changed\n    if (params.toString() !== searchParams.toString()) {\n      setSearchParams(params);\n    }\n  }, [searchTerm, genderFilter, sizeFilter, setSearchParams]);\n\n  // Listen for URL parameter changes (e.g., from search modal)\n  useEffect(() => {\n    const search = searchParams.get('search') || '';\n    const gender = searchParams.get('gender') || '';\n    const size = searchParams.get('size') || '';\n    \n    if (search !== searchTerm) setSearchTerm(search);\n    if (gender !== genderFilter) setGenderFilter(gender);\n    if (size !== sizeFilter) setSizeFilter(size);\n  }, [searchParams]);\n  \n  // Filter dogs based on search criteria\n  const filteredDogs = dogs.filter(dog => {\n    if (!searchTerm && !genderFilter && !sizeFilter && !locationFilter) {\n      return true; // No filters applied, show all dogs\n    }\n    \n    const matchesSearch = !searchTerm || \n      (dog.name && dog.name.toLowerCase().includes(searchTerm.toLowerCase())) ||\n      (dog.breed && dog.breed.toLowerCase().includes(searchTerm.toLowerCase())) ||\n      (dog.location && dog.location.toLowerCase().includes(searchTerm.toLowerCase())) ||\n      (dog.place && dog.place.toLowerCase().includes(searchTerm.toLowerCase()));\n    \n    const matchesGender = !genderFilter || dog.gender === genderFilter;\n    const matchesSize = !sizeFilter || dog.size === sizeFilter;\n    const matchesLocation = !locationFilter || \n      dog.location === locationFilter || dog.place === locationFilter;\n    \n    return matchesSearch && matchesGender && matchesSize && matchesLocation;\n  });\n  \n  // Debug logging to help identify the issue\n  console.log('ðŸ• DogList render - Auth state:');\n  console.log('  - isAuthenticated:', isAuthenticated);\n  console.log('  - hasUser:', !!user);\n  console.log('  - userId:', user?._id);\n  console.log('  - userName:', user?.name);\n  console.log('  - hasToken:', !!token);\n  \n  console.log('ðŸ” Search - totalDogs:', dogs.length, 'filteredDogs:', filteredDogs.length);\n\n  // Add/remove modal-open class when modal state changes\n  useEffect(() => {\n    if (selectedDog || editDog) {\n      document.body.classList.add('modal-open');\n    } else {\n      document.body.classList.remove('modal-open');\n    }\n    \n    // Cleanup on unmount\n    return () => {\n      document.body.classList.remove('modal-open');\n    };\n  }, [selectedDog, editDog]);\n\n  // Only fetch dogs on mount or when token changes, not on every translation change or render\n  useEffect(() => {\n    const getApiUrl = () => {\n      if (process.env.REACT_APP_API_URL) return process.env.REACT_APP_API_URL;\n      // Always use backend port 3001 to match server.js\n      if (window.location.protocol === 'https:') {\n        return `https://${window.location.hostname}:3001`;\n      }\n      // Localhost or LAN\n      return `http://${window.location.hostname}:3001`;\n    };\n    const API_URL = getApiUrl();\n    let mounted = true;\n\n    (async () => {\n      setLoading(true);\n      setError(null);\n      try {\n        const headers: any = { 'Content-Type': 'application/json' };\n        if (token) {\n          headers['Authorization'] = `Bearer ${token}`;\n        }\n        const res = await fetch(`${API_URL}/api/dogs`, { \n          cache: 'no-store',\n          headers \n        });\n        if (!res.ok) {\n          const txt = await res.text();\n          throw new Error(txt || `Request failed (${res.status})`);\n        }\n        const data = await res.json();\n        if (mounted) setDogs(data);\n      } catch (err: any) {\n        console.error('Failed to fetch dogs', err);\n        if (mounted) setError(err.message || 'Failed to load dog list');\n      } finally {\n        if (mounted) setLoading(false);\n      }\n    })();\n\n    return () => { mounted = false; };\n  }, [token]);\n\n\n  return (\n    <main>\n      <div style={{ display: 'flex', alignItems: 'flex-end', justifyContent: 'flex-end', marginBottom: 8 }}>\n        {isAuthenticated && (\n          <button\n            onClick={() => navigate('/adddog')}\n            style={{\n                background: '#267822',\n              color: '#fff',\n              border: 'none',\n              borderRadius: 12,\n              padding: '12px 28px',\n              fontSize: 18,\n              fontWeight: 700,\n              boxShadow: '0 2px 8px rgba(0,0,0,0.10)',\n              cursor: 'pointer',\n              marginRight: 0\n            }}\n            title={t('adddog.addDog') || 'Add Dog'}\n            aria-label={t('adddog.addDog') || 'Add Dog'}\n          >\n            Add Dog\n          </button>\n        )}\n      </div>\n      <Search \n        searchTerm={searchTerm}\n        onSearchChange={setSearchTerm}\n        genderFilter={genderFilter}\n        onGenderChange={setGenderFilter}\n        sizeFilter={sizeFilter}\n        onSizeChange={setSizeFilter}\n        locationFilter={locationFilter}\n        onLocationChange={setLocationFilter}\n        availableLocations={availableLocations}\n      />\n\n      {loading && <p className=\"log\">{t('doglist.loading')}</p>}\n      {error && <p className=\"error\">{error}</p>}\n\n      {!loading && !error && dogs.length === 0 && (\n        <div className=\"empty\">\n          <p>{t('doglist.empty')}</p>\n          <p>\n            <a href=\"/dodajpsa\">{t('doglist.addFirst')}</a>\n          </p>\n        </div>\n      )}\n\n      {!loading && !error && dogs.length > 0 && filteredDogs.length === 0 && (\n        <div className=\"empty\">\n          <p>{t('search.noResults')}</p>\n        </div>\n      )}\n\n      <div id=\"Doglist\">\n\n        {!loading && !error && filteredDogs.map(d => {\n          // Extract dog owner ID (handle both string and object, and _id vs id)\n          let dogOwnerId;\n          if (typeof (d.user as any) === 'string') {\n            dogOwnerId = d.user as any;\n          } else if (d.user) {\n            // Try _id first, then id\n            dogOwnerId = (d.user as any)._id || (d.user as any).id;\n          }\n          \n          // Extract current user ID\n          const currentUserId = user?._id;\n          \n          // Check if user is superadmin\n          const isSuperAdmin = user?.role === 'superadmin';\n          \n          // Compare as strings to avoid type mismatches\n          const isOwner = Boolean(\n            currentUserId && \n            dogOwnerId && \n            String(currentUserId) === String(dogOwnerId)\n          );\n          \n          // User can edit if they're the owner OR if they're a superadmin\n          const canEdit = Boolean(isAuthenticated && (isOwner || isSuperAdmin));\n          \n          return (\n            <CardSmall\n              key={d._id}\n              _id={d._id}\n              name={d.name}\n              breed={d.breed}\n              age={d.age}\n              likes={d.likes || []}\n              images={d.images}\n              video={d.video}\n              thumbnail={d.thumbnail}\n              color={d.color}\n              place={d.place || d.location}\n              description={d.description}\n              size={d.size}\n              gender={d.gender}\n              vaccinated={d.vaccinated}\n              neutered={d.neutered}\n              user={d.user}\n              canEdit={canEdit}\n              adoptionStatus={d.adoptionStatus}\n              adoptionQueue={d.adoptionQueue}\n              onDogUpdate={async updatedDog => {\n                // Always refetch the dog list from backend after an update to ensure UI is in sync\n                await handleSaveEditDog(updatedDog);\n              }}\n              onViewDetails={(event) => {\n                const rect = event.currentTarget.getBoundingClientRect();\n                setModalPosition({\n                  x: rect.left + rect.width / 2,\n                  y: rect.top + rect.height / 2\n                });\n                setSelectedDog(d);\n              }}\n              onEdit={(event) => {\n                const rect = event.currentTarget.getBoundingClientRect();\n                setModalPosition({\n                  x: rect.left + rect.width / 2,\n                  y: rect.top + rect.height / 2\n                });\n                handleEditDog(d);\n              }}\n              onRemove={() => handleRemoveDog(d)}\n            />\n          );\n        })}\n      </div>\n\n      {selectedDog && modalPosition && createPortal(\n        <div \n          style={{\n            position: 'fixed',\n            top: 0,\n            left: 0,\n            width: '100vw',\n            height: '100vh',\n            backgroundColor: 'rgba(0, 0, 0, 0.8)',\n            zIndex: 2147483647,\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            padding: '2rem',\n            boxSizing: 'border-box'\n          }}\n          onClick={() => {\n            setSelectedDog(null);\n            setModalPosition(null);\n          }}\n        >\n          <div \n            style={{\n              backgroundColor: 'white',\n              borderRadius: '12px',\n              padding: '2rem',\n              maxWidth: '90vw',\n              maxHeight: '90vh',\n              overflowY: 'auto',\n              position: 'relative',\n              zIndex: 2147483647,\n              boxShadow: '0 20px 60px rgba(0,0,0,0.5)'\n            }}\n            onClick={e => e.stopPropagation()}\n          >\n            <button\n              style={{\n                position: 'absolute',\n                top: 15,\n                right: 15,\n                width: 56,\n                height: 56,\n                backgroundColor: '#e74c3c',\n                color: '#fff',\n                border: 'none',\n                borderRadius: '50%',\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'center',\n                boxShadow: '0 4px 12px rgba(0,0,0,0.3)',\n                cursor: 'pointer',\n                zIndex: 2147483647,\n                padding: 0\n              }}\n              onClick={() => {\n                setSelectedDog(null);\n                setModalPosition(null);\n              }}\n              title={t('common.close')}\n              aria-label={t('common.close')}\n            >\n              <span style={{\n                fontSize: 40,\n                fontWeight: 900,\n                lineHeight: '56px',\n                width: '100%',\n                textAlign: 'center',\n                display: 'block',\n                userSelect: 'none',\n                letterSpacing: 2\n              }}>\n                Ã—\n              </span>\n            </button>\n            <DogDetails\n              {...selectedDog}\n              adoptionStatus={selectedDog?.adoptionStatus}\n              adoptionQueue={selectedDog?.adoptionQueue}\n              onDogUpdate={updatedDog => {\n                setDogs(dogs => dogs.map(d => d._id === updatedDog._id ? updatedDog : d));\n                setSelectedDog(updatedDog);\n              }}\n              onClose={() => {\n                setSelectedDog(null);\n                setModalPosition(null);\n              }}\n              onEditDog={() => {\n                setEditDog(selectedDog);\n              }}\n              onAddPhotos={() => {\n                setEditDog(selectedDog);\n                // Optionally, you could focus the photo upload tab/section in EditDogModal\n              }}\n            />\n          </div>\n        </div>,\n        document.body\n      )}\n\n      {editDog && modalPosition && createPortal(\n        <EditDogModal\n          dog={editDog}\n          onClose={() => {\n            setEditDog(null);\n            setModalPosition(null);\n          }}\n          onSave={handleSaveEditDog}\n          modalPosition={modalPosition}\n        />,\n        document.body\n      )}\n    {/* Add Dog floating button for authenticated users */}\n    {/* Removed floating add dog button */}\n    </main>\n  );\n\n  // Handler for editing a dog\n  function handleEditDog(dog: Dog) {\n    setEditDog(dog);\n  }\n\n  // Handler for saving an edited dog\n  async function handleSaveEditDog(updatedDog: Dog) {\n    // After edit, refetch the dog list from backend to ensure MongoDB changes are reflected\n    try {\n      setLoading(true);\n      setError(null);\n      const getApiUrl = () => {\n        if (process.env.REACT_APP_API_URL) return process.env.REACT_APP_API_URL;\n        if (window.location.protocol === 'https:') {\n          return `https://${window.location.hostname}:3001`;\n        }\n        return `http://${window.location.hostname}:3001`;\n      };\n      const API_URL = getApiUrl();\n      const headers: any = { 'Content-Type': 'application/json' };\n      if (token) headers['Authorization'] = `Bearer ${token}`;\n      const res = await fetch(`${API_URL}/api/dogs`, { cache: 'no-store', headers });\n      if (!res.ok) throw new Error(await res.text() || `Request failed (${res.status})`);\n      const data = await res.json();\n      setDogs(data);\n    } catch (err: any) {\n      setError(err.message || 'Failed to reload dog list');\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  // Handler for removing a dog\n  async function handleRemoveDog(dog: Dog) {\n    if (!window.confirm(t('doglist.confirmRemove', { name: dog.name }))) return;\n    try {\n      // Debug auth context values\n      console.log('Delete request - Auth context values:', {\n        user: user,\n        token: token,\n        isAuthenticated: isAuthenticated,\n        localStorageToken: localStorage.getItem('token'),\n        localStorageUser: localStorage.getItem('user')\n      });\n      \n      const getApiUrl = () => {\n        if (process.env.REACT_APP_API_URL) return process.env.REACT_APP_API_URL;\n        if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {\n          return `http://${window.location.hostname}:3001`;\n        }\n        return `http://${window.location.hostname}:3001`;\n      };\n      const API_URL = getApiUrl();\n      \n      const headers: any = {\n        'Content-Type': 'application/json'\n      };\n      \n      if (token) {\n        headers['Authorization'] = `Bearer ${token}`;\n        console.log('Delete request - Using token:', token.substring(0, 20) + '...');\n      } else {\n        console.error('Delete request - No token available!');\n      }\n      \n      console.log('Delete request details:', {\n        url: `${API_URL}/api/dogs/${dog._id}`,\n        method: 'DELETE',\n        headers,\n        dogId: dog._id,\n        dogName: dog.name\n      });\n      \n      const resp = await fetch(`${API_URL}/api/dogs/${dog._id}`, { \n        method: 'DELETE',\n        headers \n      });\n      \n      console.log('Delete response status:', resp.status);\n      if (!resp.ok) {\n        const errorText = await resp.text();\n        console.error('Delete failed:', resp.status, errorText);\n        throw new Error(`${resp.status}: ${errorText}`);\n      }\n      \n      console.log('Delete successful, removing from UI');\n      setDogs(dogs => dogs.filter(d => d._id !== dog._id));\n      // Close modals if open for this dog\n      setEditDog(editDog => (editDog && editDog._id === dog._id ? null : editDog));\n      setSelectedDog(selectedDog => (selectedDog && selectedDog._id === dog._id ? null : selectedDog));\n    } catch (err: any) {\n      console.error('Delete error details:', err);\n      alert(err.message || t('doglist.failedToRemove'));\n    }\n  }\n\n};\n\nexport default DogList;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}