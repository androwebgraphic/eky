{"ast":null,"code":"import React,{useState,useEffect,useRef,useCallback}from'react';import'../css/chat-app.css';import io from'socket.io-client';import{useAuth}from'../contexts/AuthContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const getApiUrl=()=>{if(process.env.REACT_APP_API_URL)return process.env.REACT_APP_API_URL;if(window.location.protocol==='https:'){// Use same host, but https\nreturn\"https://\".concat(window.location.hostname);}if(window.location.hostname==='localhost'||window.location.hostname==='127.0.0.1'){return\"http://\".concat(window.location.hostname,\":3001\");}// For mobile/network access, use the network IP (dev only)\nreturn\"http://172.20.10.2:3001\";};const ChatApp=()=>{const selectedConvoRef=useRef(null);const[onlineUsers,setOnlineUsers]=useState([]);const{user,token,updateUser}=useAuth();const userWithBlocks=user;console.log('[ChatApp] user:',user);// Profile picture logic\nconst getProfilePictureUrl=()=>{if(user&&user.profilePicture){return\"\".concat(getApiUrl()).concat(user.profilePicture);}return'../img/androcolored-80x80.jpg';// Default profile picture\n};const[conversations,setConversations]=useState([]);const[convoUsernames,setConvoUsernames]=useState({});const[selectedConvo,setSelectedConvo]=useState(null);useEffect(()=>{selectedConvoRef.current=selectedConvo;},[selectedConvo]);const[messages,setMessages]=useState([]);const[input,setInput]=useState('');// Remove otherUserId, use only user search and searchResults\nconst[typing,setTyping]=useState(false);const[notification,setNotification]=useState(null);const[userSearch,setUserSearch]=useState('');const[searchResults,setSearchResults]=useState([]);const[pendingAdoptions,setPendingAdoptions]=useState([]);useEffect(()=>{console.log('[ChatApp] onlineUsers state updated:',onlineUsers);},[onlineUsers]);const socketRef=useRef(null);const fetchPendingAdoptions=useCallback(async()=>{if(!token)return;console.log('[ChatApp] Fetching pending adoptions...');try{const res=await fetch(\"\".concat(getApiUrl(),\"/api/dogs/pending-adoptions\"),{headers:{'Authorization':\"Bearer \".concat(token)}});if(res.ok){const data=await res.json();console.log('[ChatApp] Pending adoptions:',data);setPendingAdoptions(data);}else{console.error('[ChatApp] Failed to fetch pending adoptions:',res.status);}}catch(err){console.error('[ChatApp] Error fetching pending adoptions:',err);}},[token]);// Setup socket connection and listeners only once per user/token\nuseEffect(()=>{if(user!==null&&user!==void 0&&user._id&&token){console.log('[ChatApp] Connecting socket for user:',user._id);fetch(\"\".concat(getApiUrl(),\"/api/chat/conversations/\").concat(user._id),{headers:{'Authorization':\"Bearer \".concat(token)}}).then(res=>{if(!res.ok){throw new Error(\"HTTP \".concat(res.status,\": \").concat(res.statusText));}return res.json();}).then(async data=>{console.log('[ChatApp] Conversations fetched:',data);setConversations(Array.isArray(data)?data:[]);// Fetch usernames for each conversation's other participant\nconst usernames={};for(const convo of Array.isArray(data)?data:[]){const otherId=convo.participants.find(id=>id!==user._id);if(otherId){const res=await fetch(\"\".concat(getApiUrl(),\"/api/users/\").concat(otherId),{headers:{'Authorization':\"Bearer \".concat(token)}});if(res.ok){const u=await res.json();usernames[convo._id]=u.username||u.name||otherId;}else{usernames[convo._id]=otherId;}}}setConvoUsernames(usernames);await fetchPendingAdoptions();});if(!socketRef.current){socketRef.current=io(getApiUrl());console.log('[ChatApp] Socket.IO connecting to',getApiUrl());socketRef.current.on('connect',()=>{console.log('[ChatApp] Socket connected successfully');});socketRef.current.on('connect_error',error=>{console.error('[ChatApp] Socket connection error:',error);});socketRef.current.emit('join',user._id);console.log('[ChatApp] Emitted join for user:',user._id);socketRef.current.emit('getOnlineUsers');socketRef.current.on('onlineUsers',users=>{console.log('[ChatApp] Received onlineUsers:',users);setOnlineUsers(users.filter(u=>u._id!==user._id));});socketRef.current.on('userOnline',userOnline=>{console.log('[ChatApp] userOnline event:',userOnline);setOnlineUsers(prev=>{if(prev.some(u=>u._id===userOnline._id))return prev;return[...prev,userOnline].filter(u=>u._id!==user._id);});});socketRef.current.on('userOffline',userOffline=>{console.log('[ChatApp] userOffline event:',userOffline);setOnlineUsers(prev=>prev.filter(u=>u._id!==userOffline._id));});socketRef.current.on('receiveMessage',msg=>{// Always refresh conversations list\nfetch(\"\".concat(getApiUrl(),\"/api/chat/conversations/\").concat(user._id),{headers:{'Authorization':\"Bearer \".concat(token)}}).then(res=>res.json()).then(async data=>{setConversations(Array.isArray(data)?data:[]);// Fetch usernames for each conversation's other participant\nconst usernames={};for(const convo of Array.isArray(data)?data:[]){const otherId=convo.participants.find(id=>id!==user._id);if(otherId){const res=await fetch(\"\".concat(getApiUrl(),\"/api/users/\").concat(otherId));if(res.ok){const u=await res.json();usernames[convo._id]=u.username||u.name||otherId;}else{usernames[convo._id]=otherId;}}}setConvoUsernames(usernames);// Always refresh messages for the currently selected conversation\nif(selectedConvoRef.current){fetch(\"\".concat(getApiUrl(),\"/api/chat/messages/\").concat(selectedConvoRef.current._id),{headers:{'Authorization':\"Bearer \".concat(token)}}).then(res=>res.json()).then(setMessages);}});});socketRef.current.on('typing',_ref=>{let{from}=_ref;setTyping(true);setTimeout(()=>setTyping(false),1500);});socketRef.current.on('notification',_ref2=>{let{from,message}=_ref2;setNotification(\"New message from \".concat(from,\": \").concat(message));setTimeout(()=>setNotification(null),3000);});socketRef.current.on('refreshConversations',()=>{console.log('[ChatApp] refreshConversations event received');fetch(\"\".concat(getApiUrl(),\"/api/chat/conversations/\").concat(user._id),{headers:{'Authorization':\"Bearer \".concat(token)}}).then(res=>{if(!res.ok){throw new Error(\"HTTP \".concat(res.status,\": \").concat(res.statusText));}return res.json();}).then(data=>{console.log('[ChatApp] Conversations refreshed:',data);setConversations(Array.isArray(data)?data:[]);}).catch(err=>{console.error('[ChatApp] Error refreshing conversations:',err);});fetchPendingAdoptions();});}}return()=>{var _socketRef$current;(_socketRef$current=socketRef.current)===null||_socketRef$current===void 0?void 0:_socketRef$current.disconnect();socketRef.current=null;};},[user,token,selectedConvo,fetchPendingAdoptions]);useEffect(()=>{if(selectedConvo&&token){fetch(\"\".concat(getApiUrl(),\"/api/chat/messages/\").concat(selectedConvo._id),{headers:{'Authorization':\"Bearer \".concat(token)}}).then(res=>res.json()).then(setMessages);}},[selectedConvo,token]);useEffect(()=>{if(selectedConvo&&token){fetch(\"\".concat(getApiUrl(),\"/api/chat/messages/\").concat(selectedConvo._id),{headers:{'Authorization':\"Bearer \".concat(token)}}).then(res=>res.json()).then(setMessages);}},[user,token,selectedConvo]);const startConversation=async otherUserId=>{if(!otherUserId||!token)return;const res=await fetch(\"\".concat(getApiUrl(),\"/api/chat/conversation\"),{method:'POST',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)},body:JSON.stringify({userId:user._id,otherUserId})});const convo=await res.json();setSelectedConvo(convo);setConversations(prev=>[...prev,convo]);setUserSearch('');setSearchResults([]);};const sendMessage=async()=>{var _socketRef$current2;if(!input||!selectedConvo||!token)return;const recipient=selectedConvo.participants.find(id=>id!==user._id);(_socketRef$current2=socketRef.current)===null||_socketRef$current2===void 0?void 0:_socketRef$current2.emit('sendMessage',{conversationId:selectedConvo._id,sender:user._id,recipient,message:input});await fetch(\"\".concat(getApiUrl(),\"/api/chat/message\"),{method:'POST',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)},body:JSON.stringify({conversationId:selectedConvo._id,sender:user._id,recipient,message:input})});// Do not update messages here; wait for real-time event\nsetInput('');};// Typing indicator\nconst handleInputChange=e=>{setInput(e.target.value);if(selectedConvo){var _socketRef$current3;const recipient=selectedConvo.participants.find(id=>id!==user._id);(_socketRef$current3=socketRef.current)===null||_socketRef$current3===void 0?void 0:_socketRef$current3.emit('typing',{recipient,sender:user._id});}};// User search\nconst handleUserSearch=async e=>{setUserSearch(e.target.value);if(e.target.value.length>1){try{const res=await fetch(\"\".concat(getApiUrl(),\"/api/users/search?query=\").concat(encodeURIComponent(e.target.value)),{headers:{'Authorization':\"Bearer \".concat(token)}});if(!res.ok){console.error('User search failed:',res.status,await res.text());setSearchResults([]);return;}const results=await res.json();setSearchResults(results);}catch(err){console.error('User search error:',err);setSearchResults([]);}}else{setSearchResults([]);}};// Handler for deleting conversation\nconst handleDeleteConversation=async()=>{if(!selectedConvo||!token)return;if(!window.confirm('Delete this conversation? This cannot be undone.'))return;await fetch(\"\".concat(getApiUrl(),\"/api/chat/messages/\").concat(selectedConvo._id),{method:'DELETE',headers:{'Authorization':\"Bearer \".concat(token)}});setConversations(conversations.filter(c=>c._id!==selectedConvo._id));setSelectedConvo(null);setMessages([]);};// Handler for block/unblock user\nconst isBlocked=selectedConvo&&userWithBlocks&&userWithBlocks.blockedUsers&&selectedConvo.participants.some(id=>id!==userWithBlocks._id&&userWithBlocks.blockedUsers.includes(id));const otherUserId=selectedConvo&&userWithBlocks?selectedConvo.participants.find(id=>id!==userWithBlocks._id):null;const handleBlockUnblock=async()=>{if(!otherUserId||!token)return;const url=isBlocked?'/api/chat/unblock':'/api/chat/block';await fetch(\"\".concat(getApiUrl()).concat(url),{method:'POST',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)},body:JSON.stringify({userId:user._id,blockId:otherUserId})});// Fetch updated user and update AuthContext state\nconst userRes=await fetch(\"\".concat(getApiUrl(),\"/api/users/\").concat(user._id),{headers:{'Authorization':\"Bearer \".concat(token)}});if(userRes.ok){const updatedUser=await userRes.json();updateUser(updatedUser);}// Emit a socket event to update both users' conversations in real time\nif(socketRef.current){socketRef.current.emit('refreshConversations',{userId:user._id,otherUserId});}// Refetch conversations for this user\nfetch(\"\".concat(getApiUrl(),\"/api/chat/conversations/\").concat(user._id),{headers:{'Authorization':\"Bearer \".concat(token)}}).then(res=>res.json()).then(data=>setConversations(Array.isArray(data)?data:[]));// Optionally, refetch selected conversation if still valid\nif(selectedConvo){fetch(\"\".concat(getApiUrl(),\"/api/chat/messages/\").concat(selectedConvo._id),{headers:{'Authorization':\"Bearer \".concat(token)}}).then(res=>res.json()).then(setMessages);}};// Handler for confirming adoption\nconst handleConfirmAdoption=async(dogId,isOwner)=>{if(!token)return;try{const res=await fetch(\"\".concat(getApiUrl(),\"/api/dogs/confirm-adoption\"),{method:'POST',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)},body:JSON.stringify({dogId,isOwner})});if(res.ok){fetchPendingAdoptions();// Refresh pending adoptions\n// Refresh messages to show confirmation message\nif(selectedConvo){fetch(\"\".concat(getApiUrl(),\"/api/chat/messages/\").concat(selectedConvo._id),{headers:{'Authorization':\"Bearer \".concat(token)}}).then(res=>res.json()).then(setMessages);}}}catch(err){console.error('Confirm adoption error:',err);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"chat-app-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"chat-app-profile-row\",style:{display:'flex',flexDirection:'column',alignItems:'center',gap:12,marginBottom:16},children:[/*#__PURE__*/_jsx(\"img\",{src:getProfilePictureUrl(),alt:\"Profile\",style:{width:40,height:40,borderRadius:'50%',objectFit:'cover',border:'2px solid #ddd',minWidth:'40px',minHeight:'40px',maxWidth:'60px',maxHeight:'60px'}}),/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:500,fontSize:16},children:(user===null||user===void 0?void 0:user.username)||'Me'}),/*#__PURE__*/_jsx(\"span\",{style:{color:'#4CAF50',fontSize:13,marginTop:4},children:\"Online\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"chat-app-sidebar\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"chat-app-search\",type:\"text\",value:userSearch,onChange:handleUserSearch,placeholder:\"Search users by name or username...\"}),searchResults.length>0&&/*#__PURE__*/_jsx(\"ul\",{style:{listStyle:'none',padding:0,marginBottom:4},children:searchResults.map(u=>/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"chat-app-convo-btn\",onClick:()=>startConversation(u._id),children:u.userName})},u._id))}),/*#__PURE__*/_jsxs(\"div\",{className:\"chat-app-online-users\",children:[/*#__PURE__*/_jsx(\"b\",{style:{fontSize:13,color:'#43b581'},children:\"Online Users\"}),/*#__PURE__*/_jsxs(\"ul\",{style:{listStyle:'none',padding:0,minHeight:40},children:[onlineUsers.length===0&&/*#__PURE__*/_jsx(\"li\",{style:{color:'#aaa',fontSize:12},children:\"No users online\"}),onlineUsers.map(u=>{let displayName='';if(typeof u==='string'){displayName=u;}else if(u&&typeof u==='object'){// Only access properties that exist on the type\ndisplayName=u.userName||u._id||'Unknown';}else{displayName='Unknown';}return/*#__PURE__*/_jsxs(\"li\",{style:{display:'flex',alignItems:'center',gap:6},children:[/*#__PURE__*/_jsx(\"span\",{className:\"chat-app-online-dot\"}),/*#__PURE__*/_jsx(\"button\",{className:\"chat-app-convo-btn\",onClick:()=>startConversation(typeof u==='string'?u:u._id),children:displayName})]},typeof u==='string'?u:u._id);})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"chat-app-convos\",children:[/*#__PURE__*/_jsx(\"b\",{style:{fontSize:13,color:'#2196f3'},children:\"Conversations\"}),/*#__PURE__*/_jsx(\"ul\",{style:{listStyle:'none',padding:0},children:conversations.map(convo=>/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"chat-app-convo-btn\".concat((selectedConvo===null||selectedConvo===void 0?void 0:selectedConvo._id)===convo._id?' selected':''),onClick:()=>setSelectedConvo(convo),children:convoUsernames[convo._id]||convo.participants.filter(id=>id!==user._id).join(', ')})},convo._id))})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"chat-app-main\",children:[pendingAdoptions.length>0&&/*#__PURE__*/_jsxs(\"div\",{style:{background:'#fff3cd',padding:'8px',marginBottom:'8px',border:'1px solid #ffeaa7',borderRadius:'4px'},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"DEBUG - Pending Adoptions:\"}),/*#__PURE__*/_jsx(\"ul\",{style:{margin:0,paddingLeft:'20px'},children:pendingAdoptions.map(dog=>{var _dog$adoptionQueue;let adopter='None';const a=(_dog$adoptionQueue=dog.adoptionQueue)===null||_dog$adoptionQueue===void 0?void 0:_dog$adoptionQueue.adopter;if(a){if(typeof a==='string'){adopter=a;}else if(typeof a==='object'){adopter=a.name||a.username||a._id||'Unknown';}}return/*#__PURE__*/_jsxs(\"li\",{children:[dog.name,\" - Owner: \",dog.user.name,\" (\",dog.user._id===user._id?'You':'Other',\") - Adopter: \",adopter]},dog._id);})})]}),selectedConvo&&/*#__PURE__*/_jsxs(\"div\",{className:\"chat-app-actions-row\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"chat-app-action-btn delete\",onClick:handleDeleteConversation,children:\"Delete\"}),/*#__PURE__*/_jsx(\"button\",{className:\"chat-app-action-btn \".concat(isBlocked?'unblock':'block'),onClick:handleBlockUnblock,children:isBlocked?'Unblock':'Block'}),(()=>{const otherUserId=selectedConvo.participants.find(id=>id!==user._id);const filtered=pendingAdoptions.filter(dog=>{const isCurrentUserOwner=String(dog.user._id)===String(user._id);if(isCurrentUserOwner){var _dog$adoptionQueue2,_dog$adoptionQueue2$a;return String((_dog$adoptionQueue2=dog.adoptionQueue)===null||_dog$adoptionQueue2===void 0?void 0:(_dog$adoptionQueue2$a=_dog$adoptionQueue2.adopter)===null||_dog$adoptionQueue2$a===void 0?void 0:_dog$adoptionQueue2$a._id)===String(otherUserId);}else{return String(dog.user._id)===String(otherUserId);}});console.log('[ChatApp] Selected convo:',selectedConvo._id,'Other user:',otherUserId,'Pending adoptions:',pendingAdoptions.length,'Filtered:',filtered.length);return filtered.map(dog=>/*#__PURE__*/_jsxs(\"button\",{className:\"chat-app-action-btn confirm\",onClick:()=>handleConfirmAdoption(dog._id,dog.user._id===user._id),children:[\"Confirm Adoption: \",dog.name]},dog._id));})()]}),/*#__PURE__*/_jsxs(\"div\",{className:\"chat-app-messages\",children:[messages.map(msg=>/*#__PURE__*/_jsx(\"div\",{className:\"chat-app-message\".concat(user&&msg.sender===user._id?' self':''),children:/*#__PURE__*/_jsx(\"span\",{className:\"chat-app-bubble\".concat(user&&msg.sender===user._id?' self':''),children:msg.message})},msg._id)),typing&&/*#__PURE__*/_jsx(\"div\",{className:\"chat-app-typing\",children:\"Typing...\"})]}),selectedConvo&&/*#__PURE__*/_jsxs(\"div\",{className:\"chat-app-input-row\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"chat-app-input\",type:\"text\",value:input,onChange:handleInputChange,onKeyDown:e=>{if(e.key==='Enter')sendMessage();},placeholder:\"Type a message...\"}),/*#__PURE__*/_jsx(\"button\",{className:\"chat-app-send-btn\",onClick:sendMessage,disabled:!input.trim(),children:\"Send\"})]}),notification&&/*#__PURE__*/_jsx(\"div\",{className:\"chat-app-notification\",children:notification})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.dispatchEvent(new CustomEvent('closeChatModal')),style:{position:'absolute',top:10,right:10,width:56,height:56,backgroundColor:'#e74c3c',color:'#fff',border:'none',borderRadius:'50%',display:'flex',alignItems:'center',justifyContent:'center',boxShadow:'0 4px 12px rgba(0,0,0,0.3)',cursor:'pointer',zIndex:2147483647,padding:0},title:\"Close\",\"aria-label\":\"Close\",children:/*#__PURE__*/_jsx(\"span\",{style:{fontSize:40,fontWeight:900,lineHeight:'56px',width:'100%',textAlign:'center',display:'block',userSelect:'none',letterSpacing:2},children:\"\\xD7\"})})]});};export default ChatApp;","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","io","useAuth","jsx","_jsx","jsxs","_jsxs","getApiUrl","process","env","REACT_APP_API_URL","window","location","protocol","concat","hostname","ChatApp","selectedConvoRef","onlineUsers","setOnlineUsers","user","token","updateUser","userWithBlocks","console","log","getProfilePictureUrl","profilePicture","conversations","setConversations","convoUsernames","setConvoUsernames","selectedConvo","setSelectedConvo","current","messages","setMessages","input","setInput","typing","setTyping","notification","setNotification","userSearch","setUserSearch","searchResults","setSearchResults","pendingAdoptions","setPendingAdoptions","socketRef","fetchPendingAdoptions","res","fetch","headers","ok","data","json","error","status","err","_id","then","Error","statusText","Array","isArray","usernames","convo","otherId","participants","find","id","u","username","name","on","emit","users","filter","userOnline","prev","some","userOffline","msg","_ref","from","setTimeout","_ref2","message","catch","_socketRef$current","disconnect","startConversation","otherUserId","method","body","JSON","stringify","userId","sendMessage","_socketRef$current2","recipient","conversationId","sender","handleInputChange","e","target","value","_socketRef$current3","handleUserSearch","length","encodeURIComponent","text","results","handleDeleteConversation","confirm","c","isBlocked","blockedUsers","includes","handleBlockUnblock","url","blockId","userRes","updatedUser","handleConfirmAdoption","dogId","isOwner","className","children","style","display","flexDirection","alignItems","gap","marginBottom","src","alt","width","height","borderRadius","objectFit","border","minWidth","minHeight","maxWidth","maxHeight","fontWeight","fontSize","color","marginTop","type","onChange","placeholder","listStyle","padding","map","onClick","userName","displayName","join","background","margin","paddingLeft","dog","_dog$adoptionQueue","adopter","a","adoptionQueue","filtered","isCurrentUserOwner","String","_dog$adoptionQueue2","_dog$adoptionQueue2$a","onKeyDown","key","disabled","trim","dispatchEvent","CustomEvent","position","top","right","backgroundColor","justifyContent","boxShadow","cursor","zIndex","title","lineHeight","textAlign","userSelect","letterSpacing"],"sources":["/Applications/MAMP/htdocs/eky/client/src/components/ChatApp.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback } from 'react';\nimport '../css/chat-app.css';\nimport io from 'socket.io-client';\nimport { useAuth } from '../contexts/AuthContext';\n\ninterface UserWithBlocks {\n  _id: string;\n  blockedUsers?: string[];\n}\n\ninterface Message {\n  _id: string;\n  sender: string;\n  recipient: string;\n  message: string;\n  sentAt: string;\n}\n\n\ninterface Conversation {\n  _id: string;\n  participants: string[];\n}\n\ninterface UserWithBlocks {\n  _id: string;\n  blockedUsers?: string[];\n}\n\nconst getApiUrl = () => {\n  if (process.env.REACT_APP_API_URL) return process.env.REACT_APP_API_URL;\n  if (window.location.protocol === 'https:') {\n    // Use same host, but https\n    return `https://${window.location.hostname}`;\n  }\n  if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {\n    return `http://${window.location.hostname}:3001`;\n  }\n  // For mobile/network access, use the network IP (dev only)\n  return `http://172.20.10.2:3001`;\n};\n\nconst ChatApp: React.FC = () => {\n  const selectedConvoRef = useRef<Conversation | null>(null);\n  const [onlineUsers, setOnlineUsers] = useState<{_id: string, userName: string}[]>([]);\n\n  const { user, token, updateUser } = useAuth();\n  const userWithBlocks = user as UserWithBlocks | null;\n  console.log('[ChatApp] user:', user);\n  // Profile picture logic\n  const getProfilePictureUrl = () => {\n    if (user && (user as any).profilePicture) {\n      return `${getApiUrl()}${(user as any).profilePicture}`;\n    }\n    return '../img/androcolored-80x80.jpg'; // Default profile picture\n  };\n  const [conversations, setConversations] = useState<Conversation[]>([]);\n  const [convoUsernames, setConvoUsernames] = useState<{[key: string]: string}>({});\n  const [selectedConvo, setSelectedConvo] = useState<Conversation | null>(null);\n  useEffect(() => {\n    selectedConvoRef.current = selectedConvo;\n  }, [selectedConvo]);\n  const [messages, setMessages] = useState<Message[]>([]);\n  const [input, setInput] = useState('');\n  // Remove otherUserId, use only user search and searchResults\n  const [typing, setTyping] = useState(false);\n  const [notification, setNotification] = useState<string | null>(null);\n  const [userSearch, setUserSearch] = useState('');\n  const [searchResults, setSearchResults] = useState<{_id: string, userName: string}[]>([]);\n  const [pendingAdoptions, setPendingAdoptions] = useState<any[]>([]);\n  useEffect(() => {\n    console.log('[ChatApp] onlineUsers state updated:', onlineUsers);\n  }, [onlineUsers]);\n  const socketRef = useRef<ReturnType<typeof io> | null>(null);\n\n  const fetchPendingAdoptions = useCallback(async () => {\n    if (!token) return;\n    console.log('[ChatApp] Fetching pending adoptions...');\n    try {\n      const res = await fetch(`${getApiUrl()}/api/dogs/pending-adoptions`, {\n        headers: { 'Authorization': `Bearer ${token}` }\n      });\n      if (res.ok) {\n        const data = await res.json();\n        console.log('[ChatApp] Pending adoptions:', data);\n        setPendingAdoptions(data);\n      } else {\n        console.error('[ChatApp] Failed to fetch pending adoptions:', res.status);\n      }\n    } catch (err) {\n      console.error('[ChatApp] Error fetching pending adoptions:', err);\n    }\n  }, [token]);\n\n  // Setup socket connection and listeners only once per user/token\n  useEffect(() => {\n    if (user?._id && token) {\n      console.log('[ChatApp] Connecting socket for user:', user._id);\n      fetch(`${getApiUrl()}/api/chat/conversations/${user._id}`, {\n        headers: { 'Authorization': `Bearer ${token}` }\n      })\n        .then(res => {\n          if (!res.ok) {\n            throw new Error(`HTTP ${res.status}: ${res.statusText}`);\n          }\n          return res.json();\n        })\n        .then(async data => {\n          console.log('[ChatApp] Conversations fetched:', data);\n          setConversations(Array.isArray(data) ? data : []);\n          // Fetch usernames for each conversation's other participant\n          const usernames: {[key: string]: string} = {};\n          for (const convo of Array.isArray(data) ? data : []) {\n            const otherId = convo.participants.find((id: string) => id !== user._id);\n            if (otherId) {\n              const res = await fetch(`${getApiUrl()}/api/users/${otherId}`, {\n                headers: {\n                  'Authorization': `Bearer ${token}`\n                }\n              });\n              if (res.ok) {\n                const u = await res.json();\n                usernames[convo._id] = u.username || u.name || otherId;\n              } else {\n                usernames[convo._id] = otherId;\n              }\n            }\n          }\n          setConvoUsernames(usernames);\n          await fetchPendingAdoptions();\n        })\n      if (!socketRef.current) {\n        socketRef.current = io(getApiUrl());\n        console.log('[ChatApp] Socket.IO connecting to', getApiUrl());\n        \n        socketRef.current.on('connect', () => {\n          console.log('[ChatApp] Socket connected successfully');\n        });\n        \n        socketRef.current.on('connect_error', (error) => {\n          console.error('[ChatApp] Socket connection error:', error);\n        });\n        \n        socketRef.current.emit('join', user._id);\n        console.log('[ChatApp] Emitted join for user:', user._id);\n        socketRef.current.emit('getOnlineUsers');\n        socketRef.current.on('onlineUsers', (users) => {\n          console.log('[ChatApp] Received onlineUsers:', users);\n          setOnlineUsers(users.filter((u: any) => u._id !== user._id));\n        });\n        socketRef.current.on('userOnline', (userOnline) => {\n          console.log('[ChatApp] userOnline event:', userOnline);\n          setOnlineUsers(prev => {\n            if (prev.some(u => u._id === userOnline._id)) return prev;\n            return [...prev, userOnline].filter(u => u._id !== user._id);\n          });\n        });\n        socketRef.current.on('userOffline', (userOffline) => {\n          console.log('[ChatApp] userOffline event:', userOffline);\n          setOnlineUsers(prev => prev.filter(u => u._id !== userOffline._id));\n        });\n        socketRef.current.on('receiveMessage', (msg) => {\n          // Always refresh conversations list\n          fetch(`${getApiUrl()}/api/chat/conversations/${user._id}`, {\n            headers: { 'Authorization': `Bearer ${token}` }\n          })\n            .then(res => res.json())\n            .then(async data => {\n              setConversations(Array.isArray(data) ? data : []);\n              // Fetch usernames for each conversation's other participant\n              const usernames: {[key: string]: string} = {};\n              for (const convo of Array.isArray(data) ? data : []) {\n                const otherId = convo.participants.find((id: string) => id !== user._id);\n                if (otherId) {\n                  const res = await fetch(`${getApiUrl()}/api/users/${otherId}`);\n                  if (res.ok) {\n                    const u = await res.json();\n                    usernames[convo._id] = u.username || u.name || otherId;\n                  } else {\n                    usernames[convo._id] = otherId;\n                  }\n                }\n              }\n              setConvoUsernames(usernames);\n              // Always refresh messages for the currently selected conversation\n              if (selectedConvoRef.current) {\n                fetch(`${getApiUrl()}/api/chat/messages/${selectedConvoRef.current._id}`, {\n                  headers: { 'Authorization': `Bearer ${token}` }\n                })\n                  .then(res => res.json())\n                  .then(setMessages);\n              }\n            });\n        });\n        socketRef.current.on('typing', ({ from }) => {\n          setTyping(true);\n          setTimeout(() => setTyping(false), 1500);\n        });\n        socketRef.current.on('notification', ({ from, message }) => {\n          setNotification(`New message from ${from}: ${message}`);\n          setTimeout(() => setNotification(null), 3000);\n        });\n        socketRef.current.on('refreshConversations', () => {\n          console.log('[ChatApp] refreshConversations event received');\n          fetch(`${getApiUrl()}/api/chat/conversations/${user._id}`, {\n            headers: { 'Authorization': `Bearer ${token}` }\n          })\n            .then(res => {\n              if (!res.ok) {\n                throw new Error(`HTTP ${res.status}: ${res.statusText}`);\n              }\n              return res.json();\n            })\n            .then(data => {\n              console.log('[ChatApp] Conversations refreshed:', data);\n              setConversations(Array.isArray(data) ? data : []);\n            })\n            .catch(err => {\n              console.error('[ChatApp] Error refreshing conversations:', err);\n            });\n          fetchPendingAdoptions();\n        });\n      }\n    }\n    return () => {\n      socketRef.current?.disconnect();\n      socketRef.current = null;\n    };\n  }, [user, token, selectedConvo, fetchPendingAdoptions]);\n\n  useEffect(() => {\n    if (selectedConvo && token) {\n      fetch(`${getApiUrl()}/api/chat/messages/${selectedConvo._id}`, {\n        headers: { 'Authorization': `Bearer ${token}` }\n      })\n        .then(res => res.json())\n        .then(setMessages);\n    }\n  }, [selectedConvo, token]);\n  useEffect(() => {\n    if (selectedConvo && token) {\n      fetch(`${getApiUrl()}/api/chat/messages/${selectedConvo._id}`, {\n        headers: { 'Authorization': `Bearer ${token}` }\n      })\n        .then(res => res.json())\n        .then(setMessages);\n    }\n  }, [user, token, selectedConvo]);\n\n  const startConversation = async (otherUserId: string) => {\n    if (!otherUserId || !token) return;\n    const res = await fetch(`${getApiUrl()}/api/chat/conversation`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${token}`\n      },\n      body: JSON.stringify({ userId: user._id, otherUserId })\n    });\n    const convo = await res.json();\n    setSelectedConvo(convo);\n    setConversations(prev => [...prev, convo]);\n    setUserSearch('');\n    setSearchResults([]);\n  };\n\n  const sendMessage = async () => {\n    if (!input || !selectedConvo || !token) return;\n    const recipient = selectedConvo.participants.find(id => id !== user._id);\n    socketRef.current?.emit('sendMessage', {\n      conversationId: selectedConvo._id,\n      sender: user._id,\n      recipient,\n      message: input\n    });\n    await fetch(`${getApiUrl()}/api/chat/message`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${token}`\n      },\n      body: JSON.stringify({\n        conversationId: selectedConvo._id,\n        sender: user._id,\n        recipient,\n        message: input\n      })\n    });\n    // Do not update messages here; wait for real-time event\n    setInput('');\n  };\n\n  // Typing indicator\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setInput(e.target.value);\n    if (selectedConvo) {\n      const recipient = selectedConvo.participants.find(id => id !== user._id);\n      socketRef.current?.emit('typing', { recipient, sender: user._id });\n    }\n  };\n\n  // User search\n  const handleUserSearch = async (e: React.ChangeEvent<HTMLInputElement>) => {\n    setUserSearch(e.target.value);\n    if (e.target.value.length > 1) {\n      try {\n        const res = await fetch(`${getApiUrl()}/api/users/search?query=${encodeURIComponent(e.target.value)}`, {\n          headers: {\n            'Authorization': `Bearer ${token}`\n          }\n        });\n        if (!res.ok) {\n          console.error('User search failed:', res.status, await res.text());\n          setSearchResults([]);\n          return;\n        }\n        const results = await res.json();\n        setSearchResults(results);\n      } catch (err) {\n        console.error('User search error:', err);\n        setSearchResults([]);\n      }\n    } else {\n      setSearchResults([]);\n    }\n  };\n\n  // Handler for deleting conversation\n  const handleDeleteConversation = async () => {\n    if (!selectedConvo || !token) return;\n    if (!window.confirm('Delete this conversation? This cannot be undone.')) return;\n    await fetch(`${getApiUrl()}/api/chat/messages/${selectedConvo._id}`, {\n      method: 'DELETE',\n      headers: { 'Authorization': `Bearer ${token}` }\n    });\n    setConversations(conversations.filter(c => c._id !== selectedConvo._id));\n    setSelectedConvo(null);\n    setMessages([]);\n  };\n\n  // Handler for block/unblock user\n  const isBlocked = selectedConvo && userWithBlocks && userWithBlocks.blockedUsers && selectedConvo.participants.some(\n    id => id !== userWithBlocks._id && userWithBlocks.blockedUsers!.includes(id)\n  );\n  const otherUserId = selectedConvo && userWithBlocks ? selectedConvo.participants.find(id => id !== userWithBlocks._id) : null;\n  const handleBlockUnblock = async () => {\n    if (!otherUserId || !token) return;\n    const url = isBlocked ? '/api/chat/unblock' : '/api/chat/block';\n    await fetch(`${getApiUrl()}${url}`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json', 'Authorization': `Bearer ${token}` },\n      body: JSON.stringify({ userId: user._id, blockId: otherUserId })\n    });\n    // Fetch updated user and update AuthContext state\n    const userRes = await fetch(`${getApiUrl()}/api/users/${user._id}`, {\n      headers: { 'Authorization': `Bearer ${token}` }\n    });\n    if (userRes.ok) {\n      const updatedUser = await userRes.json();\n      updateUser(updatedUser);\n    }\n    // Emit a socket event to update both users' conversations in real time\n    if (socketRef.current) {\n      socketRef.current.emit('refreshConversations', { userId: user._id, otherUserId });\n    }\n    // Refetch conversations for this user\n    fetch(`${getApiUrl()}/api/chat/conversations/${user._id}`, {\n      headers: { 'Authorization': `Bearer ${token}` }\n    })\n      .then(res => res.json())\n      .then(data => setConversations(Array.isArray(data) ? data : []));\n    // Optionally, refetch selected conversation if still valid\n    if (selectedConvo) {\n      fetch(`${getApiUrl()}/api/chat/messages/${selectedConvo._id}`, {\n        headers: { 'Authorization': `Bearer ${token}` }\n      })\n        .then(res => res.json())\n        .then(setMessages);\n    }\n  };\n\n  // Handler for confirming adoption\n  const handleConfirmAdoption = async (dogId: string, isOwner: boolean) => {\n    if (!token) return;\n    try {\n      const res = await fetch(`${getApiUrl()}/api/dogs/confirm-adoption`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json', 'Authorization': `Bearer ${token}` },\n        body: JSON.stringify({ dogId, isOwner })\n      });\n      if (res.ok) {\n        fetchPendingAdoptions(); // Refresh pending adoptions\n        // Refresh messages to show confirmation message\n        if (selectedConvo) {\n          fetch(`${getApiUrl()}/api/chat/messages/${selectedConvo._id}`, {\n            headers: { 'Authorization': `Bearer ${token}` }\n          })\n            .then(res => res.json())\n            .then(setMessages);\n        }\n      }\n    } catch (err) {\n      console.error('Confirm adoption error:', err);\n    }\n  };\n\n  return (\n    <div className=\"chat-app-container\">\n      {/* User profile at top */}\n      <div className=\"chat-app-profile-row\" style={{ display: 'flex', flexDirection: 'column', alignItems: 'center', gap: 12, marginBottom: 16 }}>\n        <img\n          src={getProfilePictureUrl()}\n          alt=\"Profile\"\n          style={{ width: 40, height: 40, borderRadius: '50%', objectFit: 'cover', border: '2px solid #ddd', minWidth: '40px', minHeight: '40px', maxWidth: '60px', maxHeight: '60px' }}\n        />\n        <span style={{ fontWeight: 500, fontSize: 16 }}>{user?.username || 'Me'}</span>\n        <span style={{ color: '#4CAF50', fontSize: 13, marginTop: 4 }}>Online</span>\n      </div>\n      <div className=\"chat-app-sidebar\">\n        <input\n          className=\"chat-app-search\"\n          type=\"text\"\n          value={userSearch}\n          onChange={handleUserSearch}\n          placeholder=\"Search users by name or username...\"\n        />\n        {searchResults.length > 0 && (\n          <ul style={{ listStyle: 'none', padding: 0, marginBottom: 4 }}>\n            {searchResults.map(u => (\n              <li key={u._id}>\n                <button className=\"chat-app-convo-btn\" onClick={() => startConversation(u._id)}>{u.userName}</button>\n              </li>\n            ))}\n          </ul>\n        )}\n\n        {/* Active/Online Users List */}\n        <div className=\"chat-app-online-users\">\n          <b style={{ fontSize: 13, color: '#43b581' }}>Online Users</b>\n          <ul style={{ listStyle: 'none', padding: 0, minHeight: 40 }}>\n            {onlineUsers.length === 0 && (\n              <li style={{ color: '#aaa', fontSize: 12 }}>No users online</li>\n            )}\n            {onlineUsers.map(u => {\n              let displayName = '';\n              if (typeof u === 'string') {\n                displayName = u;\n              } else if (u && typeof u === 'object') {\n                // Only access properties that exist on the type\n                displayName = u.userName || u._id || 'Unknown';\n              } else {\n                displayName = 'Unknown';\n              }\n              return (\n                <li key={typeof u === 'string' ? u : u._id} style={{ display: 'flex', alignItems: 'center', gap: 6 }}>\n                  <span className=\"chat-app-online-dot\" />\n                  <button className=\"chat-app-convo-btn\" onClick={() => startConversation(typeof u === 'string' ? u : u._id)}>{displayName}</button>\n                </li>\n              );\n            })}\n          </ul>\n        </div>\n\n        <div className=\"chat-app-convos\">\n          <b style={{ fontSize: 13, color: '#2196f3' }}>Conversations</b>\n          <ul style={{ listStyle: 'none', padding: 0 }}>\n            {conversations.map(convo => (\n              <li key={convo._id}>\n                <button\n                  className={`chat-app-convo-btn${selectedConvo?._id === convo._id ? ' selected' : ''}`}\n                  onClick={() => setSelectedConvo(convo)}\n                >\n                  {convoUsernames[convo._id] || convo.participants.filter(id => id !== user._id).join(', ')}\n                </button>\n              </li>\n            ))}\n          </ul>\n        </div>\n      </div>\n      <div className=\"chat-app-main\">\n        {/* DEBUG: Show pending adoptions */}\n        {pendingAdoptions.length > 0 && (\n          <div style={{ background: '#fff3cd', padding: '8px', marginBottom: '8px', border: '1px solid #ffeaa7', borderRadius: '4px' }}>\n            <strong>DEBUG - Pending Adoptions:</strong>\n            <ul style={{ margin: 0, paddingLeft: '20px' }}>\n              {pendingAdoptions.map(dog => {\n                let adopter = 'None';\n                const a = dog.adoptionQueue?.adopter;\n                if (a) {\n                  if (typeof a === 'string') {\n                    adopter = a;\n                  } else if (typeof a === 'object') {\n                    adopter = a.name || a.username || a._id || 'Unknown';\n                  }\n                }\n                return (\n                  <li key={dog._id}>\n                    {dog.name} - Owner: {dog.user.name} ({dog.user._id === user._id ? 'You' : 'Other'}) - Adopter: {adopter}\n                  </li>\n                );\n              })}\n            </ul>\n          </div>\n        )}\n\n        {/* Conversation actions always at top for all devices */}\n        {selectedConvo && (\n          <div className=\"chat-app-actions-row\">\n            <button className=\"chat-app-action-btn delete\" onClick={handleDeleteConversation}>Delete</button>\n            <button className={`chat-app-action-btn ${isBlocked ? 'unblock' : 'block'}`} onClick={handleBlockUnblock}>{isBlocked ? 'Unblock' : 'Block'}</button>\n            {(() => {\n              const otherUserId = selectedConvo.participants.find(id => id !== user._id);\n              const filtered = pendingAdoptions.filter(dog => {\n                const isCurrentUserOwner = String(dog.user._id) === String(user._id);\n                if (isCurrentUserOwner) {\n                  return String(dog.adoptionQueue?.adopter?._id) === String(otherUserId);\n                } else {\n                  return String(dog.user._id) === String(otherUserId);\n                }\n              });\n              console.log('[ChatApp] Selected convo:', selectedConvo._id, 'Other user:', otherUserId, 'Pending adoptions:', pendingAdoptions.length, 'Filtered:', filtered.length);\n              return filtered.map(dog => (\n                <button\n                  key={dog._id}\n                  className=\"chat-app-action-btn confirm\"\n                  onClick={() => handleConfirmAdoption(dog._id, dog.user._id === user._id)}\n                >\n                  Confirm Adoption: {dog.name}\n                </button>\n              ));\n            })()}\n          </div>\n        )}\n        <div className=\"chat-app-messages\">\n          {messages.map(msg => (\n              <div key={msg._id} className={`chat-app-message${user && msg.sender === user._id ? ' self' : ''}`}>\n                <span className={`chat-app-bubble${user && msg.sender === user._id ? ' self' : ''}`}>{msg.message}</span>\n              </div>\n            ))}\n          {typing && <div className=\"chat-app-typing\">Typing...</div>}\n        </div>\n        {selectedConvo && (\n          <div className=\"chat-app-input-row\">\n            <input\n              className=\"chat-app-input\"\n              type=\"text\"\n              value={input}\n              onChange={handleInputChange}\n              onKeyDown={e => { if (e.key === 'Enter') sendMessage(); }}\n              placeholder=\"Type a message...\"\n            />\n            <button\n              className=\"chat-app-send-btn\"\n              onClick={sendMessage}\n              disabled={!input.trim()}\n            >Send</button>\n          </div>\n        )}\n        {notification && (\n          <div className=\"chat-app-notification\">{notification}</div>\n        )}\n      </div>\n      {/* Close button at top right (desktop), static on mobile) */}\n      <button\n        onClick={() => window.dispatchEvent(new CustomEvent('closeChatModal'))}\n        style={{\n          position: 'absolute',\n          top: 10,\n          right: 10,\n          width: 56,\n          height: 56,\n          backgroundColor: '#e74c3c',\n          color: '#fff',\n          border: 'none',\n          borderRadius: '50%',\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n          boxShadow: '0 4px 12px rgba(0,0,0,0.3)',\n          cursor: 'pointer',\n          zIndex: 2147483647,\n          padding: 0\n        }}\n        title=\"Close\"\n        aria-label=\"Close\"\n      >\n        <span style={{\n          fontSize: 40,\n          fontWeight: 900,\n          lineHeight: '56px',\n          width: '100%',\n          textAlign: 'center',\n          display: 'block',\n          userSelect: 'none',\n          letterSpacing: 2\n        }}>Ã—</span>\n      </button>\n    </div>\n  );\n};\n\nexport default ChatApp;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}